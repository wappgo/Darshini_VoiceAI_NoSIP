2025-05-14 13:41:54,388 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 13:41:54,389 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 13:41:54,389 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 13:41:54,389 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 13:41:54,396 - asyncio - DEBUG - [MainThread] - Using selector: SelectSelector
2025-05-14 13:41:54,446 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 13:41:54,446 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 13:41:54,446 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 13:41:54,446 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:42:08,039 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:42:08,039 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:42:08,040 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:42:08,040 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:42:08,050 - asyncio - DEBUG - [MainThread] - Using selector: SelectSelector
2025-05-14 14:42:08,170 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:42:08,170 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:42:08,170 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:42:08,171 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:42:08,174 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:42:08,175 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:42:08,177 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:42:08,178 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:44:19,692 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:44:19,692 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:44:19,692 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:44:19,692 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:44:19,693 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 14:44:19,693 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 14:44:19,693 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 14:44:19,693 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 14:44:19,694 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 14:44:19,694 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 14:44:19,694 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 14:44:19,695 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 14:44:19,697 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 14:44:19,700 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 14:44:19,702 - livekit.agents - ERROR - [LiveKitAgentWorker] - worker failed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 90, in _worker_run
    await worker.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 402, in run
    await self._http_server.start()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1525, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 10048] error while attempting to bind on address ('::', 8081, 0, 0): only one usage of each socket address (protocol/network address/port) is normally permitted
2025-05-14 14:44:19,738 - livekit.agents - INFO - [LiveKitAgentWorker] - draining worker
2025-05-14 14:44:19,739 - livekit.agents - INFO - [LiveKitAgentWorker] - shutting down worker
2025-05-14 14:44:19,740 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Restored original sys.argv: ['main.py', 'dev']
2025-05-14 14:44:19,740 - __main__ - ERROR - [LiveKitAgentWorker] - !!! run_worker: CRITICAL ERROR during run_worker or cli.run_app: 
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 946, in run_worker
    cli.run_app(worker_options)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\cli.py", line 247, in run_app
    cli()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1363, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1830, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 794, in invoke
    return callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\cli.py", line 72, in start
    _run.run_worker(args)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 112, in run_worker
    loop.run_until_complete(worker.aclose())
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 98, in run_until_complete
    return f.result()
           ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 571, in aclose
    assert self._close_future is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-05-14 14:44:19,788 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Function execution complete or terminated. ---
2025-05-14 14:44:24,694 - __main__ - ERROR - [MainThread] - --- __main__: Worker thread IS NOT ALIVE. It likely exited. Check 'run_worker' logs for errors (e.g., missing credentials).
2025-05-14 14:44:24,694 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 14:44:24,746 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:44:24,747 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:44:24,747 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:44:24,747 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:44:24,786 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-7' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=SystemExit(1)>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 163, in startup
    server = await loop.create_server(
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1525, in create_server
    raise OSError(err.errno, 'error while attempting '
OSError: [Errno 10048] error while attempting to bind on address ('0.0.0.0', 8000): only one usage of each socket address (protocol/network address/port) is normally permitted

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 985, in <module>
    uvicorn.run(
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 70, in serve
    await self._serve(sockets)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 85, in _serve
    await self.startup(sockets=sockets)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 173, in startup
    sys.exit(1)
SystemExit: 1
2025-05-14 14:45:07,959 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:45:07,959 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:45:07,972 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:45:07,972 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:45:07,972 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 14:45:07,972 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 14:45:07,972 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 14:45:07,972 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 14:45:07,972 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 14:45:07,972 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 14:45:07,972 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 14:45:07,972 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 14:45:07,972 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 14:45:07,981 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 14:45:07,989 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:45:07,990 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:45:07,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:45:07,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:45:07,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:45:08,006 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 14:45:08,135 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 14:45:12,975 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 14:45:12,975 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 14:45:13,034 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:45:13,034 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:45:13,034 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:45:13,034 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:45:22,195 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:45:22,195 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:45:22,195 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:45:22,198 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:46:32,896 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:46:32,897 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:46:32,899 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:46:32,900 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:49:14,203 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:49:14,203 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:49:14,203 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:49:14,203 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:49:14,204 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 14:49:14,204 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 14:49:14,204 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 14:49:14,204 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 14:49:14,205 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 14:49:14,205 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 14:49:14,205 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 14:49:14,206 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 14:49:14,207 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 14:49:14,210 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 14:49:14,210 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:14,210 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:14,210 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:14,210 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:14,210 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:14,210 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:14,210 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:14,210 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:14,228 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:14,228 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:14,229 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:14,229 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:14,229 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:14,230 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:14,230 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:14,230 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:14,233 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 14:49:14,348 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 14:49:19,206 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 14:49:19,206 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 14:49:19,263 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:49:19,263 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:49:19,264 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:49:19,264 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:49:19,285 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:49:19,286 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:49:19,289 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:49:19,289 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:49:19,837 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 14:49:19,854 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_4riWiTM2bRtt
2025-05-14 14:49:19,856 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_4riWiTM2bRtt.
2025-05-14 14:49:19,857 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Error during ctx.connect() (attempt 1): JobContext.connect() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 814, in entrypoint
    await ctx.connect(auto_subscribe=AutoSubscribe.AUDIO_ONLY, timeout=30.0)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JobContext.connect() got an unexpected keyword argument 'timeout'
2025-05-14 14:49:19,921 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:49:19,924 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:49:21,857 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Error during ctx.connect() (attempt 2): JobContext.connect() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 814, in entrypoint
    await ctx.connect(auto_subscribe=AutoSubscribe.AUDIO_ONLY, timeout=30.0)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JobContext.connect() got an unexpected keyword argument 'timeout'
2025-05-14 14:49:23,863 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Error during ctx.connect() (attempt 3): JobContext.connect() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 814, in entrypoint
    await ctx.connect(auto_subscribe=AutoSubscribe.AUDIO_ONLY, timeout=30.0)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JobContext.connect() got an unexpected keyword argument 'timeout'
2025-05-14 14:49:23,863 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Failed to connect after 3 attempts.
2025-05-14 14:49:23,863 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Fatal error during ctx.connect(): JobContext.connect() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 814, in entrypoint
    await ctx.connect(auto_subscribe=AutoSubscribe.AUDIO_ONLY, timeout=30.0)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JobContext.connect() got an unexpected keyword argument 'timeout'
2025-05-14 14:49:23,865 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 814, in entrypoint
    await ctx.connect(auto_subscribe=AutoSubscribe.AUDIO_ONLY, timeout=30.0)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: JobContext.connect() got an unexpected keyword argument 'timeout'
2025-05-14 14:50:00,795 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-14 14:50:00,795 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-14 14:50:16,957 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:50:16,957 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:50:16,957 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:50:16,957 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:50:16,957 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 14:50:16,957 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 14:50:16,957 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 14:50:16,957 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 14:50:16,957 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 14:50:16,957 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 14:50:16,957 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 14:50:16,957 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 14:50:16,957 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 14:50:16,969 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 14:50:16,976 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:50:16,977 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:50:16,977 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:50:16,978 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:50:16,985 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:50:16,985 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:50:16,985 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:50:16,985 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 14:50:17,175 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 14:50:21,963 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 14:50:21,963 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 14:50:23,819 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:50:23,820 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:50:23,820 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:50:23,820 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:50:23,827 - asyncio - DEBUG - [MainThread] - Using selector: SelectSelector
2025-05-14 14:50:23,875 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:50:23,875 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:50:23,875 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:50:23,875 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:50:33,891 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:50:33,891 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:50:33,895 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:50:33,895 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:52:53,308 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:52:53,308 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:52:53,308 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:52:53,308 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:52:53,308 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 14:52:53,308 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 14:52:53,308 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 14:52:53,308 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 14:52:53,308 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 14:52:53,308 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 14:52:53,308 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 14:52:53,314 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 14:52:53,316 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 14:52:53,320 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 14:52:53,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:52:53,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:52:53,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:52:53,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:52:53,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:52:53,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:52:53,333 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:52:53,334 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 14:52:53,336 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:52:53,336 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:52:53,337 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:52:53,337 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:52:53,338 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:52:53,338 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:52:53,338 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:52:53,338 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 14:52:53,338 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 14:52:53,461 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 14:52:58,314 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 14:52:58,315 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 14:53:00,341 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:53:00,341 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:53:00,341 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:53:00,341 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:53:00,348 - asyncio - DEBUG - [MainThread] - Using selector: SelectSelector
2025-05-14 14:53:00,460 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 14:53:00,460 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 14:53:00,460 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 14:53:00,460 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 14:53:58,084 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:53:58,084 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:53:58,084 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:53:58,084 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:54:46,175 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:54:46,175 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:54:46,178 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:54:46,178 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:56:43,543 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:56:43,543 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:56:43,546 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 14:56:43,546 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 14:57:52,345 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-14 14:57:52,355 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-14 15:24:15,824 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:24:15,824 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:24:15,825 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:24:15,825 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:24:15,831 - asyncio - DEBUG - [MainThread] - Using selector: SelectSelector
2025-05-14 15:24:15,917 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:24:15,917 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:24:15,918 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:24:15,918 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:26:15,483 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:26:15,484 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:26:15,484 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:26:15,485 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:26:15,485 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 15:26:16,393 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 15:26:16,393 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 15:26:16,393 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 15:26:16,393 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 15:26:16,410 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 15:26:16,897 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 15:26:16,897 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 15:26:16,897 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 15:26:16,897 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 15:26:16,897 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 15:26:16,901 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 15:26:16,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:26:16,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:26:16,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:26:16,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:26:16,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:26:16,916 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:26:16,916 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:26:16,916 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:26:16,921 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:26:16,921 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:26:16,922 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:26:16,922 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:26:16,922 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:26:16,922 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:26:16,922 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:26:16,922 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:26:16,930 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 15:26:17,040 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 15:26:21,430 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 15:26:21,430 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 15:26:21,496 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:26:21,496 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:26:21,497 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:26:21,497 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:26:58,581 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:26:58,581 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:26:58,581 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:26:58,581 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:27:03,651 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:27:03,652 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:27:03,655 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:27:03,655 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:27:09,226 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:27:09,227 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:27:09,229 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:27:09,230 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:30:03,372 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-14 15:30:03,372 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-14 15:30:03,408 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-100' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 6 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-14 15:30:20,259 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:30:20,259 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:30:20,260 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:30:20,260 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:30:20,260 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 15:30:21,162 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 15:30:21,162 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 15:30:21,162 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 15:30:21,162 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 15:30:21,178 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 15:30:21,666 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 15:30:21,667 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 15:30:21,667 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 15:30:21,667 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 15:30:21,667 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 15:30:21,672 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 15:30:21,676 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:30:21,676 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:30:21,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:30:21,692 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 15:30:21,842 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 15:30:26,194 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 15:30:26,194 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 15:30:26,242 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:30:26,249 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:30:26,249 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:30:26,250 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:30:47,274 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:30:47,274 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:30:47,277 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:30:47,277 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:34:32,855 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-14 15:34:32,856 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-14 15:34:32,903 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-100' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 6 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-14 15:51:08,029 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:51:08,029 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:51:08,029 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:51:08,029 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:51:08,039 - asyncio - DEBUG - [MainThread] - Using selector: SelectSelector
2025-05-14 15:51:08,092 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:51:08,092 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:51:08,092 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:51:08,092 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:51:25,129 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:51:25,129 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:51:25,129 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:51:25,129 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:51:25,129 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 15:51:25,143 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-14 15:51:25,999 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 15:51:25,999 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 15:51:25,999 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 15:51:25,999 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 15:51:26,006 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 15:51:26,470 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 15:51:26,470 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 15:51:26,471 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 15:51:26,472 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 15:51:26,474 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 15:51:26,476 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 15:51:26,482 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:51:26,482 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:51:26,482 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:51:26,482 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:51:26,482 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:51:26,482 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:51:26,482 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:51:26,482 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:51:26,491 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:51:26,492 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:51:26,492 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:51:26,492 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:51:26,492 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:51:26,492 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:51:26,492 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:51:26,492 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:51:26,499 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 15:51:26,638 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 15:51:31,024 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 15:51:31,026 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 15:51:31,121 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:51:31,122 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:51:31,122 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:51:31,122 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:52:14,579 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:52:14,579 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:52:14,579 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:52:14,584 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:53:07,592 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:53:07,592 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:53:07,592 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:53:07,592 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:53:07,608 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 15:53:07,608 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-14 15:53:08,425 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 15:53:08,425 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 15:53:08,435 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 15:53:08,435 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 15:53:08,462 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 15:53:08,895 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 15:53:08,895 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 15:53:08,895 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 15:53:08,897 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 15:53:08,897 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 15:53:08,902 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 15:53:08,907 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:53:08,908 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:53:08,908 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:53:08,909 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:53:08,909 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:53:08,910 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:53:08,910 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:53:08,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 15:53:08,913 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:53:08,913 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:53:08,914 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:53:08,915 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:53:08,915 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:53:08,915 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:53:08,915 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:53:08,917 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 15:53:08,920 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 15:53:09,040 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 15:53:13,478 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 15:53:13,478 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 15:53:13,536 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 15:53:13,538 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 15:53:13,539 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 15:53:13,539 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 15:53:18,939 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:53:18,939 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:53:18,939 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:53:18,946 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:57:55,555 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:57:55,555 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 15:57:55,558 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 15:57:55,559 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 16:01:31,540 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 16:01:31,541 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 16:01:31,541 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 16:01:31,542 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 16:01:31,542 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 16:01:32,318 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 16:01:32,319 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 16:01:32,320 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 16:01:32,320 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 16:01:32,352 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 16:01:32,782 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 16:01:32,783 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 16:01:32,783 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 16:01:32,784 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 16:01:32,785 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 16:01:32,789 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 16:01:32,796 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:32,796 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:32,797 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:32,797 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:32,798 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:32,798 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:32,799 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:32,800 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:32,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:32,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:32,803 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:32,803 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:32,803 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:32,804 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:32,804 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:32,804 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:32,809 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 16:01:32,918 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 16:01:37,383 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 16:01:37,385 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 16:01:37,438 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 16:01:37,438 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 16:01:37,439 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 16:01:37,439 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 16:01:43,974 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 16:01:43,974 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 16:01:43,976 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 16:01:43,977 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 16:01:45,558 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 16:01:45,580 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_UBRiSnrEHLDE
2025-05-14 16:01:45,580 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 16:01:45,580 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_UBRiSnrEHLDE.
2025-05-14 16:01:45,678 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 16:01:45,679 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 16:01:46,057 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_CcCLnEHvobKj
2025-05-14 16:01:46,058 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 16:01:46,226 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 16:01:46,226 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 16:01:46,227 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 16:01:46,227 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 16:01:46,228 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 16:01:46,228 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 16:01:46,233 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 16:01:46,234 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 16:01:47,225 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 16:01:47,839 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 16:01:54,161 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:02:31,056 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:02:33,814 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:02:57,522 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:02:58,057 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:02:59,896 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:03:11,682 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:03:12,322 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:03:23,326 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:03:25,628 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:03:26,107 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:04:26,998 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:04:33,948 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:04:45,163 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:04:50,159 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:04:51,718 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:05:07,742 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:05:22,091 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:06:02,887 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:06:03,021 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:06:12,459 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:06:14,368 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:06:19,388 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:06:23,941 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:06:25,032 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:07:03,303 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:07:06,364 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:07:10,574 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:07:13,584 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:07:29,122 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:07:33,053 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:07:51,865 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:08:07,626 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:08:20,079 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:08:20,823 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:08:41,773 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:08:45,427 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:13:28,459 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:13:39,603 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:13:44,512 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:13:51,706 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:14:20,508 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:14:38,388 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:15:05,179 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:15:12,172 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:15:13,603 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:15:25,947 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:15:38,349 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:16:05,059 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:16:10,060 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:17:32,939 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:17:35,761 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:18:03,700 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:18:04,371 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:18:22,299 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-14 16:18:22,865 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 16:18:22,867 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 16:18:22,874 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 16:18:22,877 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 16:18:23,364 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 16:18:26,536 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:18:30,946 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:18:38,070 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:18:39,400 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:18:52,150 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:18:53,461 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:19:06,116 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:19:07,233 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:19:15,442 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:19:19,041 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:19:20,886 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:19:45,604 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:20:23,758 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:20:24,886 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:20:26,505 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:20:45,829 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:20:56,154 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:21:09,939 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:21:20,655 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:21:23,523 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:21:27,236 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:21:28,863 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:22:20,397 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:22:30,139 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:22:30,357 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:22:58,645 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:23:15,032 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:23:54,833 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:24:27,640 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:24:35,565 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:25:16,639 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:25:18,937 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:25:58,626 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:26:25,878 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:26:28,187 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:26:37,182 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:26:42,634 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:27:09,287 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:35:46,679 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:35:51,675 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:35:53,651 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:35:58,583 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:36:03,286 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:36:03,675 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:36:21,936 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:36:26,879 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:48:50,487 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:04,234 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:05,111 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:12,427 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:19,064 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:29,884 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:30,176 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:33,976 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:49,480 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:49:59,157 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:50:13,278 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:50:27,139 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:50:34,425 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:50:44,988 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:50:52,305 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:50:55,358 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:50:56,331 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:51:22,223 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:51:23,734 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:51:37,523 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:51:38,139 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:52:09,706 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:52:16,246 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:52:31,910 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:52:54,628 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:59:11,498 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:59:11,683 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:59:12,182 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 16:59:20,867 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:00:03,072 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-14 17:00:03,132 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-14 17:00:03,207 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-100' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-14 17:00:07,193 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 17:00:07,194 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 17:00:07,194 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 17:00:07,194 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 17:00:07,194 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 17:00:07,974 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 17:00:07,974 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 17:00:07,974 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 17:00:07,974 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 17:00:08,007 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 17:00:08,410 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 17:00:08,411 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 17:00:08,411 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 17:00:08,412 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 17:00:08,413 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 17:00:08,417 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 17:00:08,423 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:00:08,423 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:00:08,424 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:00:08,424 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:00:08,424 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:00:08,424 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:00:08,425 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:00:08,425 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:00:08,428 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:00:08,428 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:00:08,429 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:00:08,429 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:00:08,429 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:00:08,429 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:00:08,430 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:00:08,430 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:00:08,435 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 17:00:08,551 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 17:00:13,023 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 17:00:13,024 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 17:00:13,114 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 17:00:13,115 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 17:00:13,115 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 17:00:13,115 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 17:00:33,822 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 17:00:33,825 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 17:00:33,835 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 17:00:33,838 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 17:02:52,441 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 17:02:52,443 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 17:02:52,448 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 17:02:52,449 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 17:09:03,100 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 17:09:03,100 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 17:09:03,101 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 17:09:03,101 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 17:09:03,101 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 17:09:03,832 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 17:09:03,833 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 17:09:03,834 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 17:09:03,834 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 17:09:03,841 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 17:09:04,254 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 17:09:04,254 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 17:09:04,254 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 17:09:04,256 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 17:09:04,257 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 17:09:04,261 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 17:09:04,269 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:04,269 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:04,270 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:04,271 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:04,271 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:04,272 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:04,272 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:04,273 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:04,276 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:04,276 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:04,276 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:04,276 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:04,278 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:04,278 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:04,278 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:04,278 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:04,283 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 17:09:04,422 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 17:09:08,858 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 17:09:08,860 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 17:09:08,964 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 17:09:08,966 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 17:09:08,966 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 17:09:08,966 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 17:09:16,095 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 17:09:16,096 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 17:09:16,098 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 17:09:16,098 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 17:09:17,599 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 17:09:17,624 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_4ghs6oNAXkwJ
2025-05-14 17:09:17,624 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 17:09:17,625 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_4ghs6oNAXkwJ.
2025-05-14 17:09:17,740 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:09:17,741 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:09:17,954 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_uEeQNFy34kLQ
2025-05-14 17:09:17,955 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 17:09:18,129 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 17:09:18,129 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 17:09:18,130 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 17:09:18,131 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 17:09:18,131 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 17:09:18,132 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 17:09:18,136 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 17:09:18,137 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 17:09:19,130 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 17:09:19,353 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1484, in request
    response = await self._client.send(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 115, in connect_tcp
    stream: anyio.abc.ByteStream = await anyio.connect_tcp(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\anyio\_core\_sockets.py", line 239, in connect_tcp
    else ExceptionGroup("multiple connection attempts failed", oserrors)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: second argument (exceptions) must be a non-empty sequence

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 566, in _run
    self._oai_stream = stream = await self._client.chat.completions.create(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2028, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1516, in request
    raise APIConnectionError(request=request) from err
openai.APIConnectionError: Connection error.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 609, in _run
    raise APIConnectionError(retryable=retryable) from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-14 17:09:20,852 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:09:22,224 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 17:09:34,976 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:09:48,428 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:10:16,383 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:10:16,796 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:10:29,519 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:10:45,113 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:10:55,043 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:11:14,159 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:11:27,496 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:11:34,264 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:11:46,318 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:12:10,610 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:12:29,281 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:12:36,705 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:12:47,898 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:19:39,995 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:19:51,963 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:20:51,378 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:21:07,466 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:27:52,952 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:28:53,105 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:28:58,060 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:28:59,895 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:33:32,196 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 17:33:32,196 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 17:33:32,196 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 17:33:32,197 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 17:33:32,197 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 17:33:32,955 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 17:33:32,955 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-14 17:33:32,957 - __main__ - INFO - [MainThread] - [StartupCheck] Testing OpenAI API connectivity...
2025-05-14 17:33:32,957 - __main__ - ERROR - [MainThread] - [StartupCheck] OpenAI API connectivity FAILED: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1051, in test_openai_connectivity
    response = await oai_test.ChatCompletion.acreate(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\lib\_old_api.py", line 39, in __call__
    raise APIRemovedInV1(symbol=self._symbol)
openai.lib._old_api.APIRemovedInV1: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

2025-05-14 17:33:32,990 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 17:33:32,991 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 17:33:32,991 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 17:33:33,005 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 17:33:33,402 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 17:33:33,402 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 17:33:33,402 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 17:33:33,404 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 17:33:33,405 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 17:33:33,408 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 17:33:33,414 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:33,415 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:33,416 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:33,416 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:33,417 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:33,418 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:33,418 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:33,419 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:33,422 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:33,423 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:33,423 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:33,423 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:33,423 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:33,424 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:33,424 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:33,424 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:33,428 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 17:33:33,565 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 17:33:38,038 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 17:33:38,038 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 17:33:38,126 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 17:33:38,127 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 17:33:38,127 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 17:33:38,128 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 17:33:41,520 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 17:33:41,521 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 17:33:41,523 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 17:33:41,524 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 17:33:42,109 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 17:33:42,136 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_RxzbgXhHTku3
2025-05-14 17:33:42,136 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 17:33:42,137 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_RxzbgXhHTku3.
2025-05-14 17:33:42,188 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 17:33:42,189 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 17:33:42,574 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_iQHz5SBm7tJE
2025-05-14 17:33:42,574 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 17:33:42,759 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 17:33:42,759 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 17:33:42,759 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 17:33:42,760 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 17:33:42,760 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 17:33:42,760 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 17:33:42,764 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 17:33:42,802 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 17:33:43,759 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 17:33:49,081 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 17:33:57,933 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:34:13,149 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:34:13,934 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:34:23,028 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:34:36,382 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:57:56,931 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 17:58:05,339 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:09:42,975 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:09:53,298 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:09:59,982 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:10:14,087 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:15:21,181 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 18:15:21,181 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 18:15:21,181 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 18:15:21,182 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 18:15:21,182 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 18:15:21,927 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 18:15:21,927 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 18:15:21,928 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 18:15:21,928 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 18:15:21,959 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 18:15:22,351 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 18:15:22,351 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 18:15:22,351 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 18:15:22,352 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 18:15:22,353 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 18:15:22,357 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 18:15:22,364 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:22,365 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:22,366 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:22,367 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:22,367 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:22,368 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:22,368 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:22,368 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:22,372 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:22,372 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:22,373 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:22,373 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:22,373 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:22,374 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:22,374 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:22,374 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:22,383 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 18:15:22,512 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 18:15:26,975 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 18:15:26,975 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 18:15:27,083 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 18:15:27,089 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 18:15:27,089 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 18:15:27,090 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 18:15:28,240 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 18:15:28,243 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 18:15:28,251 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 18:15:28,254 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 18:15:29,667 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 18:15:29,682 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_AxQ5v26tong5
2025-05-14 18:15:29,682 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 18:15:29,682 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_AxQ5v26tong5.
2025-05-14 18:15:29,768 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:15:29,769 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:15:29,963 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_uhsK2dKqmPCv
2025-05-14 18:15:29,964 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 18:15:30,141 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 18:15:30,141 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 18:15:30,142 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 18:15:30,142 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 18:15:30,142 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 18:15:30,143 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 18:15:30,146 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 18:15:30,148 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 18:15:31,146 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 18:15:37,530 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 18:15:41,392 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:15:51,119 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:16:06,215 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:16:09,291 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:16:29,347 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:16:40,455 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:16:41,009 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:16:43,116 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:17:09,155 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:17:21,069 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:17:26,349 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:17:39,341 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:17:53,423 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:18:10,149 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:18:14,263 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:19:25,841 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:19:38,524 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:31:49,412 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:31:58,416 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:32:08,243 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:32:17,168 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:35:01,050 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 18:35:01,050 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 18:35:01,051 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 18:35:01,051 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 18:35:01,051 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 18:35:01,814 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 18:35:01,815 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 18:35:01,815 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 18:35:01,815 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 18:35:01,836 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 18:35:02,239 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 18:35:02,240 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 18:35:02,240 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 18:35:02,241 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 18:35:02,243 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 18:35:02,246 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 18:35:02,253 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:02,253 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:02,254 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:02,255 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:02,255 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:02,256 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:02,256 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:02,257 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:02,259 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:02,260 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:02,260 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:02,260 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:02,262 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:02,262 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:02,262 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:02,263 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:02,266 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 18:35:02,380 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 18:35:06,853 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 18:35:06,853 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 18:35:06,918 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 18:35:06,918 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 18:35:06,919 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 18:35:06,919 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 18:35:07,921 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 18:35:07,921 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 18:35:07,923 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 18:35:07,924 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 18:35:09,283 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 18:35:09,301 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_v52Zw5VoSke2
2025-05-14 18:35:09,301 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 18:35:09,302 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_v52Zw5VoSke2.
2025-05-14 18:35:09,365 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:35:09,367 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:35:09,797 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_KyWoQUtq3osp
2025-05-14 18:35:09,799 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 18:35:09,976 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 18:35:09,977 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 18:35:09,977 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 18:35:09,977 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 18:35:09,978 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 18:35:09,978 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 18:35:09,982 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 18:35:09,983 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 18:35:10,975 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 18:35:11,529 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 18:35:13,557 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:35:27,619 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:35:45,575 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:35:49,639 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:36:02,185 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:36:09,569 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:36:21,050 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:36:22,913 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:36:23,637 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:36:39,119 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:36:42,447 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:36:44,032 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:37:24,464 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:37:26,272 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:37:41,180 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:37:42,431 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:37:44,245 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:41:32,765 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 18:41:32,766 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 18:41:32,766 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 18:41:32,766 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 18:41:32,766 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 18:41:33,520 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 18:41:33,520 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 18:41:33,521 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 18:41:33,522 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 18:41:33,552 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 18:41:33,943 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 18:41:33,944 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 18:41:33,944 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 18:41:33,945 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 18:41:33,946 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 18:41:33,950 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 18:41:33,957 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:33,958 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:33,959 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:33,960 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:33,961 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:33,961 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:33,962 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:33,962 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:33,965 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:33,966 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:33,966 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:33,966 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:33,966 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:33,966 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:33,967 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:33,967 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:33,970 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 18:41:34,085 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 18:41:38,569 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 18:41:38,571 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 18:41:38,657 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 18:41:38,659 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 18:41:38,659 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 18:41:38,659 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 18:41:40,143 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 18:41:40,143 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 18:41:40,145 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 18:41:40,146 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 18:41:40,857 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 18:41:40,879 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_bu9fx64JWVY8
2025-05-14 18:41:40,880 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 18:41:40,880 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_bu9fx64JWVY8.
2025-05-14 18:41:40,985 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:41:40,986 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:41:41,433 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_sQtfdYrB7Uwt
2025-05-14 18:41:41,435 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 18:41:41,646 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 18:41:41,646 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 18:41:41,647 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 18:41:41,647 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 18:41:41,647 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 18:41:41,647 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 18:41:41,650 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 18:41:41,654 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 18:41:42,644 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 18:41:42,812 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 18:41:43,808 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:41:44,283 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:41:51,696 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:42:07,982 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:42:27,219 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:42:33,624 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:42:42,912 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:42:55,825 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:43:14,507 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:43:15,436 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:43:27,469 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:43:39,206 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:43:53,990 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:43:54,667 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:44:44,485 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-14 18:44:44,487 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-14 18:44:44,490 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-14 18:45:49,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 18:45:49,761 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 18:45:49,762 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 18:45:49,762 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 18:45:49,762 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 18:45:50,503 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 18:45:50,504 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 18:45:50,504 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 18:45:50,504 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 18:45:50,523 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 18:45:50,923 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 18:45:50,923 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 18:45:50,923 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 18:45:50,925 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 18:45:50,926 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 18:45:50,930 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 18:45:50,937 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:50,938 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:50,938 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:50,939 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:50,939 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:50,940 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:50,940 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:50,941 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:50,943 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:50,944 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:50,944 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:50,944 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:50,945 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:50,945 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:50,945 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:50,945 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:50,953 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 18:45:51,107 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 18:45:55,536 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 18:45:55,536 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 18:45:55,594 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 18:45:55,595 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 18:45:55,595 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 18:45:55,595 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 18:45:56,928 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 18:45:56,930 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 18:45:56,934 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 18:45:56,935 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 18:45:57,738 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 18:45:57,760 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_yoCcNSBEMufi
2025-05-14 18:45:57,761 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 18:45:57,761 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_yoCcNSBEMufi.
2025-05-14 18:45:57,838 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 18:45:57,838 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 18:45:58,064 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_yjUofjo4ppak
2025-05-14 18:45:58,065 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 18:45:58,241 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 18:45:58,242 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 18:45:58,243 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 18:45:58,244 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 18:45:58,244 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 18:45:58,244 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 18:45:58,249 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 18:45:58,252 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 18:45:59,223 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 18:46:03,459 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 18:46:06,477 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:46:14,609 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:46:26,766 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:46:41,212 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:46:42,957 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:05,466 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:07,628 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:08,368 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:12,423 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:13,340 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:23,487 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:28,416 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:31,479 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:33,614 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:46,206 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:51,971 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:53,328 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:54,250 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:47:59,616 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:48:23,500 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:48:46,669 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:48:48,777 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:48:50,082 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:48:51,577 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:48:54,130 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:49:04,723 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:49:07,977 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:49:10,347 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:49:23,551 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 18:49:27,715 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1484, in request
    response = await self._client.send(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1502, in request
    raise APITimeoutError(request=request) from err
openai.APITimeoutError: Request timed out.
2025-05-14 18:49:27,857 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 254, in _run
    raise APITimeoutError() from None
livekit.agents._exceptions.APITimeoutError: Request timed out.
2025-05-14 18:49:45,425 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:05:08,611 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:05:08,612 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:05:38,629 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:05:45,549 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:05:54,923 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:06:03,131 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-14 19:07:30,119 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:07:30,119 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:07:30,119 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:07:30,119 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:07:30,120 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:07:30,124 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-14 19:07:30,859 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:07:30,859 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:07:30,860 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:07:30,860 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:07:30,882 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:07:31,272 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:07:31,273 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:07:31,273 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:07:31,274 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:07:31,275 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:07:31,279 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:07:31,287 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:31,288 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:31,288 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:31,289 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:31,290 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:31,291 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:31,291 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:31,292 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:31,295 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:31,295 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:31,296 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:31,297 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:31,301 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:31,318 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:31,319 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:31,320 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:31,324 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:07:31,462 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:07:35,898 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:07:35,898 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:07:35,959 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:07:35,960 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:07:35,960 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:07:35,960 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:07:36,902 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:07:36,904 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:07:36,912 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:07:36,915 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:07:37,340 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 19:07:37,365 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_PntCbd9WpJgv
2025-05-14 19:07:37,366 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 19:07:37,367 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_PntCbd9WpJgv.
2025-05-14 19:07:37,414 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:07:37,416 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:07:38,902 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_kMzzWF2DXaCa
2025-05-14 19:07:38,902 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 19:07:39,069 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 19:07:39,070 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 19:07:39,070 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 19:07:39,071 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 19:07:39,071 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 19:07:39,071 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 19:07:39,074 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 19:07:39,076 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 19:07:40,072 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 19:07:42,488 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 19:07:43,452 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:08:03,851 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:08:13,516 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:08:24,054 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:08:36,970 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:08:38,578 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:08:57,356 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:09:45,249 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:09:54,717 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:09:55,018 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:14:35,662 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:20:38,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:20:38,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:20:38,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:20:38,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:20:38,206 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:20:38,995 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:20:38,995 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:20:38,996 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:20:38,996 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:20:39,039 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:20:39,433 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:20:39,433 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:20:39,433 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:20:39,435 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:20:39,436 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:20:39,440 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:20:39,446 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:20:39,446 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:20:39,448 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:20:39,448 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:20:39,449 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:20:39,450 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:20:39,450 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:20:39,451 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:20:39,453 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:20:39,453 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:20:39,453 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:20:39,454 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:20:39,454 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:20:39,455 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:20:39,455 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:20:39,455 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:20:39,458 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:20:39,566 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:20:44,055 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:20:44,055 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:20:44,135 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:20:44,136 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:20:44,137 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:20:44,138 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:20:45,219 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:20:45,220 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:20:45,223 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:20:45,224 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:22:46,666 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:22:46,666 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:22:46,666 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:22:46,666 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:22:46,667 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:22:46,671 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-14 19:22:47,491 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:22:47,492 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:22:47,492 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:22:47,492 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:22:47,524 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:22:47,918 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:22:47,918 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:22:47,919 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:22:47,920 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:22:47,922 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:22:47,925 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:22:47,931 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:47,931 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:47,932 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:47,932 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:47,933 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:47,933 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:47,933 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:47,934 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:47,936 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:47,936 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:47,937 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:47,937 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:47,937 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:47,938 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:47,938 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:47,938 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:47,942 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:22:48,105 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:22:52,540 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:22:52,540 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:22:52,596 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:22:52,597 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:22:52,597 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:22:52,597 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:22:55,961 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:22:55,964 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:22:55,972 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:22:55,975 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:22:56,592 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 19:22:56,627 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_eoRbXigeZWEZ
2025-05-14 19:22:56,628 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 19:22:56,628 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_eoRbXigeZWEZ.
2025-05-14 19:22:56,721 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:22:56,723 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:22:56,924 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_T2Kxe9BJZBis
2025-05-14 19:22:56,925 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 19:22:57,096 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 19:22:57,096 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 19:22:57,096 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 19:22:57,097 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 19:22:57,097 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 19:22:57,098 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 19:22:57,101 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 19:22:57,103 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 19:22:58,100 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 19:22:58,270 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 19:23:09,573 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:23:17,315 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:23:17,859 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:23:24,222 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:23:28,443 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:23:43,078 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:23:51,326 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:23:56,714 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:26:14,815 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-14 19:26:14,816 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-14 19:26:14,817 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-14 19:26:14,928 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-100' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-14 19:26:14,983 - asyncio - ERROR - [MainThread] - Task was destroyed but it is pending!
task: <Task pending name='Task-101' coro=<LifespanOn.main() running at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\lifespan\on.py:86> wait_for=<Future pending cb=[Task.__wakeup()]>>
2025-05-14 19:26:20,705 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:26:20,706 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:26:20,706 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:26:20,706 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:26:20,707 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:26:21,454 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:26:21,454 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:26:21,455 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:26:21,455 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:26:21,466 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:26:21,866 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:26:21,866 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:26:21,867 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:26:21,868 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:26:21,869 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:26:21,872 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:26:21,878 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:26:21,879 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:26:21,879 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:26:21,880 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:26:21,880 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:26:21,882 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:26:21,882 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:26:21,883 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:26:21,885 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:26:21,886 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:26:21,886 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:26:21,886 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:26:21,887 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:26:21,887 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:26:21,888 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:26:21,888 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:26:21,892 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:26:22,037 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:26:26,481 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:26:26,481 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:26:26,542 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:26:26,542 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:26:26,543 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:26:26,543 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:26:46,434 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:26:46,435 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:26:46,438 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:26:46,438 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:26:51,004 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:26:51,005 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:26:51,007 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:26:51,007 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:27:59,430 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:27:59,431 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:27:59,431 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:27:59,431 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:27:59,431 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:27:59,435 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-14 19:28:00,223 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:28:00,223 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:28:00,224 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:28:00,224 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:28:00,249 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:28:00,642 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:28:00,642 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:28:00,642 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:28:00,644 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:28:00,644 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:28:00,649 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:28:00,656 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:00,656 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:00,657 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:00,658 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:00,658 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:00,659 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:00,659 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:00,660 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:00,662 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:00,663 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:00,664 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:00,664 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:00,664 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:00,664 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:00,665 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:00,665 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:00,672 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:28:00,803 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:28:05,263 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:28:05,263 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:28:05,315 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:28:05,316 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:28:05,316 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:28:05,317 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:28:05,322 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:28:05,322 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:28:05,324 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:28:05,325 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:28:06,728 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 19:28:06,752 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_ZUXjE3xh67t7
2025-05-14 19:28:06,753 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 19:28:06,753 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_ZUXjE3xh67t7.
2025-05-14 19:28:06,842 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:28:06,842 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:28:08,210 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_spiPUUus9nve
2025-05-14 19:28:08,215 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 19:28:08,394 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 19:28:08,395 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 19:28:08,395 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 19:28:08,396 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 19:28:08,396 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 19:28:08,397 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 19:28:08,400 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 19:28:08,401 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 19:28:09,397 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 19:28:09,564 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 19:28:15,484 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:28:26,027 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:28:28,205 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:28:29,174 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:28:42,973 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:00,814 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:07,493 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:09,876 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:17,632 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:19,293 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:28,340 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:45,552 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:51,911 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:53,047 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:29:54,183 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:30:05,052 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:32:29,234 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:32:29,235 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:32:29,235 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:32:29,235 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:32:29,235 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:32:30,011 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:32:30,011 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:32:30,012 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:32:30,012 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:32:30,046 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:32:30,445 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:32:30,446 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:32:30,446 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:32:30,447 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:32:30,448 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:32:30,452 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:32:30,458 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:32:30,460 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:32:30,460 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:32:30,460 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:32:30,460 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:32:30,462 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:32:30,462 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:32:30,462 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:32:30,464 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:32:30,465 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:32:30,465 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:32:30,465 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:32:30,466 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:32:30,466 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:32:30,466 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:32:30,466 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:32:30,471 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:32:30,593 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:32:35,061 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:32:35,061 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:32:35,123 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:32:35,124 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:32:35,124 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:32:35,125 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:32:35,899 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:32:35,899 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:32:35,901 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:32:35,903 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:32:51,106 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:32:51,106 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:32:51,109 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:32:51,109 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:33:06,735 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:33:06,736 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:33:06,738 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:33:06,738 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:33:15,317 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-14 19:33:15,317 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-14 19:33:15,359 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-100' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 6 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-14 19:33:19,490 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:33:19,490 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:33:19,490 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:33:19,490 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:33:19,491 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:33:19,495 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-14 19:33:20,285 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:33:20,285 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:33:20,286 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:33:20,286 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:33:20,318 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:33:20,719 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:33:20,719 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:33:20,719 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:33:20,720 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:33:20,722 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:33:20,725 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:33:20,731 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:33:20,732 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:33:20,732 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:33:20,733 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:33:20,733 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:33:20,734 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:33:20,734 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:33:20,734 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:33:20,737 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:33:20,737 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:33:20,737 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:33:20,737 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:33:20,738 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:33:20,738 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:33:20,738 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:33:20,738 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:33:20,741 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:33:20,855 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:33:25,334 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:33:25,334 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:33:25,385 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:33:25,385 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:33:25,386 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:33:25,386 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:33:30,730 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:33:30,733 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:33:30,739 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:33:30,741 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:34:55,926 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:34:55,926 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:34:55,926 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:34:55,927 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:34:55,927 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:34:55,931 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-14 19:34:56,685 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:34:56,685 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:34:56,685 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:34:56,685 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:34:56,693 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:34:57,107 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:34:57,108 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:34:57,108 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:34:57,109 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:34:57,110 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:34:57,114 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:34:57,122 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:34:57,123 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:34:57,123 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:34:57,124 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:34:57,124 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:34:57,125 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:34:57,126 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:34:57,126 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:34:57,129 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:34:57,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:34:57,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:34:57,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:34:57,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:34:57,131 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:34:57,131 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:34:57,132 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:34:57,138 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:34:57,268 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:35:01,708 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:35:01,708 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:35:01,762 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:35:01,763 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:35:01,763 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:35:01,763 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:35:01,861 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:35:01,862 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:35:01,865 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:35:01,867 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:35:03,383 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 19:35:03,405 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_9HQBu5KXtJZp
2025-05-14 19:35:03,406 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 19:35:03,406 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_9HQBu5KXtJZp.
2025-05-14 19:35:03,476 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:35:03,477 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:35:03,679 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_thNCHkchqUsW
2025-05-14 19:35:03,679 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 19:35:03,847 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 19:35:03,848 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 19:35:03,849 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 19:35:03,849 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 19:35:03,849 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 19:35:03,850 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 19:35:03,854 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 19:35:03,858 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 19:35:04,849 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 19:35:05,468 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 19:35:08,661 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:35:11,509 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:35:26,926 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:35:48,423 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:38:34,495 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:38:34,495 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:38:34,495 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:38:34,495 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:38:34,495 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:38:35,220 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:38:35,220 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:38:35,221 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:38:35,221 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:38:35,261 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:38:35,632 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:38:35,633 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:38:35,633 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:38:35,635 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:38:35,635 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:38:35,639 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:38:35,647 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:38:35,647 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:38:35,648 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:38:35,649 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:38:35,650 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:38:35,651 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:38:35,651 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:38:35,652 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:38:35,654 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:38:35,655 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:38:35,655 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:38:35,655 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:38:35,655 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:38:35,656 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:38:35,656 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:38:35,656 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:38:35,658 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:38:35,793 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:38:40,277 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:38:40,277 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:38:40,344 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:38:40,344 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:38:40,345 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:38:40,345 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:38:40,457 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:38:40,459 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:38:40,467 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:38:40,471 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:39:40,037 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:39:40,037 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:39:40,037 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:39:40,038 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:39:40,038 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 19:39:40,798 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 19:39:40,799 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 19:39:40,799 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 19:39:40,799 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 19:39:40,810 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 19:39:41,216 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 19:39:41,216 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 19:39:41,216 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 19:39:41,219 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 19:39:41,220 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 19:39:41,224 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 19:39:41,229 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:41,229 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:41,230 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:41,230 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:41,231 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:41,231 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:41,232 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:41,232 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:41,235 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:41,235 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:41,236 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:41,236 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:41,236 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:41,237 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:41,237 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:41,237 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:41,243 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 19:39:41,342 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 19:39:45,842 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 19:39:45,842 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 19:39:45,895 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 19:39:45,896 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 19:39:45,896 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 19:39:45,896 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 19:39:45,979 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:39:45,980 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:39:45,982 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 19:39:45,983 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 19:39:47,420 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 19:39:47,440 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_DxfsYeFPgSSc
2025-05-14 19:39:47,441 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 19:39:47,442 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_DxfsYeFPgSSc.
2025-05-14 19:39:47,536 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 19:39:47,537 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 19:39:47,722 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_S4CvDafF4kzT
2025-05-14 19:39:47,723 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 19:39:47,893 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 19:39:47,894 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 19:39:47,894 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 19:39:47,894 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 19:39:47,895 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 19:39:47,895 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 19:39:47,899 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 19:39:47,900 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 19:39:48,895 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 19:39:54,549 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 19:39:58,425 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:40:12,048 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:40:13,747 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:40:25,212 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:46:49,751 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:58:50,923 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:58:57,678 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:59:08,026 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:59:08,949 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:59:13,344 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:59:20,425 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 19:59:29,595 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-14 20:03:15,724 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 20:03:15,725 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 20:03:15,725 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 20:03:15,725 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 20:03:15,725 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-14 20:03:16,445 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-14 20:03:16,446 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-14 20:03:16,446 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-14 20:03:16,446 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-14 20:03:16,457 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-14 20:03:16,884 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-14 20:03:16,884 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-14 20:03:16,884 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-14 20:03:16,886 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-14 20:03:16,887 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-14 20:03:16,890 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-14 20:03:16,895 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:16,896 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:16,896 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:16,897 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:16,898 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:16,898 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:16,899 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:16,899 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:16,902 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:16,902 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:16,902 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:16,903 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:16,903 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:16,903 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:16,903 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:16,904 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:16,909 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-14 20:03:17,076 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-14 20:03:21,476 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-14 20:03:21,477 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-14 20:03:21,543 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-14 20:03:21,544 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-14 20:03:21,544 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-14 20:03:21,544 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-14 20:03:21,783 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 20:03:21,783 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 20:03:21,785 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-14 20:03:21,785 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-14 20:03:22,570 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-14 20:03:22,596 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_RkGwkVeUvumP
2025-05-14 20:03:22,597 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-14 20:03:22,597 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_RkGwkVeUvumP.
2025-05-14 20:03:22,625 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-14 20:03:22,626 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-14 20:03:23,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_CdWLYWQtABCE
2025-05-14 20:03:23,051 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-14 20:03:23,234 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-14 20:03:23,234 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-14 20:03:23,234 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-14 20:03:23,234 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-14 20:03:23,236 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-14 20:03:23,236 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-14 20:03:23,240 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-14 20:03:23,242 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-14 20:03:24,225 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-14 20:03:29,024 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-14 20:03:37,707 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:03:38,566 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:03:46,721 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:03:50,107 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:04:18,281 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:04:34,429 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:04:36,055 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:04:37,229 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:04:58,273 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:05:21,008 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:05:27,384 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:05:42,663 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:05:56,563 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:06:05,194 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:06:19,213 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:06:27,993 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:06:35,785 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-14 20:07:47,489 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:02:43,750 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:02:43,751 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:02:43,751 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:02:43,751 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:02:43,752 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 12:02:44,228 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 12:02:44,229 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 12:02:44,230 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 12:02:44,230 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 12:02:44,282 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 12:02:44,500 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 12:02:44,500 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 12:02:44,500 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 12:02:44,502 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 12:02:44,503 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 12:02:44,507 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 12:02:44,512 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:44,513 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:44,514 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:44,515 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:44,515 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:44,515 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:44,516 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:44,516 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:44,519 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:44,519 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:44,519 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:44,520 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:44,520 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:44,520 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:44,520 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:44,521 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:44,527 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 12:02:44,686 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 12:02:49,314 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 12:02:49,314 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 12:02:49,418 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:02:49,419 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:02:49,419 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:02:49,419 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:02:50,909 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:02:50,909 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:02:50,911 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:02:50,912 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:02:51,495 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 12:02:51,524 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_eyxctDFSjGD5
2025-05-15 12:02:51,525 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-15 12:02:51,526 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_eyxctDFSjGD5.
2025-05-15 12:02:51,606 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:02:51,607 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:02:52,887 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_3uvZ3p8TGDuC
2025-05-15 12:02:52,888 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 12:02:53,153 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-15 12:02:53,154 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-15 12:02:53,154 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-15 12:02:53,155 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 12:02:53,155 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-15 12:02:53,156 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-15 12:02:53,159 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 12:02:54,158 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-15 12:03:22,686 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 12:03:24,962 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-15 12:03:25,785 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:03:39,507 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:04:05,973 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:04:07,255 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:04:07,836 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:04:49,963 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:04:50,634 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:04:51,776 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:04:54,647 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:05:11,327 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:05:11,898 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:06:03,040 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:06:11,085 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:06:25,113 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:06:27,316 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:06:40,404 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:06:45,358 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:06:45,569 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:06:49,137 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:07:09,795 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:07:20,698 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:14:19,933 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:14:35,594 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:14:38,038 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:14:43,020 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:14:43,261 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:14:46,038 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:15:09,661 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:16:02,626 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-15 12:16:02,800 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:17:15,637 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:17:15,637 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:17:15,637 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:17:15,637 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:17:15,638 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 12:17:16,163 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 12:17:16,163 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 12:17:16,164 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 12:17:16,164 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 12:17:16,215 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 12:17:16,446 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 12:17:16,446 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 12:17:16,446 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 12:17:16,449 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 12:17:16,449 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 12:17:16,453 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 12:17:16,459 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:16,459 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:16,460 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:16,461 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:16,461 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:16,462 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:16,462 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:16,462 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:16,465 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:16,465 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:16,465 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:16,465 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:16,466 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:16,466 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:16,466 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:16,466 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:16,469 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 12:17:16,612 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 12:17:21,232 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 12:17:21,233 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 12:17:21,295 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:17:21,296 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:17:21,296 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:17:21,297 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:17:22,584 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:17:22,587 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:17:22,594 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:17:22,596 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:17:54,055 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:17:54,055 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:17:54,059 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:17:54,060 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:17:54,795 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 12:17:54,817 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_XYfSTpaDqrJG
2025-05-15 12:17:54,818 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Running main.py with turn_detection=None workaround.
2025-05-15 12:17:54,818 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Ensuring connection and setting subscriptions for job AJ_XYfSTpaDqrJG.
2025-05-15 12:17:54,893 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:17:54,894 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:17:55,205 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected/Verified. Participant SID: PA_jxFhyJdRafbn
2025-05-15 12:17:55,206 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 12:17:55,381 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized (turn detection explicitly disabled).
2025-05-15 12:17:55,381 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT and VAD event listeners attached.
2025-05-15 12:17:55,382 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with turn_detection=None.
2025-05-15 12:17:55,383 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 12:17:55,383 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-15 12:17:55,384 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-15 12:17:55,387 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 12:17:55,388 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 12:17:56,377 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial reply (agent self-initiated): 'Hello! I'm your voice assistant, ready to chat. How can I help you today?'
2025-05-15 12:17:57,176 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initial reply generation requested.
2025-05-15 12:17:58,038 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:18:09,556 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:18:19,194 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:18:31,756 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:18:36,620 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:19:04,575 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:19:25,558 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:19:41,983 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:31:39,756 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:31:39,757 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:31:39,757 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:31:39,757 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:31:39,757 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 12:31:40,260 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 12:31:40,260 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 12:31:40,261 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 12:31:40,261 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 12:31:40,295 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 12:31:40,536 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 12:31:40,537 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 12:31:40,537 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 12:31:40,538 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 12:31:40,539 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 12:31:40,543 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 12:31:40,549 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:40,550 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:40,550 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:40,550 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:40,551 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:40,551 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:40,552 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:40,552 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:40,555 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:40,555 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:40,555 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:40,555 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:40,556 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:40,556 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:40,556 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:40,556 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:40,559 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 12:31:40,699 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 12:31:45,324 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 12:31:45,325 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 12:31:45,390 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:31:45,391 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:31:45,392 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:31:45,392 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:31:50,423 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:31:50,424 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:31:50,432 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:31:50,435 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:31:50,920 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 12:31:50,940 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_Qz64xUm2exvE
2025-05-15 12:31:50,940 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Attempting to connect for job AJ_Qz64xUm2exvE.
2025-05-15 12:31:50,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:31:50,980 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:31:51,327 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_pHbi2BuQCXjr
2025-05-15 12:31:51,328 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 12:31:51,500 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 12:31:51,500 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 12:31:51,500 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 12:31:51,500 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 12:31:51,502 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with the assistant_agent_instance...
2025-05-15 12:31:51,502 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-15 12:31:51,505 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 12:31:51,507 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 12:31:53,003 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Requesting initial greeting via session.generate_reply with prompt: 'Introduce yourself briefly as a polite and helpful voice assistant.'
2025-05-15 12:31:53,004 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Error calling session.generate_reply() for initial greeting: AgentSession.generate_reply() got an unexpected keyword argument 'prompt'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 948, in entrypoint
    await session.generate_reply(prompt=initial_greeting_prompt)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AgentSession.generate_reply() got an unexpected keyword argument 'prompt'
2025-05-15 12:31:53,007 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic is running. Waiting for AgentSession task to complete (e.g., on disconnect or error).
2025-05-15 12:31:53,007 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_Qz64xUm2exvE.
2025-05-15 12:31:58,304 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:31:58,764 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:32:13,563 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:32:26,365 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:32:36,712 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:34:22,368 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:37:06,773 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:38:31,756 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:38:31,756 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:38:31,756 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:38:31,756 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:38:31,756 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 12:38:32,276 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 12:38:32,277 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 12:38:32,277 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 12:38:32,277 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 12:38:32,322 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 12:38:32,562 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 12:38:32,562 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 12:38:32,562 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 12:38:32,564 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 12:38:32,564 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 12:38:32,569 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 12:38:32,575 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:32,575 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:32,576 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:32,577 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:32,577 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:32,578 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:32,578 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:32,579 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:32,581 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:32,581 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:32,581 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:32,582 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:32,582 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:32,582 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:32,583 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:32,583 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:32,587 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 12:38:32,730 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 12:38:37,339 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 12:38:37,340 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 12:38:37,392 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:38:37,393 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:38:37,393 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:38:37,393 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:38:38,863 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:38:38,863 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:38:38,865 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:38:38,866 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:38:39,612 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 12:38:39,634 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_kYJ8axdV3bt6
2025-05-15 12:38:39,635 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Attempting to connect for job AJ_kYJ8axdV3bt6.
2025-05-15 12:38:39,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:38:39,732 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:38:40,360 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_cbHo4JvAciXB
2025-05-15 12:38:40,361 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 12:38:40,525 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 12:38:40,525 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 12:38:40,526 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 12:38:40,526 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 12:38:40,526 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with the assistant_agent_instance...
2025-05-15 12:38:40,527 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-15 12:38:40,531 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 12:38:40,532 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 12:38:42,020 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Requesting initial greeting via session.generate_reply with instruction: 'Introduce yourself briefly as a polite and helpful voice assistant.'
2025-05-15 12:38:45,727 - __main__ - INFO - [job_thread_runner] - [AgentEntry] session.generate_reply() for initial greeting CALLED.
2025-05-15 12:38:45,728 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic is running. Waiting for AgentSession task to complete.
2025-05-15 12:38:45,729 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_kYJ8axdV3bt6.
2025-05-15 12:38:45,962 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:38:54,041 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:39:21,164 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:40:53,536 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:41:32,117 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:44:26,105 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:44:37,688 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:45:13,184 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:45:17,746 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:45:24,539 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:45:35,280 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:45:51,345 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:46:07,092 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:47:51,504 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:51:27,774 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:51:27,774 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:51:27,774 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:51:27,774 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:51:27,775 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 12:51:28,284 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 12:51:28,284 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 12:51:28,284 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 12:51:28,285 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 12:51:28,303 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 12:51:28,557 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 12:51:28,557 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 12:51:28,558 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 12:51:28,560 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 12:51:28,560 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 12:51:28,564 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 12:51:28,570 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:28,570 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:28,571 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:28,571 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:28,572 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:28,572 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:28,572 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:28,573 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:28,576 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:28,576 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:28,576 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:28,576 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:28,577 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:28,577 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:28,577 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:28,577 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:28,582 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 12:51:28,718 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 12:51:33,319 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 12:51:33,319 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 12:51:33,380 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:51:33,380 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:51:33,380 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:51:33,381 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:51:33,682 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:51:33,684 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:51:33,693 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:51:33,695 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:51:34,135 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 12:51:34,157 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_rf2iG7J593Dn
2025-05-15 12:51:34,241 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:51:34,243 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:51:34,463 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_hvdbJRRqH42N
2025-05-15 12:51:34,464 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 12:51:34,639 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 12:51:34,640 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT 'speech_event' listener attached.
2025-05-15 12:51:34,640 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 12:51:34,641 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 12:51:34,641 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 12:51:34,642 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with the assistant_agent_instance...
2025-05-15 12:51:34,642 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-15 12:51:34,646 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 12:51:34,648 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 12:51:36,151 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial greeting using agent's LLM directly: 'Introduce yourself briefly as a polite and helpful voice assistant.'
2025-05-15 12:51:36,151 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] assistant_agent_instance.llm not available for initial greeting after session start.
2025-05-15 12:51:36,152 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic is running. Waiting for AgentSession task to complete.
2025-05-15 12:51:36,152 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_rf2iG7J593Dn.
2025-05-15 12:51:36,295 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:51:43,506 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:51:55,475 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:52:04,840 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:52:12,030 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:52:27,235 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:52:30,138 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-15 12:53:21,913 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:53:21,913 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:53:21,913 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:53:21,914 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:53:21,914 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 12:53:22,420 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 12:53:22,421 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 12:53:22,421 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 12:53:22,422 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 12:53:22,454 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 12:53:22,703 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 12:53:22,703 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 12:53:22,703 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 12:53:22,705 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 12:53:22,706 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 12:53:22,709 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 12:53:22,716 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:22,717 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:22,717 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:22,718 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:22,718 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:22,718 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:22,719 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:22,719 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:22,722 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:22,722 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:22,722 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:22,722 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:22,723 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:22,723 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:22,723 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:22,723 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:22,727 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 12:53:22,859 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 12:53:27,472 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 12:53:27,472 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 12:53:27,529 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 12:53:27,530 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 12:53:27,530 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 12:53:27,530 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 12:53:28,482 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:53:28,484 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:53:28,488 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 12:53:28,488 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 12:53:28,923 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 12:53:28,951 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_sa3dPgGsJXcf
2025-05-15 12:53:28,978 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 12:53:28,979 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 12:53:29,399 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_FV5m2fxfZUcc
2025-05-15 12:53:29,399 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 12:53:29,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 12:53:29,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] STT 'speech_event' listener attached.
2025-05-15 12:53:29,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 12:53:29,567 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 12:53:29,568 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 12:53:29,568 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with the assistant_agent_instance...
2025-05-15 12:53:29,568 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created.
2025-05-15 12:53:29,572 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 12:53:29,574 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 12:53:31,066 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Generating initial greeting using agent's LLM directly: 'Introduce yourself briefly as a polite and helpful voice assistant.'
2025-05-15 12:53:31,067 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] assistant_agent_instance.llm not available for initial greeting after session start.
2025-05-15 12:53:31,067 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic is running. Waiting for AgentSession task to complete.
2025-05-15 12:53:31,068 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_sa3dPgGsJXcf.
2025-05-15 12:53:39,613 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:53:47,363 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:53:57,302 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:53:59,435 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:54:34,855 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 12:54:36,891 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:00:20,169 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:00:20,170 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:00:20,170 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:00:20,170 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:00:20,170 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:00:20,689 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:00:20,690 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:00:20,690 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:00:20,690 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:00:20,738 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:00:20,973 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:00:20,974 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:00:20,974 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:00:20,975 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:00:20,976 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:00:20,980 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:00:20,985 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:20,985 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:20,986 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:20,986 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:20,987 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:20,987 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:20,987 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:20,988 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:20,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:20,992 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:20,992 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:20,992 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:20,992 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:20,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:20,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:20,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:20,998 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:00:21,160 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:00:25,755 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:00:25,755 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:00:25,811 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:00:25,811 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:00:25,812 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:00:25,812 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:00:25,849 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:00:25,850 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:00:25,852 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:00:25,853 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:00:26,253 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:00:26,281 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job ID: AJ_4LxxhU7vHMRf
2025-05-15 13:00:26,281 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Attempting to connect for job AJ_4LxxhU7vHMRf.
2025-05-15 13:00:26,380 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:00:26,381 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:00:26,585 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_r78eL3RxD8d6
2025-05-15 13:00:26,586 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:00:26,750 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 13:00:26,751 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 13:00:26,751 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 13:00:26,752 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 13:00:26,752 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with the assistant_agent_instance...
2025-05-15 13:00:26,752 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called and task created. The session will now manage the agent.
2025-05-15 13:00:26,753 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession should use agent's initial instructions for a greeting if configured to do so.
2025-05-15 13:00:26,753 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic is running. Waiting for AgentSession task to complete.
2025-05-15 13:00:26,756 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 13:00:26,758 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_4LxxhU7vHMRf.
2025-05-15 13:00:26,759 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 13:00:34,327 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:00:46,011 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:00:47,746 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:00:50,021 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:02,105 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:08,683 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:23,872 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:28,758 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:34,289 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:35,242 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:44,468 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:45,076 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:01:53,985 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:02:05,381 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:02:08,175 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:02:14,917 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:02:28,358 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:06:06,484 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:06:21,608 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:06:51,074 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:08:18,852 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:08:18,853 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:08:18,853 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:08:18,853 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:08:18,854 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:08:19,380 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:08:19,380 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:08:19,381 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:08:19,381 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:08:19,410 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:08:19,678 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:08:19,678 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:08:19,679 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:08:19,680 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:08:19,681 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:08:19,685 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:08:19,690 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:19,691 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:19,691 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:19,692 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:19,693 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:19,693 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:19,694 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:19,695 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:19,697 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:19,698 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:19,698 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:19,698 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:19,699 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:19,699 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:19,699 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:19,699 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:19,702 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:08:19,829 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:08:24,427 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:08:24,427 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:08:24,497 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:08:24,497 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:08:24,498 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:08:24,498 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:08:25,080 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:08:25,082 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:08:25,090 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:08:25,093 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:08:25,703 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:08:25,725 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (Simpler Version) --- Room: voice-assistant-room, Job: AJ_NM8ZDSzJbxzZ
2025-05-15 13:08:25,833 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:08:25,833 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:08:26,025 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_mfwzoZwG75C7
2025-05-15 13:08:26,026 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:08:26,027 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Error initializing plugins: STT.__init__() got an unexpected keyword argument 'endpointing'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 842, in entrypoint
    stt = deepgram.STT(model="nova-2", language="multi", interim_results=False, endpointing=400) # Added some common STT params
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'endpointing'
2025-05-15 13:08:26,028 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 842, in entrypoint
    stt = deepgram.STT(model="nova-2", language="multi", interim_results=False, endpointing=400) # Added some common STT params
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'endpointing'
2025-05-15 13:13:59,715 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:13:59,715 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:13:59,715 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:13:59,715 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:13:59,715 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:14:00,219 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:14:00,219 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:14:00,220 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:14:00,220 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:14:00,231 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:14:00,500 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:14:00,500 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:14:00,500 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:14:00,502 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:14:00,502 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:14:00,506 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:14:00,514 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:00,514 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:00,515 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:00,516 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:00,516 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:00,517 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:00,517 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:00,519 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:00,522 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:00,522 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:00,523 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:00,523 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:00,523 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:00,523 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:00,524 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:00,524 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:00,530 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:14:00,643 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:14:05,245 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:14:05,246 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:14:05,327 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:14:05,327 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:14:05,328 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:14:05,328 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:14:15,731 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:14:15,733 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:14:15,741 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:14:15,743 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:14:16,326 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:14:16,347 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (Simpler Version) --- Room: voice-assistant-room, Job: AJ_tauFVkz5PD4R
2025-05-15 13:14:16,429 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:14:16,429 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:14:16,861 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_qdeD59MrnpRy
2025-05-15 13:14:16,862 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:14:17,031 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 13:14:17,032 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created (using default turn detection).
2025-05-15 13:14:17,032 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 13:14:17,032 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 13:14:17,033 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with the assistant_agent_instance...
2025-05-15 13:14:17,034 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session should now manage conversation flow.
2025-05-15 13:14:17,034 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession should use agent's initial instructions for a greeting if configured to do so.
2025-05-15 13:14:17,034 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic is running. Waiting for AgentSession task to complete.
2025-05-15 13:14:17,038 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 13:14:17,039 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_tauFVkz5PD4R.
2025-05-15 13:14:17,040 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 13:14:25,518 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:14:36,035 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:14:45,917 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:15:08,137 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:20:00,343 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:20:00,344 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:20:00,344 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:20:00,344 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:20:00,344 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:20:00,839 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:20:00,839 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:20:00,840 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:20:00,840 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:20:00,871 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:20:01,112 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:20:01,113 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:20:01,113 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:20:01,114 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:20:01,115 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:20:01,118 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:20:01,123 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:01,124 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:01,124 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:01,124 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:01,125 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:01,125 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:01,126 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:01,126 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:01,129 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:01,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:01,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:01,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:01,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:01,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:01,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:01,130 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:01,133 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:20:01,269 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:20:05,904 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:20:05,904 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:20:05,965 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:20:05,965 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:20:05,966 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:20:05,966 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:20:06,530 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:20:06,532 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:20:06,541 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:20:06,544 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:20:06,972 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:20:06,997 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (Diagnosis Version) --- Room: voice-assistant-room, Job: AJ_BLHmcGu88VqB
2025-05-15 13:20:07,090 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:20:07,093 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:20:07,241 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_HwEjZHZD8PKC
2025-05-15 13:20:07,242 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:20:07,406 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 13:20:07,407 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 13:20:07,407 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED: LLM.chat() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 857, in entrypoint
    async for chunk in await llm_plugin.chat(messages=[{'role':'user', 'content':'Hello, LLM test.'}]):
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() got an unexpected keyword argument 'messages'
2025-05-15 13:20:07,408 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 13:20:07,409 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 13:20:07,409 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Using base livekit.agents.Agent for diagnosis ---
2025-05-15 13:20:07,410 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Base 'agents.Agent' instance created with instructions: 'You are a basic echo assistant. Say 'User said:' and then repeat the user's words.'
2025-05-15 13:20:07,410 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with the base agent instance...
2025-05-15 13:20:07,410 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called.
2025-05-15 13:20:07,411 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic is running. Waiting for AgentSession task to complete.
2025-05-15 13:20:07,414 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 13:20:07,415 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_BLHmcGu88VqB.
2025-05-15 13:20:07,422 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 13:20:12,331 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:20:21,124 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:20:31,457 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:20:43,429 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:21:03,954 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:21:14,117 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:29:29,380 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:29:29,380 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:29:29,380 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:29:29,380 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:29:29,381 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:29:29,866 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:29:29,866 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:29:29,867 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:29:29,867 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:29:29,893 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:29:30,135 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:29:30,135 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:29:30,136 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:29:30,138 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:29:30,138 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:29:30,142 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:29:30,148 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:30,148 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:30,148 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:30,149 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:30,149 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:30,150 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:30,150 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:30,151 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:30,153 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:30,154 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:30,154 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:30,155 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:30,155 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:30,155 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:30,155 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:30,156 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:30,159 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:29:30,304 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:29:34,922 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:29:34,923 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:29:35,005 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:29:35,005 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:29:35,006 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:29:35,006 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:29:36,445 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:29:36,448 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:29:36,455 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:29:36,457 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:29:37,090 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:29:37,113 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (LLM Test Version) --- Room: voice-assistant-room, Job: AJ_PtLED6FRqruZ
2025-05-15 13:29:37,178 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:29:37,178 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:29:37,389 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_2an9TiHSCtJg
2025-05-15 13:29:37,390 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:29:37,557 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 13:29:37,557 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 13:29:37,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with 'prompt=Briefly say hello and confirm you are working.'
2025-05-15 13:29:37,558 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM direct test with 'prompt=' FAILED (TypeError). Trying positional argument.
2025-05-15 13:29:37,559 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED (positional): LLM.chat() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 918, in entrypoint
    async for chunk in await llm_plugin.chat(prompt=test_prompt_for_llm):
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() got an unexpected keyword argument 'prompt'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 927, in entrypoint
    async for chunk in await llm_plugin.chat(test_prompt_for_llm): # Try positional
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() takes 1 positional argument but 2 were given
2025-05-15 13:29:37,561 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. The agent will likely not function correctly. Please check LLM plugin and API key. !!!
2025-05-15 13:29:37,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 13:29:37,562 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 13:29:37,562 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 13:29:37,562 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created (instead of base agents.Agent).
2025-05-15 13:29:37,563 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 13:29:37,563 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called.
2025-05-15 13:29:37,564 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession should use agent's initial instructions to generate a greeting.
2025-05-15 13:29:37,564 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete (or for job to end).
2025-05-15 13:29:37,567 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 13:29:37,569 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_PtLED6FRqruZ.
2025-05-15 13:29:37,569 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 13:29:41,059 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:29:56,883 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:30:21,108 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:30:39,537 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:30:55,342 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:30:57,832 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:31:00,917 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:32:41,735 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-15 13:32:41,736 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-15 13:32:41,737 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-15 13:32:41,756 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-15 13:37:18,189 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:37:18,189 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:37:18,189 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:37:18,190 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:37:18,190 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:37:18,712 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:37:18,712 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:37:18,712 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:37:18,713 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:37:18,722 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:37:18,999 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:37:19,000 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:37:19,000 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:37:19,001 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:37:19,002 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:37:19,006 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:37:19,014 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:19,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:19,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:19,037 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:19,048 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:19,049 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:19,049 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:19,050 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:19,054 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:19,054 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:19,055 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:19,055 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:19,055 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:19,056 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:19,056 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:19,059 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:19,062 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:37:19,173 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:37:23,751 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:37:23,751 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:37:23,818 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:37:23,818 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:37:23,819 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:37:23,819 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:37:24,259 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:37:24,261 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:37:24,266 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:37:24,267 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:37:25,005 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:37:25,029 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (LLM ChatMessage Test) --- Room: voice-assistant-room, Job: AJ_PDra7gxpAXws
2025-05-15 13:37:25,070 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:37:25,072 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:37:25,815 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_4n42wnvv36T3
2025-05-15 13:37:25,816 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:37:25,991 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Plugins initialized successfully.
2025-05-15 13:37:25,991 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 13:37:25,992 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED (other error with 'messages=' attempt): USER
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 927, in entrypoint
    livekit_llm.ChatMessage(role=livekit_llm.ChatRole.USER, content="Hello, LLM test. Respond with OK.")
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\typing.py", line 1274, in __getattr__
    return getattr(self.__origin__, attr)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\typing.py", line 435, in __getattr__
    raise AttributeError(item)
AttributeError: USER
2025-05-15 13:37:26,011 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! ALL LLM direct test attempts FAILED. The agent will not function correctly. Please check LLM plugin calling signature and API key. !!!
2025-05-15 13:37:26,011 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 13:37:26,011 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 13:37:26,012 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 13:37:26,012 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 13:37:26,012 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 13:37:26,013 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called.
2025-05-15 13:37:26,013 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession should use agent's initial instructions for a greeting.
2025-05-15 13:37:26,013 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 13:37:26,018 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 13:37:26,019 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_PDra7gxpAXws.
2025-05-15 13:37:26,020 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 13:37:32,365 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:37:44,192 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:40:55,256 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:43:07,479 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:43:07,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:43:07,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:43:07,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:43:07,481 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:43:07,990 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:43:07,991 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:43:07,991 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:43:07,991 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:43:08,013 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:43:08,273 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:43:08,273 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:43:08,273 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:43:08,274 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:43:08,275 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:43:08,279 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:43:08,285 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:08,285 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:08,286 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:08,287 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:08,287 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:08,288 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:08,288 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:08,288 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:08,291 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:08,291 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:08,291 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:08,291 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:08,292 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:08,292 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:08,293 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:08,294 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:08,298 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:43:08,431 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:43:13,045 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:43:13,045 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:43:13,097 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:43:13,098 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:43:13,098 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:43:13,098 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:43:13,123 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:43:13,124 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:43:13,127 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:43:13,128 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:43:14,505 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:43:14,529 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (LLM Init & Chat Test) --- Room: voice-assistant-room, Job: AJ_sM3zN4EXbKtg
2025-05-15 13:43:14,557 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:43:14,561 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:43:14,820 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_MoWQbmXXC4Uw
2025-05-15 13:43:14,823 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:43:14,823 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Attempting to initialize OpenAI LLM plugin with API key.
2025-05-15 13:43:14,856 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized: <livekit.plugins.openai.llm.LLM object at 0x0000027DA1FFFE10>
2025-05-15 13:43:14,857 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Attempting to initialize OpenAI TTS plugin with API key.
2025-05-15 13:43:14,867 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized: <livekit.plugins.openai.tts.TTS object at 0x0000027DA2003010>
2025-05-15 13:43:14,989 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins (STT, LLM, TTS, VAD) initialized successfully.
2025-05-15 13:43:14,990 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 13:43:14,990 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED (other error with 'messages=' attempt): USER
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 943, in entrypoint
    livekit_llm.ChatMessage(role=livekit_llm.ChatRole.USER, content=test_prompt_for_llm)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\typing.py", line 1274, in __getattr__
    return getattr(self.__origin__, attr)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\typing.py", line 435, in __getattr__
    raise AttributeError(item)
AttributeError: USER
2025-05-15 13:43:14,993 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! ALL LLM direct test attempts FAILED. The agent will not function correctly. Please check LLM plugin, API key, and calling signature. !!!
2025-05-15 13:43:14,994 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 13:43:14,994 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 13:43:14,995 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 13:43:14,995 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 13:43:14,995 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 13:43:14,996 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called.
2025-05-15 13:43:14,996 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession should use agent's initial instructions for a greeting.
2025-05-15 13:43:14,996 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete (or for job to end).
2025-05-15 13:43:15,000 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 13:43:15,002 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_sM3zN4EXbKtg.
2025-05-15 13:43:15,002 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 13:43:25,625 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:43:36,702 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:43:53,289 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:50:59,866 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:50:59,866 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:50:59,867 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:50:59,867 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:50:59,867 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:51:00,390 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:51:00,390 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:51:00,391 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:51:00,392 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:51:00,405 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:51:00,698 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:51:00,699 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:51:00,699 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:51:00,700 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:51:00,701 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:51:00,705 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:51:00,711 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:00,711 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:00,712 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:00,713 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:00,714 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:00,714 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:00,715 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:00,716 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:00,719 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:00,719 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:00,719 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:00,719 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:00,719 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:00,719 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:00,720 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:00,720 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:00,721 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:51:00,883 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:51:05,454 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:51:05,454 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:51:05,517 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:51:05,518 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:51:05,518 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:51:05,519 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:51:05,815 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:51:05,816 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:51:05,820 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:51:05,821 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:51:06,237 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:51:06,267 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (LLM Signature Test v3) --- Room: voice-assistant-room, Job: AJ_pXfCzXGoW2Xf
2025-05-15 13:51:06,340 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:51:06,342 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:51:06,535 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_rkdqsH6dA7xM
2025-05-15 13:51:06,536 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:51:06,536 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Attempting to initialize OpenAI LLM plugin with API key.
2025-05-15 13:51:06,572 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized: <livekit.plugins.openai.llm.LLM object at 0x000001CEDD79D3D0>
2025-05-15 13:51:06,572 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Attempting to initialize OpenAI TTS plugin with API key.
2025-05-15 13:51:06,583 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized: <livekit.plugins.openai.tts.TTS object at 0x000001CEDD79F650>
2025-05-15 13:51:06,708 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins (STT, LLM, TTS, VAD) initialized successfully.
2025-05-15 13:51:06,709 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 13:51:06,709 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Debugging livekit_llm.ChatRole type: <class 'typing._LiteralGenericAlias'>
2025-05-15 13:51:06,710 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] livekit_llm.ChatRole does not appear to be a standard Enum with __members__.
2025-05-15 13:51:06,710 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] AttributeError accessing livekit_llm.ChatRole.USER: USER. ChatMessage creation with Enum will fail.
2025-05-15 13:51:06,710 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with 'messages=[ChatMessage(role=ChatRole.USER,...)]'
2025-05-15 13:51:06,710 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM direct test with 'messages=' and Enum Role FAILED (AttributeError on ChatRole: USER). Trying string role.
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 979, in entrypoint
    livekit_llm.ChatMessage(role=livekit_llm.ChatRole.USER, content=test_prompt_for_llm)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\typing.py", line 1274, in __getattr__
    return getattr(self.__origin__, attr)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\typing.py", line 435, in __getattr__
    raise AttributeError(item)
AttributeError: USER
2025-05-15 13:51:06,712 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with 'messages=[ChatMessage(role="user",...)]'
2025-05-15 13:51:06,714 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM direct test with 'messages=' and string role FAILED: 1 validation error for ChatMessage
content
  Input should be a valid list [type=list_type, input_value='Briefly say hello and confirm you are working.', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 991, in entrypoint
    test_messages_str_role = [livekit_llm.ChatMessage(role="user", content=test_prompt_for_llm)]
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for ChatMessage
content
  Input should be a valid list [type=list_type, input_value='Briefly say hello and confirm you are working.', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
2025-05-15 13:51:06,741 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! ALL LLM direct test attempts FAILED. Agent will likely not function correctly. !!!
2025-05-15 13:51:06,742 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 13:51:06,742 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 13:51:06,743 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 13:51:06,743 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 13:51:06,743 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 13:51:06,743 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called.
2025-05-15 13:51:06,744 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession should use agent's initial instructions for a greeting.
2025-05-15 13:51:06,744 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete (or for job to end).
2025-05-15 13:51:06,747 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 13:51:06,747 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished or terminated for job AJ_pXfCzXGoW2Xf.
2025-05-15 13:51:06,749 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 13:51:14,027 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:51:22,525 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:51:23,260 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:51:50,968 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:51:58,909 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:51:59,725 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 13:58:23,132 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:58:23,132 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:58:23,132 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:58:23,133 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:58:23,133 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 13:58:23,666 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 13:58:23,666 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 13:58:23,667 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 13:58:23,667 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 13:58:23,700 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 13:58:23,960 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 13:58:23,961 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 13:58:23,961 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 13:58:23,962 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 13:58:23,963 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 13:58:23,968 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 13:58:23,975 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:23,976 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:23,976 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:23,977 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:23,977 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:23,978 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:23,978 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:23,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:23,981 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:23,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:23,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:23,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:23,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:23,983 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:23,983 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:23,984 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:23,989 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 13:58:24,118 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 13:58:28,716 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 13:58:28,717 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 13:58:28,788 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 13:58:28,788 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 13:58:28,788 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 13:58:28,789 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 13:58:29,058 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:58:29,058 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:58:29,061 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 13:58:29,062 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 13:58:29,664 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 13:58:29,686 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatMessage Content Test) --- Room: voice-assistant-room, Job: AJ_sdarA3LeK3bd
2025-05-15 13:58:29,742 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 13:58:29,743 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 13:58:30,053 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_kDBhW9wfTaWs
2025-05-15 13:58:30,054 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 13:58:30,240 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 13:58:30,240 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 13:58:30,240 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: TextContent class not found. Trying ChatMessage(content=[{{"type": "text", ...}}])
2025-05-15 13:58:30,242 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 918, in entrypoint
    ChatMessage(role="user", content=[{"type": "text", "text": test_prompt_text}])
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 5 validation errors for ChatMessage
content.0.ImageContent.type
  Input should be 'image_content' [type=literal_error, input_value='text', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/literal_error
content.0.ImageContent.image
  Field required [type=missing, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
content.0.AudioContent.type
  Input should be 'audio_content' [type=literal_error, input_value='text', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/literal_error
content.0.AudioContent.frame
  Field required [type=missing, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
content.0.str
  Input should be a valid string [type=string_type, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-05-15 14:01:01,727 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:01:01,727 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:01:01,727 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:01:01,728 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:01:01,728 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 14:01:02,258 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 14:01:02,258 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 14:01:02,258 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 14:01:02,259 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 14:01:02,296 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 14:01:02,529 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 14:01:02,530 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 14:01:02,530 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 14:01:02,531 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 14:01:02,532 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 14:01:02,535 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 14:01:02,540 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:01:02,541 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:01:02,541 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:01:02,542 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:01:02,542 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:01:02,543 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:01:02,543 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:01:02,544 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:01:02,546 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:01:02,546 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:01:02,546 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:01:02,547 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:01:02,547 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:01:02,548 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:01:02,548 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:01:02,548 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:01:02,552 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 14:01:02,681 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 14:01:07,329 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 14:01:07,330 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 14:01:07,402 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:01:07,402 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:01:07,403 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:01:07,403 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:01:14,583 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 14:01:14,584 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 14:01:14,591 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 14:01:14,592 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 14:02:12,201 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:02:12,201 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:02:12,202 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:02:12,202 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:02:12,202 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 14:02:12,206 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 14:02:12,723 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 14:02:12,723 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 14:02:12,724 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 14:02:12,724 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 14:02:12,739 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 14:02:13,000 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 14:02:13,001 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 14:02:13,001 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 14:02:13,002 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 14:02:13,003 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 14:02:13,006 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 14:02:13,012 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:13,013 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:13,013 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:13,014 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:13,014 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:13,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:13,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:13,016 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:13,018 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:13,018 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:13,018 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:13,019 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:13,019 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:13,019 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:13,019 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:13,020 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:13,023 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 14:02:13,151 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 14:02:17,757 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 14:02:17,759 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 14:02:17,812 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:02:17,813 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:02:17,813 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:02:17,813 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:02:17,892 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 14:02:17,893 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 14:02:17,896 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 14:02:17,896 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 14:02:18,305 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 14:02:18,326 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatMessage Dict Content Test) --- Room: voice-assistant-room, Job: AJ_yuQksHJmNsJ7
2025-05-15 14:02:18,421 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:02:18,423 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:02:18,777 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_GbNSkcmcfqWD
2025-05-15 14:02:18,778 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 14:02:18,972 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 14:02:18,973 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 14:02:18,973 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with ChatMessage(content=[{"type": "text", ...}])
2025-05-15 14:02:18,976 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED (other error with 'messages=' and dict content attempt): 5 validation errors for ChatMessage
content.0.ImageContent.type
  Input should be 'image_content' [type=literal_error, input_value='text', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/literal_error
content.0.ImageContent.image
  Field required [type=missing, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
content.0.AudioContent.type
  Input should be 'audio_content' [type=literal_error, input_value='text', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/literal_error
content.0.AudioContent.frame
  Field required [type=missing, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
content.0.str
  Input should be a valid string [type=string_type, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 907, in entrypoint
    ChatMessage(role="user", content=[{"type": "text", "text": test_prompt_text}])
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 5 validation errors for ChatMessage
content.0.ImageContent.type
  Input should be 'image_content' [type=literal_error, input_value='text', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/literal_error
content.0.ImageContent.image
  Field required [type=missing, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
content.0.AudioContent.type
  Input should be 'audio_content' [type=literal_error, input_value='text', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/literal_error
content.0.AudioContent.frame
  Field required [type=missing, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
content.0.str
  Input should be a valid string [type=string_type, input_value={'type': 'text', 'text': ... working by saying OK.'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
2025-05-15 14:02:18,979 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! ALL LLM direct test attempts FAILED. Agent won't function. !!!
2025-05-15 14:02:18,979 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 14:02:18,980 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 14:02:18,980 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 14:02:18,981 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 14:02:18,981 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 14:02:18,981 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 14:02:18,982 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 14:02:18,985 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 14:02:18,986 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_yuQksHJmNsJ7.
2025-05-15 14:02:18,986 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 14:02:23,074 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:02:39,925 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:02:53,966 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:02:56,444 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:13:17,975 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:33:02,572 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:33:04,207 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:34:37,710 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-15 14:34:59,112 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-15 14:34:59,116 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-15 14:34:59,117 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-15 14:34:59,118 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-15 14:39:28,665 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:39:28,666 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:39:28,666 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:39:28,666 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:39:28,666 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 14:39:29,187 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 14:39:29,187 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 14:39:29,188 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 14:39:29,188 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 14:39:29,221 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 14:39:29,478 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 14:39:29,479 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 14:39:29,479 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 14:39:29,480 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 14:39:29,481 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 14:39:29,486 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 14:39:29,491 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:29,491 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:29,492 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:29,493 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:29,493 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:29,494 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:29,494 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:29,495 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:29,497 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:29,498 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:29,498 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:29,498 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:29,499 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:29,499 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:29,499 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:29,500 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:29,506 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 14:39:29,664 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 14:39:34,251 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 14:39:34,252 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 14:39:34,311 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:39:34,311 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:39:34,312 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:39:34,312 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:39:36,119 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 14:39:36,120 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 14:39:36,128 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 14:39:36,129 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 14:39:36,572 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 14:39:36,602 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatMessage Simple Content Test) --- Room: voice-assistant-room, Job: AJ_eADEZRFnhEWL
2025-05-15 14:39:36,680 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:39:36,682 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:39:36,883 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_C8YZKbzMdqDS
2025-05-15 14:39:36,885 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 14:39:37,075 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 14:39:37,077 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 14:39:37,079 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with ChatMessage(content='Hello, LLM. Confirm you are working by saying OK.')
2025-05-15 14:39:37,080 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM direct test with ChatMessage(content=str) FAILED (ValidationError: 1 validation error for ChatMessage
content
  Input should be a valid list [type=list_type, input_value='Hello, LLM. Confirm you ...e working by saying OK.', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type). Trying content=[str].
2025-05-15 14:39:37,082 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with ChatMessage(content=['Hello, LLM. Confirm you are working by saying OK.'])
2025-05-15 14:39:37,083 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with ChatMessage(content=[str]) FAILED: LLM.chat() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 926, in entrypoint
    test_messages_for_llm = [ChatMessage(role="user", content=test_prompt_text)]
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for ChatMessage
content
  Input should be a valid list [type=list_type, input_value='Hello, LLM. Confirm you ...e working by saying OK.', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 938, in entrypoint
    async for chunk in await llm_plugin.chat(messages=test_messages_for_llm):
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() got an unexpected keyword argument 'messages'
2025-05-15 14:39:37,086 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! ALL LLM direct test attempts FAILED. Agent won't function. !!!
2025-05-15 14:39:37,086 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 14:39:37,086 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 14:39:37,087 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 14:39:37,087 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 14:39:37,087 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 14:39:37,088 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 14:39:37,088 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 14:39:37,091 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 14:39:37,092 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_eADEZRFnhEWL.
2025-05-15 14:39:37,093 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 14:39:56,461 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:41:14,240 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"ping timeout\"" UnknownReason Resume
2025-05-15 14:41:14,243 - livekit - ERROR - [Dummy-1] - livekit::rtc_engine:716:livekit::rtc_engine - resuming connection... attempt: 0
2025-05-15 14:41:19,074 - livekit - ERROR - [Dummy-2] - livekit::rtc_engine::rtc_session:735:livekit::rtc_engine::rtc_session - Subscriber pc state failed
2025-05-15 14:41:19,076 - livekit - WARNING - [Dummy-2] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2025-05-15 14:41:20,080 - livekit - ERROR - [Dummy-3] - livekit::rtc_engine::rtc_session:735:livekit::rtc_engine::rtc_session - Subscriber pc state failed
2025-05-15 14:41:20,081 - livekit - WARNING - [Dummy-3] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2025-05-15 14:41:21,394 - livekit.agents - WARNING - [LiveKitAgentWorker] - failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 669, in _connection_task
    await self._run_ws(ws)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 750, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 722, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
2025-05-15 14:41:21,511 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 14:41:22,688 - livekit.plugins.deepgram - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 547, in recv_task
    raise APIStatusError(message="deepgram connection closed unexpectedly")
livekit.agents._exceptions.APIStatusError: deepgram connection closed unexpectedly (status_code=-1, request_id=None, body=None)
2025-05-15 14:41:22,724 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 228, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 578, in _run
    task.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 547, in recv_task
    raise APIStatusError(message="deepgram connection closed unexpectedly")
livekit.agents._exceptions.APIStatusError: deepgram connection closed unexpectedly (status_code=-1, request_id=None, body=None)
2025-05-15 14:48:42,076 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:48:42,077 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:48:42,077 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:48:42,077 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:48:42,078 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 14:48:42,603 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 14:48:42,604 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 14:48:42,604 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 14:48:42,604 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 14:48:42,615 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 14:48:42,896 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 14:48:42,897 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 14:48:42,897 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 14:48:42,898 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 14:48:42,899 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 14:48:42,903 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 14:48:42,908 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:48:42,909 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:48:42,909 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:48:42,909 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:48:42,910 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:48:42,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:48:42,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:48:42,911 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:48:42,914 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:48:42,915 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:48:42,915 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:48:42,915 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:48:42,915 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:48:42,916 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:48:42,916 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:48:42,916 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:48:42,921 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 14:48:43,064 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 14:48:47,633 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 14:48:47,635 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 14:48:47,691 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:48:47,691 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:48:47,692 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:48:47,692 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:48:50,176 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 14:48:50,178 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 14:48:50,184 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 14:48:50,186 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 14:49:15,636 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 14:49:15,663 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatMessage content=[str] Test) --- Room: voice-assistant-room, Job: AJ_cu2ywZb63kb9
2025-05-15 14:49:15,743 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:49:15,743 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:49:16,041 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_LzX26Ky3CfLF
2025-05-15 14:49:16,042 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 14:49:16,225 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 14:49:16,226 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 14:49:16,226 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with ChatMessage(content=['Hello, LLM. Confirm you are working by saying OK.'])
2025-05-15 14:49:16,228 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM direct test with 'messages=' FAILED (TypeError: LLM.chat() got an unexpected keyword argument 'messages'). Trying 'prompt='.
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 907, in entrypoint
    async for chunk in await llm_plugin.chat(messages=test_messages_for_llm):
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() got an unexpected keyword argument 'messages'
2025-05-15 14:49:16,229 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with 'prompt=' fallback FAILED: LLM.chat() got an unexpected keyword argument 'prompt'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 907, in entrypoint
    async for chunk in await llm_plugin.chat(messages=test_messages_for_llm):
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() got an unexpected keyword argument 'messages'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 928, in entrypoint
    async for chunk in await llm_plugin.chat(prompt=test_prompt_text):
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() got an unexpected keyword argument 'prompt'
2025-05-15 14:49:16,230 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! ALL LLM direct test attempts FAILED. Agent won't function. !!!
2025-05-15 14:49:16,231 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 14:49:16,231 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 14:49:16,232 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 14:49:16,232 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 14:49:16,232 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 14:49:16,233 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 14:49:16,233 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 14:49:16,236 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 14:49:16,238 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_cu2ywZb63kb9.
2025-05-15 14:49:16,239 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 14:49:19,005 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:49:20,690 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:49:20,985 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:49:35,099 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:49:55,678 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:51:37,602 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:51:46,034 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:51:57,171 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:51:58,318 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:57:01,627 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 14:59:53,587 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:59:53,588 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:59:53,588 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:59:53,588 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 14:59:53,588 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 14:59:54,101 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 14:59:54,101 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 14:59:54,101 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 14:59:54,102 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 14:59:54,134 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 14:59:54,386 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 14:59:54,386 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 14:59:54,386 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 14:59:54,389 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 14:59:54,390 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 14:59:54,393 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 14:59:54,400 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:59:54,400 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:59:54,401 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:59:54,402 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:59:54,402 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:59:54,403 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:59:54,404 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:59:54,405 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 14:59:54,407 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:59:54,408 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:59:54,408 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:59:54,408 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:59:54,409 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:59:54,409 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:59:54,409 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:59:54,409 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 14:59:54,413 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 14:59:54,529 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 14:59:59,166 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 14:59:59,166 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 14:59:59,216 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 14:59:59,217 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 14:59:59,217 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 14:59:59,217 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:00:04,041 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:00:04,043 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:00:04,050 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:00:04,053 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:00:05,436 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 15:00:05,458 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (Rely on AgentSession for LLM calls) --- Room: voice-assistant-room, Job: AJ_vZj79BekPK7S
2025-05-15 15:00:05,532 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:00:05,533 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:00:05,790 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_TZcMMkq2gcTi
2025-05-15 15:00:05,790 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 15:00:05,954 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 15:00:05,954 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 15:00:05,954 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with await llm_plugin.chat()
2025-05-15 15:00:05,955 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin.chat() with no args FAILED (TypeError: LLM.chat() missing 1 required keyword-only argument: 'chat_ctx'). It likely needs arguments.
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 872, in entrypoint
    async for chunk in await llm_plugin.chat(): # NO ARGUMENTS
                             ^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() missing 1 required keyword-only argument: 'chat_ctx'
2025-05-15 15:00:05,956 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM direct test with chat() (no args) did not pass or threw error. The plugin might require explicit input context not provided in this simple test.
2025-05-15 15:00:05,956 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 15:00:05,957 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 15:00:05,957 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 15:00:05,958 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 15:00:05,958 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 15:00:05,959 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns based on agent's instructions and methods.
2025-05-15 15:00:05,959 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 15:00:05,962 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 15:00:05,964 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_vZj79BekPK7S.
2025-05-15 15:00:05,965 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 15:00:08,302 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:00:25,066 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:01:11,337 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:01:29,822 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:01:31,794 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:04:37,679 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:04:37,679 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:04:37,679 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:04:37,679 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:04:37,680 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 15:04:38,202 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 15:04:38,202 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 15:04:38,203 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 15:04:38,203 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 15:04:38,218 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 15:04:38,488 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 15:04:38,490 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 15:04:38,490 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 15:04:38,491 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 15:04:38,492 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 15:04:38,496 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 15:04:38,502 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:38,503 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:38,503 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:38,504 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:38,505 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:38,505 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:38,506 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:38,506 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:38,508 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:38,509 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:38,509 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:38,509 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:38,510 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:38,510 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:38,510 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:38,511 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:38,516 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 15:04:38,641 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 15:04:43,235 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 15:04:43,235 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 15:04:43,300 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:04:43,300 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:04:43,301 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:04:43,301 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:04:43,595 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:04:43,595 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:04:43,597 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:04:43,598 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:04:43,981 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 15:04:44,000 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Test) --- Room: voice-assistant-room, Job: AJ_9fipkpz8XRrd
2025-05-15 15:04:44,066 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:04:44,066 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:04:44,298 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_fRGnV9UvbYkQ
2025-05-15 15:04:44,298 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 15:04:44,468 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 15:04:44,468 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 15:04:44,468 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with chat_ctx=ChatContext(messages=[ChatMessage(role='user', content=['Hello, LLM. Confirm you are working by saying OK.'])])
2025-05-15 15:04:44,471 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM direct test with chat_ctx= FAILED (TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'). Signature mismatch.
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 902, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_messages_for_ctx)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-15 15:04:44,472 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent will not function correctly. Check signature. !!!
2025-05-15 15:04:44,473 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 15:04:44,473 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 15:04:44,473 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 15:04:44,474 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 15:04:44,474 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 15:04:44,474 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 15:04:44,475 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 15:04:44,478 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 15:04:44,479 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_9fipkpz8XRrd.
2025-05-15 15:04:44,480 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 15:04:46,353 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:04:49,397 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:05:03,077 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:05:24,126 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:05:30,148 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:05:35,473 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:09:18,608 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-15 15:10:29,313 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:10:29,314 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:10:29,314 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:10:29,314 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:10:29,314 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 15:10:29,848 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 15:10:29,848 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 15:10:29,848 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 15:10:29,848 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 15:10:29,882 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 15:10:30,140 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 15:10:30,141 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 15:10:30,141 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 15:10:30,142 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 15:10:30,143 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 15:10:30,147 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 15:10:30,153 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:30,154 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:30,154 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:30,155 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:30,155 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:30,156 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:30,156 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:30,157 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:30,159 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:30,159 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:30,159 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:30,159 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:30,160 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:30,160 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:30,160 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:30,160 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:30,164 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 15:10:30,305 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 15:10:34,899 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 15:10:34,900 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 15:10:34,971 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:10:34,972 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:10:34,972 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:10:34,973 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:10:35,099 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:10:35,100 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:10:35,102 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:10:35,103 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:10:35,528 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 15:10:35,554 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Positional Arg Test) --- Room: voice-assistant-room, Job: AJ_WUyvqgunnobP
2025-05-15 15:10:35,616 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:10:35,617 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:10:35,991 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_2PCY5i6bzzkW
2025-05-15 15:10:35,992 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 15:10:36,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 15:10:36,158 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 15:10:36,159 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with ChatContext(messages_list_positionally)
2025-05-15 15:10:36,160 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test trying with llm_plugin.chat(chat_ctx=...)
2025-05-15 15:10:36,161 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM direct test FAILED creating/using ChatContext (TypeError: object LLMStream can't be used in 'await' expression). Signature of ChatContext or llm.chat is still not right.
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 905, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_test):
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 15:10:36,162 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Fallback - trying llm_plugin.chat(chat_ctx=List[ChatMessage]) directly.
2025-05-15 15:10:36,163 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx=List[ChatMessage] FAILED: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 905, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_test):
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 917, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_messages_for_ctx): # Pass list directly as chat_ctx
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 15:10:36,164 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! ALL LLM direct test attempts FAILED. Agent won't function. !!!
2025-05-15 15:10:36,164 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 15:10:36,165 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 15:10:36,165 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 15:10:36,165 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 15:10:36,165 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 15:10:36,166 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 15:10:36,166 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 15:10:36,312 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 567, in _run
    messages=to_chat_ctx(self._chat_ctx, id(self._llm)),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\utils.py", line 120, in to_chat_ctx
    for item in chat_ctx.items:
                ^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'items'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 609, in _run
    raise APIConnectionError(retryable=retryable) from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 15:10:36,339 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 15:10:36,340 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_WUyvqgunnobP.
2025-05-15 15:10:36,348 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 15:10:38,318 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 567, in _run
    messages=to_chat_ctx(self._chat_ctx, id(self._llm)),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\utils.py", line 120, in to_chat_ctx
    for item in chat_ctx.items:
                ^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'items'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 609, in _run
    raise APIConnectionError(retryable=retryable) from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 15:10:38,889 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:10:39,345 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:10:40,321 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 567, in _run
    messages=to_chat_ctx(self._chat_ctx, id(self._llm)),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\utils.py", line 120, in to_chat_ctx
    for item in chat_ctx.items:
                ^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'items'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 609, in _run
    raise APIConnectionError(retryable=retryable) from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 15:10:42,316 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 567, in _run
    messages=to_chat_ctx(self._chat_ctx, id(self._llm)),
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\utils.py", line 120, in to_chat_ctx
    for item in chat_ctx.items:
                ^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'items'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 609, in _run
    raise APIConnectionError(retryable=retryable) from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 15:10:44,558 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-15 15:14:40,068 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:14:40,068 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:14:40,068 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:14:40,068 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:14:40,069 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 15:14:40,606 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 15:14:40,606 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 15:14:40,607 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 15:14:40,607 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 15:14:40,620 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 15:14:40,909 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 15:14:40,909 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 15:14:40,909 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 15:14:40,910 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 15:14:40,911 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 15:14:40,915 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 15:14:40,921 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:14:40,922 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:14:40,923 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:14:40,923 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:14:40,924 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:14:40,924 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:14:40,925 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:14:40,925 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:14:40,928 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:14:40,928 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:14:40,928 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:14:40,929 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:14:40,929 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:14:40,929 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:14:40,929 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:14:40,930 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:14:40,938 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 15:14:41,064 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 15:14:45,651 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 15:14:45,651 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 15:14:45,711 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:14:45,711 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:14:45,712 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:14:45,712 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:14:45,999 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:14:45,999 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:14:46,002 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:14:46,002 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:16:16,624 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:16:16,624 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:16:16,624 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:16:16,624 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:16:16,625 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 15:16:16,629 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 15:16:17,148 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 15:16:17,149 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 15:16:17,150 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 15:16:17,150 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 15:16:17,178 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 15:16:17,432 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 15:16:17,433 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 15:16:17,434 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 15:16:17,435 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 15:16:17,436 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 15:16:17,439 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 15:16:17,444 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:16:17,445 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:16:17,445 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:16:17,446 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:16:17,446 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:16:17,447 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:16:17,448 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:16:17,448 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:16:17,450 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:16:17,450 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:16:17,451 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:16:17,451 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:16:17,451 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:16:17,452 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:16:17,452 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:16:17,452 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:16:17,456 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 15:16:17,556 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 15:16:22,195 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 15:16:22,195 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 15:16:22,244 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:16:22,245 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:16:22,245 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:16:22,245 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:16:22,339 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:16:22,340 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:16:22,342 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:16:22,343 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:18:17,339 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:18:17,339 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:18:17,340 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:18:17,340 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:18:17,340 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 15:18:17,343 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 15:18:17,870 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 15:18:17,870 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 15:18:17,871 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 15:18:17,871 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 15:18:17,890 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 15:18:18,150 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 15:18:18,150 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 15:18:18,150 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 15:18:18,152 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 15:18:18,153 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 15:18:18,157 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 15:18:18,163 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:18,164 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:18,165 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:18,166 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:18,166 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:18,167 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:18,167 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:18,168 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:18,172 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:18,172 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:18,172 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:18,173 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:18,173 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:18,173 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:18,174 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:18,174 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:18,177 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 15:18:18,342 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 15:18:22,920 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 15:18:22,920 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 15:18:22,995 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:18:22,995 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:18:22,996 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:18:22,996 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:18:23,086 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:18:23,086 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:18:23,088 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:18:23,089 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:18:24,529 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 15:18:24,552 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_Jmx3nNZvmFGb
2025-05-15 15:18:24,667 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:18:24,668 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:18:24,867 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_7rPDRhuGo6pw
2025-05-15 15:18:24,868 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 15:18:25,030 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 15:18:25,030 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 15:18:25,031 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_319e83a3bf3b', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747302505.0310097)]
2025-05-15 15:18:25,032 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_message_list) [POSITIONAL for messages]
2025-05-15 15:18:25,032 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x000001BC913CD050>
2025-05-15 15:18:25,033 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_test)
2025-05-15 15:18:25,033 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx= FAILED: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 942, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_test):
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 15:18:25,035 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function. !!!
2025-05-15 15:18:25,035 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 15:18:25,035 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 15:18:25,036 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 15:18:25,036 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 15:18:25,037 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 15:18:25,037 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 15:18:25,037 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 15:18:25,185 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 15:18:25,186 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_Jmx3nNZvmFGb.
2025-05-15 15:18:25,187 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 15:18:30,145 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:18:41,484 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:25:07,329 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:39:30,371 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:39:41,870 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:42:11,014 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 15:51:49,128 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:51:49,128 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:51:49,128 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:51:49,128 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:51:49,128 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 15:51:49,664 - __main__ - DEBUG - [MainThread] - Port 8000 appears to be free or no process using it could be terminated by this script.
2025-05-15 15:51:49,664 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 15:51:49,664 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 15:51:49,664 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 15:51:49,679 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 15:51:49,980 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 appears to be free or no process using it could be terminated by this script.
2025-05-15 15:51:49,980 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 15:51:49,980 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 15:51:49,982 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 15:51:49,983 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 15:51:49,987 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:49,991 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:50,005 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 15:51:50,149 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 15:51:54,688 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 15:51:54,689 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 15:51:54,742 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:51:54,743 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:51:54,743 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:51:54,744 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:51:54,845 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:51:54,845 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:51:54,845 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:51:54,845 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:51:55,400 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 15:51:55,432 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Positional Arg Test v2) --- Room: voice-assistant-room, Job: AJ_jZbwsN3EutC6
2025-05-15 15:51:55,434 - livekit - INFO - [Dummy-1] - livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.23
2025-05-15 15:51:55,434 - livekit - INFO - [Dummy-1] - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.23
2025-05-15 15:51:55,437 - livekit - INFO - [Dummy-1] - livekit_api::signal_client::signal_stream:106:livekit_api::signal_client::signal_stream - connecting to wss://voice-assistant-ap2c6rap.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=1.0.7&access_token=...
2025-05-15 15:51:55,511 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:51:55,511 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:51:55,929 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_saBhq54oL6dM
2025-05-15 15:51:55,931 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 15:51:55,991 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] __init__ CALLED ---
2025-05-15 15:51:56,119 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 15:51:56,120 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 15:51:56,121 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_messages_for_ctx_test) [POSITIONAL for messages]
2025-05-15 15:51:56,121 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x0000018C585FB7D0>
2025-05-15 15:51:56,122 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_llm_test)
2025-05-15 15:51:56,122 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM direct test FAILED (TypeError: object LLMStream can't be used in 'await' expression). Problem with ChatContext init or llm.chat(chat_ctx=).
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1363, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_llm_test):
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 15:51:56,124 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-15 15:51:56,124 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 15:51:56,125 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 15:51:56,125 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 15:51:56,126 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 15:51:56,126 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 15:51:56,126 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns based on agent methods.
2025-05-15 15:51:56,127 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Expecting AgentSession to use agent's initial instructions for a greeting, triggering agent.handle_llm_response via LoggingTTSWrapper.
2025-05-15 15:51:56,127 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 15:51:56,288 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_jZbwsN3EutC6.
2025-05-15 15:51:59,719 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] synthesize CALLED ---
2025-05-15 15:51:59,720 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 445, in __anext__
    val = await self._event_aiter.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
StopAsyncIteration

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 146, in _inference_task
    async for audio_frame in tts_node:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 493, in tts_node
    async for ev in stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 448, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 105, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 90, in _synthesize
    async for audio in self._wrapped_tts.synthesize(ev.token):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1205, in synthesize
    async for sentence in text_iterator:
TypeError: 'async for' requires an object with __aiter__ method, got str
2025-05-15 15:52:22,418 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] synthesize CALLED ---
2025-05-15 15:52:22,418 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 445, in __anext__
    val = await self._event_aiter.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
StopAsyncIteration

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 146, in _inference_task
    async for audio_frame in tts_node:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 493, in tts_node
    async for ev in stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 448, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 105, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 90, in _synthesize
    async for audio in self._wrapped_tts.synthesize(ev.token):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1205, in synthesize
    async for sentence in text_iterator:
TypeError: 'async for' requires an object with __aiter__ method, got str
2025-05-15 15:53:36,077 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] synthesize CALLED ---
2025-05-15 15:53:36,078 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 445, in __anext__
    val = await self._event_aiter.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
StopAsyncIteration

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 146, in _inference_task
    async for audio_frame in tts_node:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 493, in tts_node
    async for ev in stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 448, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 105, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 90, in _synthesize
    async for audio in self._wrapped_tts.synthesize(ev.token):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1205, in synthesize
    async for sentence in text_iterator:
TypeError: 'async for' requires an object with __aiter__ method, got str
2025-05-15 15:57:31,358 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:57:31,358 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:57:31,358 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:57:31,358 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:57:31,358 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 15:57:31,908 - __main__ - DEBUG - [MainThread] - Port 8000 appears to be free or no process using it could be terminated by this script.
2025-05-15 15:57:31,909 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 15:57:31,910 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 15:57:31,910 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 15:57:31,930 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 15:57:32,185 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 appears to be free or no process using it could be terminated by this script.
2025-05-15 15:57:32,185 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 15:57:32,185 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 15:57:32,185 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 15:57:32,202 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 15:57:32,202 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:32,211 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:32,211 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 15:57:32,368 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 15:57:36,948 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 15:57:36,948 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 15:57:37,000 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 15:57:37,000 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 15:57:37,000 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 15:57:37,000 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 15:57:37,016 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:57:37,016 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:57:37,016 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 15:57:37,016 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 15:57:37,619 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 15:57:37,647 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (TTS Wrapper Focus) --- Room: voice-assistant-room, Job: AJ_NN7EJVdbTiZb
2025-05-15 15:57:37,648 - livekit - INFO - [Dummy-1] - livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.23
2025-05-15 15:57:37,649 - livekit - INFO - [Dummy-1] - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.23
2025-05-15 15:57:37,651 - livekit - INFO - [Dummy-1] - livekit_api::signal_client::signal_stream:106:livekit_api::signal_client::signal_stream - connecting to wss://voice-assistant-ap2c6rap.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=1.0.7&access_token=...
2025-05-15 15:57:37,749 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 15:57:37,750 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 15:57:38,065 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_msuVWAW9iSPp
2025-05-15 15:57:38,066 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 15:57:38,109 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] __init__ CALLED ---
2025-05-15 15:57:38,232 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully (using LoggingTTSWrapper).
2025-05-15 15:57:38,233 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Skipping LLM plugin directly test for this run ---
2025-05-15 15:57:38,233 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 15:57:38,235 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 15:57:38,235 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 15:57:38,236 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 15:57:38,236 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage calls to agent's on_transcript and handle_llm_response.
2025-05-15 15:57:38,237 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 15:57:38,241 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_NN7EJVdbTiZb.
2025-05-15 15:57:41,252 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] synthesize CALLED with input type: <class 'str'> ---
2025-05-15 15:57:41,253 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] TTS received single string: 'Hi there! How can I assist you today?'
2025-05-15 15:57:41,253 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] MODEL_RESPONSE (Accumulated for current turn so far): 'Hi there! How can I assist you today?'
2025-05-15 15:57:41,257 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 15:57:41,365 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 15:57:41,462 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 15:57:41,465 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 15:57:43,446 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 15:57:43,451 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 15:57:45,445 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 15:57:45,445 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:04:46,094 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:04:46,094 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:04:46,094 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:04:46,094 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:04:46,095 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 16:04:46,648 - __main__ - DEBUG - [MainThread] - Port 8000 appears to be free or no process using it could be terminated by this script.
2025-05-15 16:04:46,648 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 16:04:46,648 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 16:04:46,648 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 16:04:46,665 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 16:04:46,949 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 appears to be free or no process using it could be terminated by this script.
2025-05-15 16:04:46,949 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 16:04:46,964 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 16:04:46,965 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 16:04:46,965 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 16:04:46,965 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 16:04:46,965 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:46,965 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:46,965 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:46,965 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:46,965 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:46,965 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:46,965 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:46,965 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:46,981 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:46,981 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:46,981 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:46,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:46,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:46,983 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:46,983 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:46,983 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:46,986 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 16:04:47,226 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 16:04:51,682 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 16:04:51,682 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 16:04:51,742 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:04:51,742 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:04:51,742 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:04:51,742 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:04:51,829 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:04:51,829 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:04:51,832 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:04:51,832 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:04:53,438 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 16:04:53,479 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (Corrected TTS Wrapper & LLM Call Attempt) --- Room: voice-assistant-room, Job: AJ_ZyAb6bxZokgW
2025-05-15 16:04:53,488 - livekit - INFO - [Dummy-1] - livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.23
2025-05-15 16:04:53,488 - livekit - INFO - [Dummy-1] - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.23
2025-05-15 16:04:53,490 - livekit - INFO - [Dummy-1] - livekit_api::signal_client::signal_stream:106:livekit_api::signal_client::signal_stream - connecting to wss://voice-assistant-ap2c6rap.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=1.0.7&access_token=...
2025-05-15 16:04:53,507 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:04:53,507 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:04:54,251 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_cPnnhvAVkavj
2025-05-15 16:04:54,252 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 16:04:54,297 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] __init__ CALLED ---
2025-05-15 16:04:54,422 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 16:04:54,422 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 16:04:54,423 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created ChatMessage list for context.
2025-05-15 16:04:54,423 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_messages_for_ctx_test) [POSITIONAL for messages]
2025-05-15 16:04:54,424 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x00000200EB384450>
2025-05-15 16:04:54,424 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_llm_test)
2025-05-15 16:04:55,165 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test Chunk (with chat_ctx=): 'id='chatcmpl-BXQDMYk5dVwkNFWhdLT8aEVKojE2w' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None'
2025-05-15 16:04:55,166 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx= (and positional ChatContext init) SUCCEEDED.
2025-05-15 16:04:55,166 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 16:04:55,167 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 16:04:55,167 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 16:04:55,167 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 16:04:55,168 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 16:04:55,168 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 16:04:55,169 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 16:04:55,171 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_ZyAb6bxZokgW.
2025-05-15 16:05:03,143 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] synthesize CALLED with input type: <class 'str'> ---
2025-05-15 16:05:03,144 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] MODEL_RESPONSE (Accumulated for current turn): 'Hello! How can I assist you today?'
2025-05-15 16:05:03,148 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:05:03,158 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:05:03,260 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:05:03,264 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:05:05,269 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:05:05,282 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:05:07,271 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:05:07,290 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:05:07,310 - __main__ - ERROR - [job_thread_runner] - --- [LoggingTTSWrapper] Error in super().synthesize for 'Hello! How can I assist you today?': failed to synthesize speech after 4 attempts
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1240, in synthesize
    async for tts_output_chunk in super().synthesize(single_sentence_iterator()):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 253, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 211, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to synthesize speech after 4 attempts
2025-05-15 16:05:07,345 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 105, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 269, in __step
    result = coro.throw(exc)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 90, in _synthesize
    async for audio in self._wrapped_tts.synthesize(ev.token):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1240, in synthesize
    async for tts_output_chunk in super().synthesize(single_sentence_iterator()):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 253, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 211, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to synthesize speech after 4 attempts
2025-05-15 16:05:07,443 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 445, in __anext__
    val = await self._event_aiter.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
StopAsyncIteration

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 146, in _inference_task
    async for audio_frame in tts_node:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 493, in tts_node
    async for ev in stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 448, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 105, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 85, in _forward_input
    self._sent_stream.end_input()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tokenize\token_stream.py", line 95, in end_input
    self.flush()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tokenize\token_stream.py", line 71, in flush
    self._check_not_closed()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tokenize\token_stream.py", line 104, in _check_not_closed
    raise RuntimeError(f"{cls.__module__}.{cls.__name__} is closed")
RuntimeError: livekit.agents.tokenize.token_stream.BufferedSentenceStream is closed
2025-05-15 16:14:09,113 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:14:09,114 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:14:09,114 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:14:09,114 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:14:09,115 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 16:14:09,638 - __main__ - DEBUG - [MainThread] - Port 8000 appears to be free or no process using it could be terminated by this script.
2025-05-15 16:14:09,639 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 16:14:09,639 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 16:14:09,639 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 16:14:09,679 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 16:14:09,905 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 appears to be free or no process using it could be terminated by this script.
2025-05-15 16:14:09,905 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 16:14:09,905 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 16:14:09,905 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 16:14:09,905 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 16:14:09,921 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:09,926 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:09,926 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 16:14:10,114 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 16:14:14,697 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 16:14:14,697 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 16:14:14,751 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:14:14,751 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:14:14,751 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:14:14,751 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:14:14,785 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:14:14,786 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:14:14,788 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:14:14,789 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:14:16,195 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 16:14:16,226 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (Corrected TTS Wrapper Input) --- Room: voice-assistant-room, Job: AJ_wnZa9ejWnYx8
2025-05-15 16:14:16,228 - livekit - INFO - [Dummy-1] - livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.23
2025-05-15 16:14:16,228 - livekit - INFO - [Dummy-1] - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.23
2025-05-15 16:14:16,230 - livekit - INFO - [Dummy-1] - livekit_api::signal_client::signal_stream:106:livekit_api::signal_client::signal_stream - connecting to wss://voice-assistant-ap2c6rap.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=1.0.7&access_token=...
2025-05-15 16:14:16,303 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:14:16,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:14:16,739 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_PxRrWfNxrWD2
2025-05-15 16:14:16,741 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 16:14:16,786 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] __init__ CALLED ---
2025-05-15 16:14:16,905 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 16:14:16,906 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 16:14:16,907 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_messages_for_ctx_test) [POSITIONAL for messages]
2025-05-15 16:14:16,907 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x0000024532AA7A90>
2025-05-15 16:14:16,908 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_llm_test)
2025-05-15 16:14:16,908 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM direct test FAILED (TypeError: object LLMStream can't be used in 'await' expression). Problem with ChatContext init or llm.chat(chat_ctx=).
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1414, in entrypoint
    llm_stream_result = await llm_plugin.chat(chat_ctx=chat_ctx_for_llm_test)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 16:14:16,911 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-15 16:14:16,911 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 16:14:16,912 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 16:14:16,912 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 16:14:16,912 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 16:14:16,912 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 16:14:16,912 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 16:14:16,913 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 16:14:17,067 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_wnZa9ejWnYx8.
2025-05-15 16:14:20,477 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] synthesize CALLED with input type: <class 'str'> ---
2025-05-15 16:14:20,477 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] Received single string for TTS: 'Hello! How can I assist you today?'
2025-05-15 16:14:20,478 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] MODEL_RESPONSE (Accumulated for current turn for logging): 'Hello! How can I assist you today?'
2025-05-15 16:14:20,478 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] Calling super().synthesize() with iterator for: 'Hello! How can I assist you today?'
2025-05-15 16:14:20,482 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:14:20,491 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:14:20,586 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:14:20,590 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:14:22,610 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:14:22,617 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:14:24,642 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:14:24,646 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:14:24,652 - __main__ - ERROR - [job_thread_runner] - --- [LoggingTTSWrapper] Error in super().synthesize for 'Hello! How can I assist you today?': failed to synthesize speech after 4 attempts
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1253, in synthesize
    async for tts_output_chunk in super().synthesize(single_sentence_iterator_for_super()):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 253, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 211, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to synthesize speech after 4 attempts
2025-05-15 16:14:24,660 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 105, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 269, in __step
    result = coro.throw(exc)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 90, in _synthesize
    async for audio in self._wrapped_tts.synthesize(ev.token):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1253, in synthesize
    async for tts_output_chunk in super().synthesize(single_sentence_iterator_for_super()):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 253, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 211, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to synthesize speech after 4 attempts
2025-05-15 16:14:24,763 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 445, in __anext__
    val = await self._event_aiter.__anext__()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
StopAsyncIteration

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 146, in _inference_task
    async for audio_frame in tts_node:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 493, in tts_node
    async for ev in stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 448, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 105, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\stream_adapter.py", line 85, in _forward_input
    self._sent_stream.end_input()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tokenize\token_stream.py", line 95, in end_input
    self.flush()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tokenize\token_stream.py", line 71, in flush
    self._check_not_closed()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tokenize\token_stream.py", line 104, in _check_not_closed
    raise RuntimeError(f"{cls.__module__}.{cls.__name__} is closed")
RuntimeError: livekit.agents.tokenize.token_stream.BufferedSentenceStream is closed
2025-05-15 16:25:01,044 - livekit - WARNING - [Dummy-2] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-15 16:25:01,046 - livekit - INFO - [Dummy-2] - livekit::room:1253:livekit::room - disconnected from room with reason: RoomClosed
2025-05-15 16:26:36,225 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:26:36,225 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:26:36,225 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:26:36,225 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:26:36,225 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 16:26:36,225 - __main__ - INFO - [MainThread] - --- __main__: 'dev' argument detected. Development mode behavior if any.
2025-05-15 16:26:36,744 - __main__ - DEBUG - [MainThread] - Port 8000 appears to be free or no process using it could be terminated by this script.
2025-05-15 16:26:36,744 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 16:26:36,744 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 16:26:36,744 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 16:26:36,780 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 16:26:37,027 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 appears to be free or no process using it could be terminated by this script.
2025-05-15 16:26:37,027 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 16:26:37,027 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 16:26:37,027 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 16:26:37,027 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 16:26:37,027 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 16:26:37,044 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:37,045 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:37,045 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:37,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:37,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:37,047 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:37,048 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:37,048 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:37,051 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:37,051 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:37,051 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:37,051 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:37,051 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:37,051 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:37,051 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:37,051 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:37,051 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 16:26:37,209 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 16:26:41,798 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 16:26:41,798 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 16:26:41,855 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:26:41,855 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:26:41,855 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:26:41,855 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:26:43,742 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:26:43,742 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:26:43,756 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:26:43,759 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:26:44,229 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 16:26:44,253 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (Corrected TTS & LLM Direct Test) --- Room: voice-assistant-room, Job: AJ_SR38RT3v44ta
2025-05-15 16:26:44,254 - livekit - INFO - [Dummy-1] - livekit_ffi::server:139:livekit_ffi::server - initializing ffi server v0.12.23
2025-05-15 16:26:44,255 - livekit - INFO - [Dummy-1] - livekit_ffi::cabi:36:livekit_ffi::cabi - initializing ffi server v0.12.23
2025-05-15 16:26:44,257 - livekit - INFO - [Dummy-1] - livekit_api::signal_client::signal_stream:106:livekit_api::signal_client::signal_stream - connecting to wss://voice-assistant-ap2c6rap.livekit.cloud/rtc?sdk=python&protocol=15&auto_subscribe=0&adaptive_stream=0&version=1.0.7&access_token=...
2025-05-15 16:26:44,325 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:26:44,326 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:26:44,745 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_oEDo7VwNdbzk
2025-05-15 16:26:44,746 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 16:26:44,791 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] __init__ CALLED ---
2025-05-15 16:26:44,919 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 16:26:44,919 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 16:26:44,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_messages_for_ctx_test) [POSITIONAL for messages]
2025-05-15 16:26:44,923 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x00000201FFAE12D0>
2025-05-15 16:26:44,924 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_llm_test)
2025-05-15 16:26:44,925 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM direct test FAILED (TypeError: object LLMStream can't be used in 'await' expression). Problem with ChatContext init or llm.chat(chat_ctx=).
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1364, in entrypoint
    llm_stream_result = await llm_plugin.chat(chat_ctx=chat_ctx_for_llm_test) # await the call
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 16:26:44,927 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED or produced no chunks. Agent LLM calls may not function correctly. !!!
2025-05-15 16:26:44,927 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 16:26:44,928 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 16:26:44,928 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 16:26:44,928 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 16:26:44,929 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 16:26:44,929 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns based on agent methods.
2025-05-15 16:26:44,929 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Expecting AgentSession to use agent's initial instructions for a greeting, triggering agent's handle_llm_response via LoggingTTSWrapper.
2025-05-15 16:26:44,929 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 16:26:45,085 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_SR38RT3v44ta.
2025-05-15 16:26:53,957 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] synthesize CALLED with input type: <class 'str'> ---
2025-05-15 16:26:53,957 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] TTS received single string: 'Hi there! How can I assist you today?'
2025-05-15 16:26:53,958 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] MODEL_RESPONSE (Accumulated for current turn for logging): 'Hi there! How can I assist you today?'
2025-05-15 16:26:53,958 - __main__ - INFO - [job_thread_runner] - --- [LoggingTTSWrapper] Calling super().synthesize() with iterator for: 'Hi there! How can I assist you today?'
2025-05-15 16:26:53,960 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:26:53,965 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:26:54,068 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:26:54,071 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:26:56,069 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:26:56,076 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:26:58,070 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable
2025-05-15 16:26:58,079 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 176, in __anext__
    return await self.recv()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\channel.py", line 106, in recv
    await g
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 287, in __await__
    yield self  # This tells Task to wait for completion.
    ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
livekit.agents.utils.aio.channel.ChanClosed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 252, in _run
    await decode_task  # await here to raise the error if any
    ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 290, in __await__
    return self.result()  # May raise too.
           ^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1473, in request
    request = self._build_request(options, retries_taken=retries_taken)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 535, in _build_request
    return self._client.build_request(  # pyright: ignore[reportUnknownMemberType]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 378, in build_request
    return Request(
           ^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_models.py", line 408, in __init__
    headers, stream = encode_request(
                      ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 216, in encode_request
    return encode_json(json)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_content.py", line 177, in encode_json
    body = json_dumps(
           ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type async_generator is not JSON serializable

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 260, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-15 16:27:44,189 - livekit - INFO - [Dummy-2] - livekit::room:1253:livekit::room - disconnected from room with reason: ClientInitiated
2025-05-15 16:40:30,109 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:40:30,109 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:40:30,109 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:40:30,109 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:43:11,569 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:43:11,569 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:43:11,569 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:43:11,569 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:43:11,569 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 16:43:12,085 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 16:43:12,085 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 16:43:12,100 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 16:43:12,100 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 16:43:12,122 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 16:43:12,415 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 16:43:12,415 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 16:43:12,415 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 16:43:12,417 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 16:43:12,418 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 16:43:12,421 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 16:43:12,426 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:12,427 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:12,428 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:12,428 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:12,429 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:12,429 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:12,430 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:12,431 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:12,433 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:12,433 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:12,433 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:12,433 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:12,433 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:12,433 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:12,433 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:12,433 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:12,433 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 16:43:12,667 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 16:43:17,136 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 16:43:17,136 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 16:43:17,218 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:43:17,218 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:43:17,218 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:43:17,218 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:43:18,957 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:43:18,957 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:43:18,971 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:43:18,974 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:43:19,433 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 16:43:19,472 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_UwS549sU2Kyz
2025-05-15 16:43:19,586 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:43:19,587 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:43:20,124 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_oYibATLAt4Nh
2025-05-15 16:43:20,125 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 16:43:20,301 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 16:43:20,301 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 16:43:20,303 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_2a37ff674f06', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747307600.3033314)]
2025-05-15 16:43:20,303 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_message_list) [POSITIONAL for messages]
2025-05-15 16:43:20,304 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x0000025AC3E3E550>
2025-05-15 16:43:20,304 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_test)
2025-05-15 16:43:20,305 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx= FAILED: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 942, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_test):
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 16:43:20,306 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function. !!!
2025-05-15 16:43:20,307 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 16:43:20,307 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 16:43:20,307 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 16:43:20,308 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 16:43:20,308 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 16:43:20,308 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 16:43:20,309 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 16:43:20,457 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 16:43:20,460 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_UwS549sU2Kyz.
2025-05-15 16:43:20,460 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 16:43:25,927 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 16:43:34,109 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 16:43:42,605 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 16:58:25,556 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:58:25,557 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:58:25,557 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:58:25,557 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:58:25,557 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 16:58:26,099 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 16:58:26,100 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 16:58:26,100 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 16:58:26,100 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 16:58:26,109 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 16:58:26,380 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 16:58:26,380 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 16:58:26,380 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 16:58:26,380 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 16:58:26,380 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 16:58:26,390 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:26,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:26,408 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 16:58:26,558 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 16:58:31,127 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 16:58:31,127 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 16:58:31,184 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 16:58:31,184 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 16:58:31,184 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 16:58:31,184 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 16:58:31,234 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:58:31,234 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:58:31,237 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 16:58:31,238 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 16:58:31,911 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 16:58:31,941 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_X6ZP6Bt5ChB9
2025-05-15 16:58:32,005 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 16:58:32,006 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 16:58:32,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_ajk3ACqPMeT6
2025-05-15 16:58:32,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 16:58:32,729 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 16:58:32,730 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 16:58:32,731 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_c43148e54f94', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747308512.7311108)]
2025-05-15 16:58:32,732 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_message_list) [POSITIONAL for messages]
2025-05-15 16:58:32,732 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x0000019ED07786D0>
2025-05-15 16:58:32,732 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_test)
2025-05-15 16:58:32,732 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx= FAILED: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1384, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_test):
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 16:58:32,734 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function. !!!
2025-05-15 16:58:32,734 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 16:58:32,735 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 16:58:32,735 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 16:58:32,735 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 16:58:32,736 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 16:58:32,736 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 16:58:32,736 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 16:58:32,881 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 16:58:32,883 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_X6ZP6Bt5ChB9.
2025-05-15 16:58:32,883 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 16:58:35,837 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 16:58:48,088 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 16:58:50,918 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 16:59:19,946 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 16:59:28,597 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 16:59:52,255 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:00:00,965 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:00:54,832 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:00:54,833 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:00:59,274 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:01:23,403 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:02:01,240 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:02:16,167 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:02:23,153 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:08:19,929 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:08:22,353 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:14:03,463 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:14:03,479 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:14:03,479 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:14:03,479 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:14:03,479 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 17:14:04,002 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 17:14:04,002 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 17:14:04,003 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 17:14:04,003 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 17:14:04,035 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 17:14:04,283 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 17:14:04,283 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 17:14:04,283 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 17:14:04,283 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 17:14:04,283 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 17:14:04,283 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:04,305 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:04,317 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 17:14:04,450 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 17:14:09,055 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 17:14:09,056 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 17:14:09,122 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:14:09,122 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:14:09,123 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:14:09,123 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:14:12,045 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:14:12,045 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:14:12,045 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:14:12,045 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:14:12,500 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 17:14:12,529 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_tWfYNwGhKV8T
2025-05-15 17:14:12,594 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:14:12,594 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:14:13,184 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_ogmpePT2AS3s
2025-05-15 17:14:13,185 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 17:14:13,362 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 17:14:13,362 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 17:14:13,364 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_04499f5a14b3', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747309453.3640008)]
2025-05-15 17:14:13,364 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_message_list) [POSITIONAL for messages]
2025-05-15 17:14:13,364 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x0000026474BD41D0>
2025-05-15 17:14:13,364 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_test)
2025-05-15 17:14:13,365 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx= FAILED: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1381, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_test):
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 17:14:13,367 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function. !!!
2025-05-15 17:14:13,367 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 17:14:13,368 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 17:14:13,368 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 17:14:13,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 17:14:13,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 17:14:13,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 17:14:13,370 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 17:14:13,522 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 17:14:13,523 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_tWfYNwGhKV8T.
2025-05-15 17:14:13,524 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 17:14:18,921 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:14:31,159 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:14:55,068 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:15:07,602 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:15:42,149 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:16:14,187 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:16:27,917 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:16:39,970 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:16:51,291 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:17:01,800 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:17:13,621 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:17:22,793 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:17:23,983 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:17:36,143 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:17:52,681 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:18:00,217 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:18:10,923 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:18:15,671 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:18:19,928 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:33:45,464 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:33:45,464 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:33:45,464 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:33:45,464 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:33:45,464 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 17:33:45,995 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 17:33:45,995 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 17:33:45,996 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 17:33:45,996 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 17:33:46,016 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 17:33:46,284 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 17:33:46,284 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 17:33:46,285 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 17:33:46,286 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 17:33:46,286 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 17:33:46,290 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 17:33:46,296 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:33:46,298 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:33:46,298 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:33:46,299 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:33:46,311 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 17:33:46,462 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 17:33:51,048 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 17:33:51,048 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 17:33:51,118 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:33:51,118 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:33:51,118 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:33:51,118 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:33:51,248 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:33:51,248 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:33:51,248 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:33:51,248 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:35:19,573 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:35:19,589 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:35:19,589 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:35:19,589 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:35:19,589 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 17:35:19,589 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 17:35:20,128 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 17:35:20,129 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 17:35:20,130 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 17:35:20,130 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 17:35:20,135 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 17:35:20,418 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 17:35:20,418 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 17:35:20,418 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 17:35:20,418 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 17:35:20,418 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 17:35:20,418 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 17:35:20,418 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:20,433 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:20,433 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:20,433 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:20,433 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:20,435 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:20,436 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:20,436 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:20,438 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:20,439 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:20,439 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:20,439 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:20,439 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:20,439 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:20,439 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:20,439 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:20,439 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 17:35:20,619 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 17:35:25,152 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 17:35:25,152 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 17:35:25,208 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:35:25,209 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:35:25,209 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:35:25,209 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:35:25,747 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:35:25,747 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:35:25,747 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:35:25,762 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:35:27,190 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 17:35:27,220 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_gdmpNWhfxXtM
2025-05-15 17:35:27,246 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:35:27,247 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:35:28,813 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_szrjDq7uBZxZ
2025-05-15 17:35:28,815 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 17:35:28,999 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 17:35:28,999 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 17:35:29,001 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_1b42641c2168', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747310729.0019097)]
2025-05-15 17:35:29,002 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_message_list) [POSITIONAL for messages]
2025-05-15 17:35:29,003 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x000002374C8906D0>
2025-05-15 17:35:29,003 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_test)
2025-05-15 17:35:29,004 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx= FAILED: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1423, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_test):
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 17:35:29,007 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function. !!!
2025-05-15 17:35:29,008 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 17:35:29,008 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 17:35:29,008 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 17:35:29,008 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 17:35:29,009 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 17:35:29,009 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 17:35:29,009 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 17:35:29,161 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 17:35:29,163 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_gdmpNWhfxXtM.
2025-05-15 17:35:29,165 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 17:35:35,582 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:35:45,889 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:35:48,277 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:36:06,735 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:36:15,984 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:36:17,179 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:36:25,552 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:36:47,543 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:39:16,694 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:39:22,607 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:39:31,138 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:39:34,109 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:47:09,600 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:47:09,600 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:47:09,600 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:47:09,600 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:47:09,600 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 17:47:10,154 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 17:47:10,154 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 17:47:10,154 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 17:47:10,154 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 17:47:10,171 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 17:47:10,453 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 17:47:10,453 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 17:47:10,454 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 17:47:10,454 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 17:47:10,454 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 17:47:10,454 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 17:47:10,454 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:10,454 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:10,454 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:10,454 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:10,454 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:10,454 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:10,454 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:10,454 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:10,470 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:10,470 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:10,471 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:10,471 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:10,471 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:10,472 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:10,472 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:10,473 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:10,476 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 17:47:10,764 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 17:47:15,208 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 17:47:15,210 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 17:47:15,264 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:47:15,265 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:47:15,266 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:47:15,266 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:47:15,345 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:47:15,345 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:47:15,345 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:47:15,345 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:47:16,132 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 17:47:16,194 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_3xAjEvUPGr9e
2025-05-15 17:47:16,302 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:47:16,302 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:47:16,495 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_eXeceAp4gxa8
2025-05-15 17:47:16,496 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 17:47:16,685 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 17:47:16,685 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 17:47:16,687 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_81b960e5995a', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747311436.6871989)]
2025-05-15 17:47:16,687 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_message_list) [POSITIONAL for messages]
2025-05-15 17:47:16,687 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x00000172BC70C4D0>
2025-05-15 17:47:16,688 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_test)
2025-05-15 17:47:16,688 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx= FAILED: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1424, in entrypoint
    llm_stream_test = await llm_plugin.chat(chat_ctx=chat_ctx_for_test)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-15 17:47:16,690 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function. !!!
2025-05-15 17:47:16,690 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 17:47:16,690 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 17:47:16,691 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 17:47:16,691 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 17:47:16,691 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 17:47:16,692 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 17:47:16,692 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 17:47:16,847 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 17:47:16,849 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_3xAjEvUPGr9e.
2025-05-15 17:47:16,850 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 17:47:22,221 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:47:30,608 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:47:48,736 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:47:50,512 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:56:45,619 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:56:45,619 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:56:45,619 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:56:45,635 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:56:45,635 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 17:56:46,170 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 17:56:46,170 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 17:56:46,170 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 17:56:46,170 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 17:56:46,188 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 17:56:46,475 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 17:56:46,475 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 17:56:46,475 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 17:56:46,477 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 17:56:46,478 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 17:56:46,481 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 17:56:46,486 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:56:46,487 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:56:46,487 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:56:46,488 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:56:46,488 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:56:46,489 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:56:46,489 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:56:46,489 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:56:46,493 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:56:46,493 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:56:46,493 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:56:46,493 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:56:46,494 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:56:46,494 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:56:46,494 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:56:46,494 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:56:46,494 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 17:56:46,622 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 17:56:51,221 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 17:56:51,221 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 17:56:51,281 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:56:51,281 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:56:51,281 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:56:51,281 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:56:52,768 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:56:52,768 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:56:52,768 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:56:52,768 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:57:51,675 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:57:51,675 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:57:51,675 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:57:51,675 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:57:51,675 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 17:57:51,675 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 17:57:52,214 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 17:57:52,214 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 17:57:52,214 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 17:57:52,214 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 17:57:52,229 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 17:57:52,512 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 17:57:52,512 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 17:57:52,512 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 17:57:52,512 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 17:57:52,512 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 17:57:52,512 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 17:57:52,512 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:52,528 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:52,528 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:52,528 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:52,529 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:52,529 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:52,530 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:52,531 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:52,534 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:52,534 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:52,534 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:52,534 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:52,534 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:52,534 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:52,534 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:52,534 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:52,534 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 17:57:52,696 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 17:57:57,246 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 17:57:57,246 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 17:57:57,321 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 17:57:57,322 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 17:57:57,322 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 17:57:57,322 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 17:57:57,387 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:57:57,387 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:57:57,387 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 17:57:57,387 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 17:57:57,830 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 17:57:57,861 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_x4uhdkaUsLCv
2025-05-15 17:57:57,916 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 17:57:57,916 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 17:57:58,169 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_Tb2Hn8swo7th
2025-05-15 17:57:58,171 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 17:57:58,336 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 17:57:58,336 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 17:57:58,338 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_d8ca74e5e54b', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747312078.3385518)]
2025-05-15 17:57:58,338 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1391, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-15 17:57:58,339 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-15 17:57:58,341 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-15 17:57:58,341 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 17:57:58,341 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 17:57:58,342 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 17:57:58,342 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 17:57:58,342 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 17:57:58,343 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 17:57:58,343 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 17:57:58,345 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 17:57:58,346 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_x4uhdkaUsLCv.
2025-05-15 17:57:58,347 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 17:58:00,326 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:58:07,416 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:58:12,611 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:58:23,224 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:58:26,170 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 17:58:39,079 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:03:45,160 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:03:45,160 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:03:45,160 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:03:45,173 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:03:45,173 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 18:03:45,679 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 18:03:45,679 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 18:03:45,679 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 18:03:45,679 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 18:03:45,695 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 18:03:45,963 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 18:03:45,963 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-15 18:03:45,963 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 18:03:45,963 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 18:03:45,963 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 18:03:45,963 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 18:03:45,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:03:45,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:03:45,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:03:45,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:03:45,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:03:45,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:03:45,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:03:45,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:03:45,985 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:03:45,985 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:03:45,985 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:03:45,986 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:03:45,986 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:03:45,986 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:03:45,986 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:03:45,987 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:03:45,989 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 18:03:46,148 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 18:03:50,720 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 18:03:50,720 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 18:03:50,794 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:03:50,794 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:03:50,794 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:03:50,794 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:05:08,489 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:05:08,489 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:05:08,489 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:05:08,489 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:05:09,097 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 18:05:09,122 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_y2Yj2xvPwbtP
2025-05-15 18:05:09,184 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:05:09,185 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:05:09,460 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_vUA3EYu6wMNd
2025-05-15 18:05:09,463 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 18:05:09,636 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 18:05:09,637 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 18:05:09,638 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_e7429f531e0b', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747312509.6385853)]
2025-05-15 18:05:09,639 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting to create ChatContext...
2025-05-15 18:05:09,639 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating or adding messages to ChatContext: 'ChatContext' object has no attribute 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1396, in entrypoint
    chat_ctx_for_test.messages.append(msg) # Assuming ChatContext has a 'messages' list attribute
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ChatContext' object has no attribute 'messages'
2025-05-15 18:05:09,641 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-15 18:05:09,642 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-15 18:05:09,642 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 18:05:09,642 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 18:05:09,643 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 18:05:09,643 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 18:05:09,643 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 18:05:09,644 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 18:05:09,644 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 18:05:09,648 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 18:05:09,648 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_y2Yj2xvPwbtP.
2025-05-15 18:05:09,649 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 18:05:17,646 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:05:48,346 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:08:26,250 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:09:30,332 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:10:15,756 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:15:21,133 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:15:21,133 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:15:21,133 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:15:21,133 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:15:21,133 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 18:15:21,637 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 18:15:21,637 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 18:15:21,637 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 18:15:21,637 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 18:15:21,677 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 18:15:21,933 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 18:15:21,934 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 18:15:21,934 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 18:15:21,935 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 18:15:21,936 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 18:15:21,940 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 18:15:21,945 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:21,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:21,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:21,947 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:21,947 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 18:15:22,081 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 18:15:26,693 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 18:15:26,693 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 18:15:26,771 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:15:26,773 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:15:26,773 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:15:26,774 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:15:27,821 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:15:27,821 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:15:27,821 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:15:27,821 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:15:28,388 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 18:15:28,414 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_VkZFkmjTpKp8
2025-05-15 18:15:28,446 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:15:28,447 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:15:29,028 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_PLDAMehEfxfa
2025-05-15 18:15:29,031 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 18:15:29,217 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-15 18:15:29,217 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-15 18:15:29,219 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list.
2025-05-15 18:15:29,219 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting to create ChatContext with positional messages argument...
2025-05-15 18:15:29,219 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally.
2025-05-15 18:15:29,220 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-15 18:15:29,220 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED: LLM.chat() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1458, in entrypoint
    llm_stream_test = await llm_plugin.chat(chat_ctx_for_test) # Use positional argument
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: LLM.chat() takes 1 positional argument but 2 were given
2025-05-15 18:15:29,222 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Reason: LLM chat call failed: LLM.chat() takes 1 positional argument but 2 were given. Agent may not function correctly. !!!
2025-05-15 18:15:29,222 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-15 18:15:29,222 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-15 18:15:29,223 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 18:15:29,223 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 18:15:29,224 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 18:15:29,224 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-15 18:15:29,224 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 18:15:29,226 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 18:15:29,228 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_VkZFkmjTpKp8.
2025-05-15 18:15:29,229 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 18:15:35,009 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:15:43,420 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:15:51,486 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:15:51,829 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:21:01,402 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:44:50,823 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:44:50,823 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:44:50,824 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:44:50,824 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:44:50,824 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 18:44:51,363 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 18:44:51,363 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 18:44:51,364 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 18:44:51,364 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 18:44:51,385 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 18:44:51,650 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 18:44:51,650 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 18:44:51,650 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 18:44:51,652 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 18:44:51,653 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 18:44:51,657 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 18:44:51,663 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:51,664 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:51,665 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:51,665 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:51,666 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:51,666 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:51,667 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:51,667 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:51,671 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:51,671 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:51,671 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:51,672 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:51,672 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:51,672 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:51,673 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:51,673 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:51,676 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 18:44:51,804 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 18:44:56,401 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 18:44:56,401 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 18:44:56,490 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:44:56,491 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:44:56,491 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:44:56,491 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:44:56,825 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:44:56,825 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:44:56,828 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:44:56,829 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:44:57,342 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 18:44:57,364 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_cFjm3YVnZDwV
2025-05-15 18:44:57,410 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:44:57,411 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:44:57,830 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_TkwaL2e838t7
2025-05-15 18:44:57,832 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 18:44:57,833 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-15 18:44:57,878 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-15 18:44:57,887 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-15 18:44:58,016 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-15 18:44:58,016 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-15 18:44:58,017 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-15 18:44:58,017 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-15 18:44:58,018 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 18:44:58,018 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 18:44:58,018 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 18:44:58,018 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-15 18:44:58,019 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 18:44:58,022 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 18:44:58,023 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-15 18:44:58,024 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_cFjm3YVnZDwV.
2025-05-15 18:44:58,024 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 18:45:05,471 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:45:10,780 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:45:19,298 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:45:20,503 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:45:30,368 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:46:39,068 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:49:07,263 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:49:15,380 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:49:18,485 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:49:22,921 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:52:04,015 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:52:04,015 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:52:04,015 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:52:04,015 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:52:04,016 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 18:52:04,582 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 18:52:04,583 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 18:52:04,583 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 18:52:04,584 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 18:52:04,604 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 18:52:04,892 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 18:52:04,892 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 18:52:04,892 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 18:52:04,894 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 18:52:04,895 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 18:52:04,898 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 18:52:04,903 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:04,904 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:04,904 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:04,905 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:04,905 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:04,905 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:04,906 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:04,906 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:04,910 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:04,910 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:04,910 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:04,910 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:04,911 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:04,911 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:04,911 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:04,911 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:04,914 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 18:52:05,087 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 18:52:09,622 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 18:52:09,622 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 18:52:09,681 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:52:09,682 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:52:09,682 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:52:09,682 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:52:25,726 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:52:25,727 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:52:25,729 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:52:25,730 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:52:26,281 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 18:52:26,306 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_songS7yXVWZA
2025-05-15 18:52:26,384 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:52:26,384 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:52:26,634 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_No4WSWsKWTrE
2025-05-15 18:52:26,635 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 18:52:26,635 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-15 18:52:26,672 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-15 18:52:26,681 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-15 18:52:26,806 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-15 18:52:26,806 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-15 18:52:26,806 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-15 18:52:26,807 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-15 18:52:26,807 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 18:52:26,808 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 18:52:26,808 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 18:52:26,808 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-15 18:52:26,809 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 18:52:26,812 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 18:52:26,813 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-15 18:52:26,814 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_songS7yXVWZA.
2025-05-15 18:52:26,814 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 18:52:31,473 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:52:32,324 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:52:35,309 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:52:45,697 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:52:50,169 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:53:10,125 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:53:41,665 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:53:49,428 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 18:58:44,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:58:44,844 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:58:44,844 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:58:44,844 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:58:44,844 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 18:58:45,345 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 18:58:45,346 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 18:58:45,346 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 18:58:45,346 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 18:58:45,354 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 18:58:45,625 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 18:58:45,625 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 18:58:45,625 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 18:58:45,626 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 18:58:45,627 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 18:58:45,630 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 18:58:45,636 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:45,637 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:45,637 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:45,638 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:45,638 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:45,639 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:45,639 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:45,639 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:45,642 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:45,642 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:45,643 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:45,643 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:45,643 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:45,643 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:45,644 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:45,644 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:45,648 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 18:58:45,774 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 18:58:50,372 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 18:58:50,372 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 18:58:50,426 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 18:58:50,427 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 18:58:50,427 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 18:58:50,427 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 18:58:54,710 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:58:54,712 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:58:54,717 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 18:58:54,719 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 18:58:55,151 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 18:58:55,172 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_aRmUNjirfs8b
2025-05-15 18:58:55,232 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 18:58:55,233 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 18:58:55,646 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_h7T25TcG6XE7
2025-05-15 18:58:55,648 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 18:58:55,649 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-15 18:58:55,700 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-15 18:58:55,710 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-15 18:58:55,837 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-15 18:58:55,837 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-15 18:58:55,838 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-15 18:58:55,839 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-15 18:58:55,839 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 18:58:55,839 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 18:58:55,839 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant and awaiting room closure...
2025-05-15 18:58:55,843 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Awaiting room closure to keep agent task alive...
2025-05-15 18:58:55,843 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Error while awaiting room closure: 'Room' object has no attribute 'closed'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1545, in entrypoint
    await ctx.room.closed
          ^^^^^^^^^^^^^^^
AttributeError: 'Room' object has no attribute 'closed'
2025-05-15 18:58:55,845 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_aRmUNjirfs8b.
2025-05-15 19:01:25,123 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:01:25,123 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:01:25,124 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:01:25,124 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:01:25,124 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 19:01:25,128 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 19:01:25,673 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 19:01:25,673 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 19:01:25,674 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 19:01:25,674 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 19:01:25,685 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker (cli.run_app) to initialize...
2025-05-15 19:01:25,964 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 19:01:25,964 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 19:01:25,964 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 19:01:25,966 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 19:01:25,967 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 19:01:25,970 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 19:01:25,975 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:01:25,975 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:01:25,976 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:01:25,976 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:01:25,977 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:01:25,977 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:01:25,977 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:01:25,979 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:01:25,981 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:01:25,981 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:01:25,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:01:25,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:01:25,982 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:01:25,983 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:01:25,983 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:01:25,983 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:01:25,990 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 19:01:26,133 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 19:01:30,717 - __main__ - INFO - [MainThread] - --- __main__: Worker thread (cli.run_app) IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 19:01:30,718 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 19:01:30,777 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:01:30,777 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:01:30,778 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:01:30,778 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:01:30,985 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:01:30,985 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:01:30,988 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:01:30,988 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:02:21,903 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:02:21,904 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:02:21,904 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:02:21,904 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:02:21,905 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 19:02:21,908 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 19:02:22,432 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 19:02:22,432 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 19:02:22,433 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 19:02:22,433 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 19:02:22,475 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker (cli.run_app) to initialize...
2025-05-15 19:02:22,719 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 19:02:22,719 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 19:02:22,719 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 19:02:22,720 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 19:02:22,722 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 19:02:22,726 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 19:02:22,732 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:02:22,732 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:02:22,733 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:02:22,733 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:02:22,734 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:02:22,734 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:02:22,735 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:02:22,735 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:02:22,738 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:02:22,738 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:02:22,739 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:02:22,739 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:02:22,739 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:02:22,739 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:02:22,740 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:02:22,740 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:02:22,751 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 19:02:22,949 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 19:02:27,494 - __main__ - INFO - [MainThread] - --- __main__: Worker thread (cli.run_app) IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 19:02:27,494 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 19:02:27,543 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:02:27,543 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:02:27,543 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:02:27,543 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:03:07,966 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:03:07,967 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:03:07,970 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:03:07,971 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:03:09,334 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 19:03:09,359 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_QcQU9teKGy9v
2025-05-15 19:03:09,458 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:03:09,460 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:03:10,113 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_8iqJUxPcAHpW
2025-05-15 19:03:10,113 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 19:03:10,114 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-15 19:03:10,147 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-15 19:03:10,158 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-15 19:03:10,280 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-15 19:03:10,281 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-15 19:03:10,282 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-15 19:03:10,282 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 19:03:10,283 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 19:03:10,283 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant and awaiting room closure...
2025-05-15 19:03:10,287 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Awaiting room closure to keep agent task alive...
2025-05-15 19:03:10,287 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Error while awaiting room closure: 'Room' object has no attribute 'closed'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1533, in entrypoint
    await ctx.room.closed # This will block until the room is disconnected by the frontend or server
          ^^^^^^^^^^^^^^^
AttributeError: 'Room' object has no attribute 'closed'
2025-05-15 19:03:10,289 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_QcQU9teKGy9v.
2025-05-15 19:04:35,851 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-15 19:04:35,851 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-15 19:04:35,880 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-15 19:04:35,881 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-15 19:04:35,881 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-15 19:04:35,882 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 19:04:39,507 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:04:39,507 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:04:39,507 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:04:39,507 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:04:39,508 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 19:04:40,069 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 19:04:40,070 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 19:04:40,070 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 19:04:40,071 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 19:04:40,108 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 19:04:40,374 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 19:04:40,374 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 19:04:40,374 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 19:04:40,375 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 19:04:40,376 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 19:04:40,380 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 19:04:40,386 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:04:40,386 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:04:40,387 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:04:40,387 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:04:40,387 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:04:40,389 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:04:40,389 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:04:40,390 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:04:40,392 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:04:40,392 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:04:40,393 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:04:40,393 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:04:40,393 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:04:40,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:04:40,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:04:40,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:04:40,398 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 19:04:40,567 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 19:04:45,124 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 19:04:45,125 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 19:04:45,187 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:04:45,188 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:04:45,188 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:04:45,188 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:05:07,702 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:05:07,704 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:05:07,708 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:05:07,710 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:05:24,276 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:05:24,276 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:05:24,278 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:05:24,279 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:05:30,091 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-15 19:05:30,091 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-15 19:05:45,749 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:05:45,750 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:05:45,750 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:05:45,750 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:05:45,751 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 19:05:45,754 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 19:05:46,292 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 19:05:46,292 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 19:05:46,292 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 19:05:46,292 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 19:05:46,323 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 19:05:46,591 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 19:05:46,592 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 19:05:46,592 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 19:05:46,593 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 19:05:46,594 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 19:05:46,599 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 19:05:46,605 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:05:46,606 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:05:46,606 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:05:46,607 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:05:46,608 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:05:46,608 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:05:46,608 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:05:46,609 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:05:46,611 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:05:46,611 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:05:46,611 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:05:46,612 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:05:46,612 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:05:46,612 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:05:46,612 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:05:46,612 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:05:46,616 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 19:05:46,757 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 19:05:51,341 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 19:05:51,341 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 19:05:51,390 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:05:51,391 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:05:51,391 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:05:51,392 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:05:51,625 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:05:51,625 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:05:51,628 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:05:51,629 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:06:50,875 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:06:50,876 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:06:50,876 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:06:50,876 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:06:50,876 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-15 19:06:50,880 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-15 19:06:51,447 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-15 19:06:51,447 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-15 19:06:51,448 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-15 19:06:51,448 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-15 19:06:51,480 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-15 19:06:51,755 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-15 19:06:51,755 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-15 19:06:51,755 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-15 19:06:51,757 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-15 19:06:51,758 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-15 19:06:51,761 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-15 19:06:51,766 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:51,767 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:51,767 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:51,768 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:51,768 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:51,768 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:51,769 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:51,769 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:51,772 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:51,772 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:51,772 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:51,773 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:51,773 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:51,773 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:51,774 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:51,774 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:51,778 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-15 19:06:51,953 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-15 19:06:56,496 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-15 19:06:56,496 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-15 19:06:56,541 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-15 19:06:56,541 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-15 19:06:56,541 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-15 19:06:56,542 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-15 19:06:56,592 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:06:56,592 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:06:56,594 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-15 19:06:56,595 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-15 19:06:58,132 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-15 19:06:58,162 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_uQ3HMPE8HwG2
2025-05-15 19:06:58,237 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-15 19:06:58,238 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-15 19:06:58,468 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_LfkVNMPBnwHE
2025-05-15 19:06:58,469 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-15 19:06:58,469 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-15 19:06:58,505 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-15 19:06:58,514 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-15 19:06:58,637 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-15 19:06:58,639 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-15 19:06:58,639 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-15 19:06:58,640 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-15 19:06:58,640 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-15 19:06:58,641 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-15 19:06:58,641 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-15 19:06:58,641 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-15 19:06:58,642 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-15 19:06:58,645 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-15 19:06:58,646 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-15 19:06:58,647 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_uQ3HMPE8HwG2.
2025-05-15 19:06:58,647 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-15 19:07:01,004 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 19:07:08,334 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 19:07:23,190 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 19:07:26,736 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 19:07:37,101 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 19:07:43,863 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-15 19:07:49,405 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:25:21,417 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 11:25:21,417 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 11:25:21,417 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 11:25:21,417 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 11:25:21,417 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 11:25:21,919 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 11:25:21,919 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 11:25:21,919 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 11:25:21,919 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 11:25:21,957 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 11:25:22,185 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 11:25:22,185 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 11:25:22,185 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 11:25:22,201 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 11:25:22,201 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 11:25:22,201 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:22,213 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:22,226 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 11:25:22,422 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 11:25:26,977 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 11:25:26,977 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 11:25:27,069 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 11:25:27,069 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 11:25:27,069 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 11:25:27,069 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 11:25:36,837 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 11:25:36,837 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 11:25:36,837 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 11:25:36,852 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 11:25:37,455 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 11:25:37,503 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_kJshnKHRg9bL
2025-05-16 11:25:37,595 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:25:37,596 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:25:37,889 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_zc2Ydtu8u4N2
2025-05-16 11:25:37,889 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 11:25:37,890 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 11:25:37,958 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 11:25:37,969 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 11:25:38,162 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 11:25:38,162 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 11:25:38,163 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 11:25:38,163 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 11:25:38,163 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 11:25:38,164 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 11:25:38,164 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 11:25:38,164 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 11:25:38,164 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 11:25:38,168 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 11:25:38,169 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 11:25:38,170 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_kJshnKHRg9bL.
2025-05-16 11:26:08,634 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 11:26:09,816 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-16 11:26:57,943 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 11:26:57,943 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 11:26:57,943 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 11:26:57,943 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 11:26:57,943 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 11:26:57,943 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-16 11:26:58,478 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 11:26:58,478 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 11:26:58,478 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 11:26:58,478 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 11:26:58,508 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 11:26:58,762 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 11:26:58,762 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 11:26:58,762 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 11:26:58,762 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 11:26:58,762 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 11:26:58,775 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 11:26:58,778 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:26:58,778 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:26:58,778 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:26:58,778 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:26:58,778 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:26:58,778 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:26:58,778 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:26:58,778 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:26:58,788 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:26:58,788 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:26:58,789 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:26:58,789 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:26:58,789 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:26:58,790 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:26:58,790 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:26:58,790 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:26:58,791 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 11:26:58,967 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 11:27:03,523 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 11:27:03,528 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 11:27:03,582 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 11:27:03,582 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 11:27:03,583 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 11:27:03,583 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 11:27:04,148 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 11:27:04,148 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 11:27:04,148 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 11:27:04,148 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 11:27:04,589 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 11:27:04,623 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_wZL6i3M3Y5eT
2025-05-16 11:27:04,696 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:27:04,697 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:27:04,955 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_wqVyM538hNJW
2025-05-16 11:27:04,955 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 11:27:04,955 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 11:27:04,990 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 11:27:05,000 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 11:27:05,127 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 11:27:05,127 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 11:27:05,127 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 11:27:05,128 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 11:27:05,128 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 11:27:05,128 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 11:27:05,129 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 11:27:05,129 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 11:27:05,129 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 11:27:05,132 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 11:27:05,135 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 11:27:05,136 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_wZL6i3M3Y5eT.
2025-05-16 11:27:05,136 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 11:27:07,754 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:27:15,424 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:27:27,384 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:27:40,114 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:27:49,735 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:08,218 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:09,431 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:32,905 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 11:28:32,932 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: playground-4i9P-gkbI, Job: AJ_Chps8AzvtiZq
2025-05-16 11:28:32,975 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:28:32,976 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:28:33,427 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_aBJDFsrovD5j
2025-05-16 11:28:33,427 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 11:28:33,428 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 11:28:33,439 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 11:28:33,450 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 11:28:33,574 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 11:28:33,575 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 11:28:33,576 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 11:28:33,577 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 11:28:33,578 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 11:28:33,578 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 11:28:33,580 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 11:28:33,582 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 11:28:33,582 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 11:28:33,588 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 11:28:33,590 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 11:28:33,591 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_Chps8AzvtiZq.
2025-05-16 11:28:33,592 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 11:28:36,074 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:36,170 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:36,940 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:36,979 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:45,292 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:45,318 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:28:56,637 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:29:09,015 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:29:28,285 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:29:38,434 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:30:15,525 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:30:29,665 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:31:49,213 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:31:49,997 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:31:51,221 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:31:59,662 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:32:00,209 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:32:03,073 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:32:09,576 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:32:50,843 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:33:00,088 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-16 11:33:20,221 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-16 11:33:20,224 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-16 11:33:20,225 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-16 11:33:20,225 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-16 11:43:11,641 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 11:43:11,641 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 11:43:11,641 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 11:43:11,641 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 11:43:11,641 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 11:43:12,186 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 11:43:12,186 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 11:43:12,186 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 11:43:12,186 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 11:43:12,194 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 11:43:12,486 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 11:43:12,486 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 11:43:12,487 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 11:43:12,487 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 11:43:12,487 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 11:43:12,487 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:12,499 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:12,506 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:12,506 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:12,506 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:12,506 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:12,506 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:12,506 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:12,506 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 11:43:12,661 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 11:43:17,225 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 11:43:17,226 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 11:43:17,306 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 11:43:17,306 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 11:43:17,306 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 11:43:17,306 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 11:43:23,882 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 11:43:23,884 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 11:43:23,888 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 11:43:23,890 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 11:43:25,316 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 11:43:25,346 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_Ayg8VkmwDyrC
2025-05-16 11:43:25,395 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 11:43:25,396 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 11:43:25,734 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_KYRTCgJ4PDUf
2025-05-16 11:43:25,735 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 11:43:25,736 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 11:43:25,778 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 11:43:25,788 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 11:43:25,909 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 11:43:25,909 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 11:43:25,910 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 11:43:25,910 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 11:43:25,911 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 11:43:25,911 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 11:43:25,912 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 11:43:25,912 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 11:43:25,913 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 11:43:25,916 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 11:43:25,917 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 11:43:25,918 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_Ayg8VkmwDyrC.
2025-05-16 11:43:25,919 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 11:43:28,685 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:43:29,606 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:43:33,251 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:43:35,459 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:43:42,641 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:43:43,004 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:44:02,134 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 11:44:24,608 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:00:02,078 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:00:02,078 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:00:02,078 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:00:02,078 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:00:02,078 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:00:02,597 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-16 12:00:02,597 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:00:02,597 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:00:02,597 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:00:02,602 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:00:02,868 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-16 12:00:02,868 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:00:02,868 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:00:02,877 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:00:02,877 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:00:02,882 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:02,889 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:02,898 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:02,898 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:00:03,058 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:00:07,619 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:00:07,619 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:00:07,674 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:00:07,675 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:00:07,675 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:00:07,675 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:00:15,262 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:00:15,262 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:00:15,268 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:00:15,277 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:00:15,741 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 12:00:15,763 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_m72WwyWGPUwf
2025-05-16 12:00:15,858 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:00:15,859 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:00:16,101 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_PW4mwLFya63S
2025-05-16 12:00:16,103 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 12:00:16,104 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized (model: nova-2, language: multi).
2025-05-16 12:00:16,166 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized (model: gpt-4o-mini).
2025-05-16 12:00:16,166 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] CRITICAL ERROR initializing plugins: TTS.__init__() got an unexpected keyword argument 'language'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1473, in entrypoint
    tts_plugin = deepgram.TTS(model="aura-ang", language="en-IN", api_key=DEEPGRAM_API_KEY_ENV)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TTS.__init__() got an unexpected keyword argument 'language'
2025-05-16 12:04:21,869 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-16 12:04:21,869 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-16 12:04:21,869 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-16 12:04:21,869 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 12:04:51,891 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-16 12:04:51,892 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-16 12:04:51,946 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-100' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-16 12:04:56,399 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:04:56,399 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:04:56,399 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:04:56,399 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:04:56,399 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:04:56,900 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-16 12:04:56,900 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:04:56,900 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:04:56,900 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:04:56,931 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:04:57,181 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-16 12:04:57,181 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:04:57,181 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:04:57,181 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:04:57,181 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:04:57,199 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:04:57,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:04:57,201 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:04:57,397 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:05:01,954 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:05:01,954 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:05:02,010 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:05:02,010 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:05:02,010 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:05:02,010 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:05:10,375 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-16 12:05:10,375 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-16 12:05:10,409 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-100' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 6 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-16 12:05:13,433 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:05:13,433 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:05:13,433 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:05:13,433 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:05:13,433 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:05:13,964 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-16 12:05:13,965 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:05:13,965 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:05:13,965 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:05:13,978 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:05:14,255 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-16 12:05:14,255 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:05:14,255 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:05:14,256 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:05:14,257 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:05:14,261 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:14,266 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:14,266 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:05:14,429 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:05:18,988 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:05:18,988 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:05:19,035 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:05:19,035 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:05:19,035 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:05:19,036 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:05:19,233 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:05:19,233 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:05:19,233 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:05:19,233 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:05:19,731 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 12:05:19,754 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_4GHxBerHyL3V
2025-05-16 12:05:19,858 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:05:19,860 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:05:20,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_eiDANG99epKG
2025-05-16 12:05:20,048 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 12:05:20,048 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized (model: nova-2, language: multi).
2025-05-16 12:05:20,083 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized (model: gpt-4o-mini).
2025-05-16 12:05:20,083 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram TTS plugin initialized (model: aura-ang, language: en-IN).
2025-05-16 12:05:20,203 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 12:05:20,203 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 12:05:20,204 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 12:05:20,204 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 12:05:20,205 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 12:05:20,205 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 12:05:20,205 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 12:05:20,206 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 12:05:20,209 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 12:05:20,210 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 12:05:20,212 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_4GHxBerHyL3V.
2025-05-16 12:05:20,212 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 12:05:22,467 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:05:23,509 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=c165f60d81e0, body=None)
2025-05-16 12:05:23,962 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=48ae4da4ff64, body=None)
2025-05-16 12:05:26,262 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=23cd4e49478b, body=None)
2025-05-16 12:05:28,547 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=27ddd1c7f6ff, body=None)
2025-05-16 12:05:28,554 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=27ddd1c7f6ff, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 146, in _inference_task
    async for audio_frame in tts_node:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 493, in tts_node
    async for ev in stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 448, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 309, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to synthesize speech after 4 attempts
2025-05-16 12:05:28,611 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-16 12:11:11,364 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:11:11,364 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:11:11,364 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:11:11,364 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:11:11,364 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:11:11,875 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-16 12:11:11,875 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:11:11,884 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:11:11,884 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:11:11,904 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:11:12,165 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-16 12:11:12,165 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:11:12,165 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:11:12,165 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:11:12,165 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:11:12,174 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:11:12,181 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:12,181 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:12,181 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:12,181 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:12,181 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:12,181 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:12,184 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:12,184 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:11:12,349 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:11:16,917 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:11:16,917 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:11:16,978 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:11:16,984 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:11:16,984 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:11:16,984 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:11:23,963 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:11:23,964 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:11:23,966 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:11:23,967 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:11:24,722 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 12:11:24,754 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_FY9H9HGdJqSi
2025-05-16 12:11:24,837 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:11:24,838 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:11:25,176 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_tjVQsjToTnFx
2025-05-16 12:11:25,177 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 12:11:25,178 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized (model: nova-2, language: multi).
2025-05-16 12:11:25,228 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized (model: gpt-4o-mini).
2025-05-16 12:11:25,228 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram TTS plugin initialized (model: aura-ang, language: en-IN).
2025-05-16 12:11:25,347 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 12:11:25,347 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 12:11:25,348 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 12:11:25,348 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 12:11:25,348 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 12:11:25,349 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 12:11:25,349 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 12:11:25,349 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 12:11:25,353 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 12:11:25,354 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 12:11:25,354 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_FY9H9HGdJqSi.
2025-05-16 12:11:25,355 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 12:11:27,483 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:11:28,419 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=7ba636f3ed94, body=None)
2025-05-16 12:11:28,765 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=b6f0aa832138, body=None)
2025-05-16 12:11:31,021 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=05d458357d35, body=None)
2025-05-16 12:11:34,347 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:11:35,144 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=0df1910446aa, body=None)
2025-05-16 12:11:35,504 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=0cf15c80b58e, body=None)
2025-05-16 12:11:37,199 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:11:37,471 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=097e7b3aadaf, body=None)
2025-05-16 12:11:37,830 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=badeb3945a22, body=None)
2025-05-16 12:11:40,097 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 391, in _run
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/speak?encoding=linear16&model=aura-ang&sample_rate=24000&mip_opt_out=false'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 301, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\tts.py", line 428, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Invalid response status (status_code=400, request_id=ffbbd09f0a8b, body=None)
2025-05-16 12:12:22,476 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-16 12:12:22,476 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-16 12:12:22,477 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-16 12:12:40,166 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:12:40,166 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:12:40,167 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:12:40,167 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:12:40,167 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:12:40,171 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-16 12:12:40,705 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 12:12:40,705 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:12:40,705 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:12:40,705 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:12:40,712 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:12:40,973 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 12:12:40,973 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:12:40,973 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:12:40,973 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:12:40,973 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:12:40,987 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:12:40,988 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:12:40,988 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:12:40,988 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:12:40,988 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:12:40,994 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:12:40,994 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:12:40,995 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:12:40,996 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:12:40,996 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:12:41,129 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:12:45,729 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:12:45,729 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:12:45,787 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:12:45,787 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:12:45,787 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:12:45,787 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:12:45,963 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:12:45,963 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:12:45,978 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:12:45,980 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:13:04,625 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:13:04,625 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:13:04,625 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:13:04,625 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:14:26,594 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:14:26,594 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:14:26,594 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:14:26,594 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:14:26,594 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:14:26,598 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-16 12:14:27,208 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 12:14:27,208 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:14:27,209 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:14:27,209 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:14:27,247 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:14:27,505 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 12:14:27,513 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:14:27,513 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:14:27,513 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:14:27,513 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:14:27,513 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:14:27,525 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:27,525 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:27,525 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:27,526 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:27,526 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:27,527 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:27,527 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:27,528 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:27,530 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:27,530 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:27,530 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:27,530 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:27,530 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:27,530 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:27,533 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:27,533 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:27,533 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:14:27,720 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:14:32,266 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:14:32,266 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:14:32,327 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:14:32,328 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:14:32,328 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:14:32,329 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:14:47,867 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:14:47,870 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:14:47,878 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:14:47,880 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:14:48,288 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 12:14:48,309 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_YrcLmYByv2Dg
2025-05-16 12:14:48,396 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:14:48,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:14:48,623 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_maDDCfL49ooM
2025-05-16 12:14:48,625 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 12:14:48,626 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 12:14:48,671 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 12:14:48,680 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 12:14:48,801 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 12:14:48,802 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 12:14:48,802 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 12:14:48,803 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 12:14:48,803 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 12:14:48,803 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 12:14:48,804 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 12:14:48,804 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 12:14:48,804 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 12:14:48,808 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 12:14:48,809 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 12:14:48,810 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_YrcLmYByv2Dg.
2025-05-16 12:14:48,810 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 12:14:52,307 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:14:58,106 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:15:05,706 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:15:14,100 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:17:04,394 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:17:06,070 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:17:33,805 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:23:57,945 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:24:01,186 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:24:04,197 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:24:47,140 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:25:25,476 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:31:49,053 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:33:16,531 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:37:48,143 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:37:48,143 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:37:48,143 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:37:48,143 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:37:48,143 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:37:48,803 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 12:37:48,803 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:37:48,803 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:37:48,803 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:37:48,811 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:37:49,149 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 12:37:49,150 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:37:49,150 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:37:49,152 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:37:49,152 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:37:49,156 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:37:49,162 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:37:49,163 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:37:49,163 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:37:49,164 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:37:49,164 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:37:49,164 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:37:49,165 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:37:49,165 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:37:49,168 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:37:49,168 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:37:49,168 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:37:49,169 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:37:49,169 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:37:49,169 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:37:49,169 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:37:49,170 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:37:49,174 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:37:49,311 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:37:53,835 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:37:53,835 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:37:53,898 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:37:53,899 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:37:53,899 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:37:53,900 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:37:56,954 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:37:56,955 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:37:56,957 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:37:56,958 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:39:22,670 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:39:22,670 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:39:22,670 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:39:22,670 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:39:22,670 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:39:23,189 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 12:39:23,189 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:39:23,189 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:39:23,189 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:39:23,213 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:39:23,477 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 12:39:23,477 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:39:23,477 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:39:23,477 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:39:23,477 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:39:23,494 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:39:23,497 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:39:23,497 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:39:23,497 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:39:23,502 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:39:23,502 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:39:23,503 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:39:23,503 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:39:23,504 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:39:23,506 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:39:23,507 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:39:23,507 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:39:23,507 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:39:23,507 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:39:23,507 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:39:23,507 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:39:23,507 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:39:23,507 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:39:23,635 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:39:28,226 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:39:28,226 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:39:28,279 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:39:28,279 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:39:28,279 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:39:28,279 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:41:22,704 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:41:22,704 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:41:22,718 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:41:22,720 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:41:23,143 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 12:41:23,166 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_m8x9Ugju8scJ
2025-05-16 12:41:23,215 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:41:23,216 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:41:23,491 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_FDgyjvKBoLrs
2025-05-16 12:41:23,492 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 12:41:23,493 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 12:41:23,537 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 12:41:23,547 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 12:41:23,668 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 12:41:23,669 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 12:41:23,670 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 12:41:23,671 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 1479, in entrypoint
    session = AgentSession(stt=stt_plugin, llm=llm_plugin, tts=tts_plugin, vad=vad_plugin, turn_detection=turn_detector,)
                                                                                                          ^^^^^^^^^^^^^
NameError: name 'turn_detector' is not defined
2025-05-16 12:46:08,244 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-16 12:46:08,244 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-16 12:46:08,266 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-16 12:46:11,235 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:46:11,235 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:46:11,235 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:46:11,235 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:46:11,235 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:46:11,801 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 12:46:11,801 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:46:11,801 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:46:11,801 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:46:11,819 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:46:12,095 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 12:46:12,095 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:46:12,095 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:46:12,095 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:46:12,105 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:46:12,105 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:46:12,105 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 12:46:13,628 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:46:13,628 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:46:13,628 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:46:13,628 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:46:13,636 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 12:46:13,636 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 12:46:13,636 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 12:46:13,636 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 12:46:16,829 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:46:16,829 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:46:16,887 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:46:16,887 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:46:16,887 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:46:16,887 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:46:26,254 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:46:26,254 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:46:26,256 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:46:26,256 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:46:31,486 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 12:46:31,486 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 12:46:31,486 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 12:46:31,491 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:46:31,491 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:46:31,491 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:46:31,495 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:46:31,496 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:46:31,496 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:46:31,496 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:46:31,497 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:46:31,499 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:46:31,499 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:46:31,500 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:46:31,500 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:46:31,500 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:46:31,500 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:46:31,501 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:46:31,501 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:46:31,506 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:46:31,645 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:48:19,423 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:48:19,423 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:48:19,423 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:48:19,423 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:48:19,424 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 12:48:19,984 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 12:48:19,984 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 12:48:19,985 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 12:48:19,985 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 12:48:19,996 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 12:48:20,283 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 12:48:20,283 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 12:48:20,283 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 12:48:20,283 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 12:48:20,283 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 12:48:20,283 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 12:48:20,283 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 12:48:21,902 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:48:21,902 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:48:21,902 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:48:21,902 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:48:21,902 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 12:48:21,902 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 12:48:21,902 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 12:48:21,902 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 12:48:25,003 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 12:48:25,003 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 12:48:25,057 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 12:48:25,057 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 12:48:25,057 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 12:48:25,057 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 12:48:25,233 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:48:25,233 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:48:25,233 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 12:48:25,233 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 12:48:25,980 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 12:48:25,980 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 12:48:25,980 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 12:48:25,982 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:25,982 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:25,982 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:25,988 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:25,988 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:25,989 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:25,989 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:25,989 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:25,992 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:25,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:25,993 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:25,994 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:25,994 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:25,995 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:25,995 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:25,995 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:25,999 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 12:48:26,132 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 12:48:26,169 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 12:48:26,194 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_z9dDRiZCV6HR
2025-05-16 12:48:26,267 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 12:48:26,268 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 12:48:26,486 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_kxCgVSPcmYta
2025-05-16 12:48:26,488 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 12:48:26,650 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-16 12:48:26,651 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 12:48:26,683 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 12:48:26,693 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 12:48:26,831 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 12:48:26,832 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 12:48:26,832 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 12:48:26,832 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 12:48:26,833 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 12:48:26,833 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 12:48:26,834 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 12:48:26,834 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 12:48:26,834 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 12:48:26,838 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 12:48:26,839 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 12:48:26,840 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_z9dDRiZCV6HR.
2025-05-16 12:48:26,840 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 12:48:28,533 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:48:28,533 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:48:28,534 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:48:36,956 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:48:37,041 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:48:37,042 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:48:50,124 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:48:50,200 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:48:50,201 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:48:52,876 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:48:52,919 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:48:52,920 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:48:57,885 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:48:57,886 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:48:57,887 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:49:00,858 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:49:00,881 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:49:00,881 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:49:13,730 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:49:13,732 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:49:13,732 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:49:21,875 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:49:21,940 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:49:21,941 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:49:49,303 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:49:49,304 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:49:49,305 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:49:58,817 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:49:58,819 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:49:58,820 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:51:49,991 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:51:49,994 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:51:49,995 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:51:51,731 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:51:51,773 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:51:51,774 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:51:55,093 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:51:55,095 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:51:55,096 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:52:08,246 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:52:08,354 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:52:08,354 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:52:11,236 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:52:11,333 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:52:11,333 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:52:15,625 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:52:15,626 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:52:15,627 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:53:14,732 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:53:14,733 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:53:14,733 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:53:19,035 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:53:19,045 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:53:19,045 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:54:27,429 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:54:27,430 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:54:27,430 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:54:52,378 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:54:52,380 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:54:52,381 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 12:55:06,072 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 12:55:06,073 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 12:55:06,074 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:03:09,927 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:09,973 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:03:09,974 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:03:11,377 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:11,426 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:03:11,426 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:03:25,786 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:25,787 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:03:25,787 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:03:28,528 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:29,447 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:29,505 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:03:29,506 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:03:35,289 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:35,289 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:03:35,290 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:03:36,135 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:36,136 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:03:36,136 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:03:47,794 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:47,796 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:03:47,797 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:03:55,561 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:03:55,671 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:03:55,671 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:04:48,379 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:04:48,474 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:04:48,474 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:04:56,427 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:04:56,472 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:04:56,472 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:05:04,612 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:05:06,164 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:05:06,245 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:05:06,246 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:05:07,118 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:05:08,038 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:05:08,081 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:05:08,081 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:05:24,479 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:05:24,480 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:05:24,480 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:05:53,669 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:05:53,722 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:05:53,722 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:05:55,850 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:05:56,899 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:05:56,933 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:05:56,934 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:06:00,084 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:06:00,084 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:06:00,085 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:06:02,449 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:06:03,595 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:06:04,688 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:06:04,769 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:06:04,771 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:09:47,504 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:09:47,571 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:09:47,572 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:10:01,616 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:10:01,616 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:10:01,618 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:13:17,771 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:13:18,843 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:13:18,843 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:13:54,311 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:13:54,331 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:13:54,331 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:22:57,646 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:22:57,646 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:22:57,646 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:22:57,646 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:22:57,646 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 13:22:58,191 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 13:22:58,192 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 13:22:58,192 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 13:22:58,192 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 13:22:58,204 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 13:22:58,486 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 13:22:58,486 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 13:22:58,486 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 13:22:58,488 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 13:22:58,489 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 13:22:58,493 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 13:22:58,493 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 13:23:00,036 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:23:00,037 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:23:00,037 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:23:00,037 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:23:00,040 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 13:23:00,041 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 13:23:00,040 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 13:23:00,041 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 13:23:03,213 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 13:23:03,213 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 13:23:03,291 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:23:03,291 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:23:03,291 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:23:03,291 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:23:03,708 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 13:23:03,708 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 13:23:03,708 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 13:23:03,708 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 13:23:04,525 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 13:23:04,526 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 13:23:04,525 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 13:23:04,532 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:23:04,532 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:23:04,533 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:23:04,533 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:23:04,534 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:23:04,534 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:23:04,535 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:23:04,535 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:23:04,538 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:23:04,538 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:23:04,539 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:23:04,539 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:23:04,539 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:23:04,539 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:23:04,540 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:23:04,540 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:23:04,545 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 13:23:04,671 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 13:24:27,360 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:24:27,360 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:24:27,360 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:24:27,360 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:24:27,360 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 13:24:27,897 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 13:24:27,898 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 13:24:27,898 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 13:24:27,898 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 13:24:27,918 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 13:24:28,214 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 13:24:28,214 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 13:24:28,214 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 13:24:28,214 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 13:24:28,214 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 13:24:28,214 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 13:24:28,214 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 13:24:29,759 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:24:29,759 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:24:29,759 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:24:29,759 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:24:29,775 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 13:24:29,775 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 13:24:29,775 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 13:24:29,775 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 13:24:32,932 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 13:24:32,932 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 13:24:32,973 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:24:32,973 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:24:32,973 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:24:32,973 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:24:33,862 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 13:24:33,862 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 13:24:33,862 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 13:24:33,867 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:33,868 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:33,869 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:33,869 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:33,869 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:33,869 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:33,870 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:33,870 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:33,872 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:33,873 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:33,873 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:33,873 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:33,873 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:33,874 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:33,875 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:33,875 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:33,879 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 13:24:34,002 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 13:24:38,183 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 13:24:38,183 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 13:24:38,183 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 13:24:38,183 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 13:24:38,627 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 13:24:38,650 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_95tGqYSWLogf
2025-05-16 13:24:38,728 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:24:38,729 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:24:38,968 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_NBqqpzwioVJ8
2025-05-16 13:24:38,971 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 13:24:39,139 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-16 13:24:39,140 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 13:24:39,171 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 13:24:39,181 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 13:24:39,316 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 13:24:39,316 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 13:24:39,317 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 13:24:39,317 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 13:24:39,317 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 13:24:39,318 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 13:24:39,318 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 13:24:39,318 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 13:24:39,319 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 13:24:39,322 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 13:24:39,323 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 13:24:39,324 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_95tGqYSWLogf.
2025-05-16 13:24:39,325 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 13:24:41,139 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:24:41,139 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:24:41,139 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:24:51,081 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:24:51,082 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:24:51,082 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:24:55,391 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:24:55,393 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:24:55,394 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:25:04,182 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:25:04,183 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:25:04,183 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:25:09,200 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:25:09,202 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:25:09,203 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:25:34,866 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:25:34,867 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:25:34,867 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:25:40,968 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:25:40,986 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:25:40,986 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:25:43,673 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:25:43,689 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:25:43,690 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:25:48,609 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:25:48,611 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:25:48,611 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:25:51,724 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:25:51,743 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:25:51,744 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:25:54,862 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:25:54,865 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:25:54,867 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:26:02,128 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:26:02,130 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:26:02,131 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:26:19,325 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:26:19,326 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:26:19,327 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:31:29,874 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:31:29,876 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:31:29,877 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:36:24,160 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:36:24,161 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:36:24,162 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:41:10,876 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:41:10,877 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:41:10,877 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:43:11,418 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:43:11,418 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:43:11,419 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:55:34,316 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:55:34,316 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:55:34,316 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:55:34,316 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:55:34,316 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 13:55:34,832 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 13:55:34,832 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 13:55:34,832 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 13:55:34,832 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 13:55:34,854 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 13:55:35,110 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 13:55:35,110 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 13:55:35,110 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 13:55:35,110 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 13:55:35,110 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 13:55:35,127 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 13:55:35,127 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 13:55:36,693 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:55:36,693 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:55:36,694 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:55:36,694 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:55:36,697 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 13:55:36,697 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 13:55:36,697 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 13:55:36,697 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 13:55:39,885 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 13:55:39,885 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 13:55:39,944 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 13:55:39,945 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 13:55:39,945 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 13:55:39,946 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 13:55:40,929 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 13:55:40,929 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 13:55:40,929 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:40,946 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:40,964 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 13:55:41,079 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 13:55:45,654 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 13:55:45,654 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 13:55:45,654 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 13:55:45,654 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 13:55:47,123 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 13:55:47,141 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_bejSXNrDnazD
2025-05-16 13:55:47,220 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 13:55:47,221 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 13:55:47,441 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_kbyCbxBKkcpx
2025-05-16 13:55:47,442 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 13:55:47,595 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-16 13:55:47,595 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 13:55:47,626 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 13:55:47,636 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 13:55:47,789 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 13:55:47,790 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 13:55:47,790 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 13:55:47,791 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 13:55:47,791 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 13:55:47,792 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 13:55:47,793 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 13:55:47,793 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 13:55:47,793 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 13:55:47,796 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 13:55:47,798 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 13:55:47,798 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_bejSXNrDnazD.
2025-05-16 13:55:47,799 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 13:55:51,315 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:55:51,356 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:55:51,357 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:56:02,266 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:56:02,288 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:56:02,289 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:56:30,445 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:56:30,527 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:56:30,527 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:56:50,349 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:56:50,351 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:56:50,352 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:56:53,010 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:56:53,046 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:56:53,047 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:57:19,623 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:57:19,676 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:57:19,677 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 13:57:29,854 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 13:57:29,854 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 13:57:29,855 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:11,076 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:11,127 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:11,128 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:19,806 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:19,808 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:19,809 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:22,292 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:22,868 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:22,879 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:22,879 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:25,635 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:25,636 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:25,637 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:26,888 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:26,947 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:26,947 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:36,619 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:36,620 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:36,621 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:38,725 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:38,780 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:38,781 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:48,415 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:48,963 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:49,976 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:49,976 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:50,113 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:50,115 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:50,115 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:04:55,569 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:04:55,586 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:04:55,586 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:07:03,022 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:07:04,073 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:07:04,135 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:07:04,135 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:07:36,980 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:07:37,058 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:07:37,059 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:07:42,351 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:07:42,355 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:07:42,356 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:07:44,753 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:07:44,755 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:07:44,756 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:18:45,162 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:18:45,165 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:18:45,166 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:38:06,494 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:38:06,494 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:38:06,495 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:38:08,509 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:38:08,545 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:38:08,546 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:39:14,319 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:39:14,344 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:39:14,345 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:41:02,477 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:41:02,479 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:41:02,481 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:00,055 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:00,091 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:00,091 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:03,842 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:03,845 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:03,846 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:13,993 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:14,053 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:14,053 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:15,376 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:15,377 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:15,378 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:22,400 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:22,404 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:22,407 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:25,495 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:25,495 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:25,496 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:30,473 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:30,702 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:30,703 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:30,846 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:30,848 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:30,850 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:34,920 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:34,920 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:34,920 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:37,715 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:37,761 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:37,762 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:40,312 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:40,313 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:40,313 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:42,290 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:42,292 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:42,293 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:47,846 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:47,875 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:47,875 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:51,286 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:42:51,287 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:42:51,287 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:42:59,618 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:43:01,022 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:43:01,023 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 14:43:12,356 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 14:43:12,409 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 14:43:12,410 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:01:21,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:01:21,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:01:21,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:01:21,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:01:21,345 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 15:01:21,863 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 15:01:21,863 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 15:01:21,863 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 15:01:21,863 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 15:01:21,878 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 15:01:22,155 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 15:01:22,155 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 15:01:22,155 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 15:01:22,155 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 15:01:22,155 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 15:01:22,155 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 15:01:22,155 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 15:01:23,684 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:01:23,684 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:01:23,684 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:01:23,684 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:01:23,684 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 15:01:23,684 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 15:01:23,684 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 15:01:23,684 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 15:01:26,886 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 15:01:26,886 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 15:01:26,940 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:01:26,940 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:01:26,940 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:01:26,940 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:01:27,774 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 15:01:27,774 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 15:01:27,774 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:27,791 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:27,807 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 15:01:27,925 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 15:01:45,489 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 15:01:45,489 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 15:01:45,489 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 15:01:45,489 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 15:01:46,076 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 15:01:46,096 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_LWuj9XdZtPJM
2025-05-16 15:01:46,145 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:01:46,146 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:01:46,419 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_DYo98GnKkehc
2025-05-16 15:01:46,420 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 15:01:46,573 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-16 15:01:46,574 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 15:01:46,604 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 15:01:46,614 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 15:01:46,739 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 15:01:46,739 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 15:01:46,739 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 15:01:46,740 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 15:01:46,740 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 15:01:46,741 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 15:01:46,741 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 15:01:46,741 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will now manage audio/transcript/response turns.
2025-05-16 15:01:46,741 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 15:01:46,746 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 15:01:46,747 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 15:01:46,748 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_LWuj9XdZtPJM.
2025-05-16 15:01:46,748 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 15:01:52,571 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:01:52,571 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:01:52,573 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:01:54,851 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:01:54,852 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:01:54,853 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:02:02,796 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:02:02,797 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:02:02,797 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:02:04,014 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:02:04,014 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:02:04,015 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:02:06,378 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:02:06,379 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:02:06,379 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:02:18,425 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:02:18,427 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:02:18,428 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:02:25,840 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:02:25,842 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:02:25,843 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:02:34,423 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:02:34,435 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:02:34,435 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:02:45,130 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:02:45,150 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:02:45,151 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:09:01,661 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:09:01,662 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:09:01,662 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:09:06,648 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:09:11,014 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:09:11,015 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:09:41,737 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:09:41,757 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:09:41,757 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:10:05,844 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:10:05,844 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:10:05,845 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:10:47,523 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:10:51,079 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:10:51,080 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:10:53,547 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:10:53,548 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:10:53,548 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:10:57,763 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:10:57,763 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:10:57,764 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:10:58,177 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:10:58,178 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:10:58,178 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:11:00,339 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:01,324 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:03,195 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:11:03,195 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:11:22,561 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:22,562 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:11:22,562 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:11:25,207 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:26,310 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:26,776 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:26,812 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:11:26,812 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:11:27,999 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:28,470 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:11:28,471 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:11:28,482 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:28,483 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:11:28,483 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:11:28,497 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1484, in request
    response = await self._client.send(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 115, in connect_tcp
    stream: anyio.abc.ByteStream = await anyio.connect_tcp(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\anyio\_core\_sockets.py", line 239, in connect_tcp
    else ExceptionGroup("multiple connection attempts failed", oserrors)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: second argument (exceptions) must be a non-empty sequence

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 566, in _run
    self._oai_stream = stream = await self._client.chat.completions.create(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2028, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1516, in request
    raise APIConnectionError(request=request) from err
openai.APIConnectionError: Connection error.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 609, in _run
    raise APIConnectionError(retryable=retryable) from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-16 15:11:29,279 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:34,324 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:35,176 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:11:35,176 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:11:35,354 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:11:35,355 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:11:35,355 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:12:29,660 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:12:29,661 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:12:29,662 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:15:40,240 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:15:40,242 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:15:40,242 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:16:18,927 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:16:18,929 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:16:18,930 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:16:21,145 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:16:21,162 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:16:21,163 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:19:56,919 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:19:56,933 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:19:56,933 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:23:16,727 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:23:18,144 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:23:18,144 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:24:35,821 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:24:35,822 - livekit.plugins.turn_detector - WARNING - [job_thread_runner] - Language hi not supported by EOU model
2025-05-16 15:24:35,823 - livekit.agents - DEBUG - [job_thread_runner] - Turn detector does not support language hi
2025-05-16 15:35:17,038 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:35:17,038 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:35:17,038 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:35:17,038 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:35:17,038 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 15:35:17,568 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 15:35:17,568 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 15:35:17,568 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 15:35:17,568 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 15:35:17,588 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 15:35:17,858 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 15:35:17,858 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 15:35:17,858 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app...
2025-05-16 15:35:17,858 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 15:35:17,858 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 15:35:17,858 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 15:35:17,858 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 15:35:19,389 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:35:19,389 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:35:19,389 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:35:19,389 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:35:19,393 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 15:35:19,393 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 15:35:19,393 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 15:35:19,393 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 15:35:22,615 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 15:35:22,615 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 15:35:22,680 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:35:22,681 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:35:22,681 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:35:22,682 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:35:23,068 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 15:35:23,068 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 15:35:23,068 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 15:35:23,074 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:35:23,074 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:35:23,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:35:23,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:35:23,079 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:35:23,080 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:35:23,081 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:35:23,081 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:35:23,084 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:35:23,084 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:35:23,084 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:35:23,084 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:35:23,084 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:35:23,084 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:35:23,084 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:35:23,084 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:35:23,092 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 15:35:23,218 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 15:36:22,598 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:36:22,598 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:36:22,598 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:36:22,598 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:36:22,598 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 15:36:23,101 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 15:36:23,101 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 15:36:23,101 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 15:36:23,101 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 15:36:23,124 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 15:36:23,380 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 15:36:23,380 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 15:36:23,380 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app...
2025-05-16 15:36:23,380 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 15:36:23,380 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 15:36:23,395 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 15:36:23,395 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 15:36:24,874 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:36:24,874 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:36:24,874 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:36:24,874 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:36:24,874 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 15:36:24,874 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 15:36:24,874 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 15:36:24,874 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 15:36:28,154 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 15:36:28,154 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 15:36:28,200 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 15:36:28,213 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 15:36:28,213 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 15:36:28,213 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 15:36:28,363 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 15:36:28,363 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 15:36:28,363 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:36:28,363 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:36:28,378 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:36:28,378 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:36:28,383 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 15:36:28,529 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 15:39:43,026 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 15:39:43,026 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 15:39:43,026 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 15:39:43,044 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 15:39:44,429 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 15:39:44,456 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_jo6FyKuaQqkw
2025-05-16 15:39:44,505 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 15:39:44,506 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 15:39:44,764 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_7YYEM89WepVd
2025-05-16 15:39:44,764 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 15:39:44,765 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Using no turn detector (temporary workaround for Hindi).
2025-05-16 15:39:44,766 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-16 15:39:44,801 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-16 15:39:44,810 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-16 15:39:44,929 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-16 15:39:44,930 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-16 15:39:44,930 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Skipping problematic LLM direct test.
2025-05-16 15:39:44,931 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-16 15:39:44,931 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 15:39:44,932 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 15:39:44,932 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 15:39:44,932 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called.
2025-05-16 15:39:44,936 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 15:39:44,937 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-16 15:39:44,938 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished for job AJ_jo6FyKuaQqkw.
2025-05-16 15:39:44,938 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 15:44:00,748 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:44:02,799 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 15:44:11,586 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:00:19,834 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:04:59,636 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:06:51,635 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:07:39,682 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:07:40,688 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:07:49,751 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:08:11,289 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:08:11,552 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:08:40,341 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:08:42,650 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:08:43,925 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:10:11,521 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:10:23,993 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:10:36,766 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:10:45,568 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:13:36,431 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:13:44,833 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:14:04,740 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:14:06,792 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:14:17,176 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:14:21,549 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:16:27,540 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:17:24,058 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:17:26,822 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:17:33,430 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:17:34,639 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:17:40,088 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:17:43,246 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:20:56,991 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:23:04,986 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:32:46,485 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:32:47,441 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:32:55,745 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:33:00,706 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:33:06,285 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:33:11,974 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:33:21,224 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:33:34,330 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:33:36,505 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:33:46,250 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:33:48,012 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:34:03,125 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:34:06,169 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:34:09,705 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:34:25,676 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:34:52,137 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:35:06,034 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:35:28,685 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 16:35:53,053 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-16 16:35:53,053 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-16 16:35:53,054 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-16 16:35:53,076 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-16 16:35:53,078 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-16 16:35:53,078 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-16 16:35:53,423 - livekit.agents - ERROR - [LiveKitAgentWorker] - Error in _load_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 430, in _load_task
    self._worker_load = await asyncio.get_event_loop().run_in_executor(None, load_fnc)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 829, in run_in_executor
    executor.submit(func, *args), loop=self)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown
2025-05-16 16:35:53,470 - livekit.agents - ERROR - [LiveKitAgentWorker] - worker failed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 90, in _worker_run
    await worker.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 467, in run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 430, in _load_task
    self._worker_load = await asyncio.get_event_loop().run_in_executor(None, load_fnc)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 829, in run_in_executor
    executor.submit(func, *args), loop=self)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown
2025-05-16 16:35:53,501 - livekit.agents - INFO - [LiveKitAgentWorker] - draining worker
2025-05-16 16:35:53,502 - livekit.agents - INFO - [LiveKitAgentWorker] - shutting down worker
2025-05-16 16:35:53,661 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-4' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-16 16:36:05,348 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 16:36:05,348 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 16:36:05,348 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 16:36:05,348 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 16:36:05,348 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 16:36:05,891 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 16:36:05,891 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 16:36:05,891 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 16:36:05,891 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 16:36:05,898 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 16:36:06,168 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 16:36:06,168 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-16 16:36:06,168 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app...
2025-05-16 16:36:06,168 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 16:36:06,168 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 16:36:06,178 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 16:36:06,178 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-16 16:36:07,763 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 16:36:07,763 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 16:36:07,763 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 16:36:07,764 - __mp_main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 16:36:07,767 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 16:36:07,767 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 16:36:07,767 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-16 16:36:07,767 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-16 16:36:10,920 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 16:36:10,920 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 16:36:10,998 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 16:36:10,998 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 16:36:10,998 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 16:36:10,998 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 16:36:21,338 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 16:36:21,340 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-16 16:36:21,338 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-16 16:36:21,340 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 16:36:21,340 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 16:36:21,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 16:36:21,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 16:36:21,349 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 16:36:21,350 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 16:36:21,358 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 16:36:21,500 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 17:10:38,482 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 17:10:38,482 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 17:10:38,482 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 17:10:38,482 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 17:10:38,482 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-16 17:10:38,970 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-16 17:10:38,970 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-16 17:10:38,970 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-16 17:10:38,970 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-16 17:10:39,002 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-16 17:10:39,253 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process could be terminated.
2025-05-16 17:10:39,253 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-16 17:10:39,253 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-16 17:10:39,253 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-16 17:10:39,253 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-16 17:10:39,253 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-16 17:10:39,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:39,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:39,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:39,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:39,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:39,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:39,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:39,266 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:39,273 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:39,273 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:39,274 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:39,274 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:39,274 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:39,275 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:39,275 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:39,275 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:39,276 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-16 17:10:39,437 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-16 17:10:44,025 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-16 17:10:44,025 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-16 17:10:44,113 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-16 17:10:44,113 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-16 17:10:44,113 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-16 17:10:44,113 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-16 17:10:44,348 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 17:10:44,348 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 17:10:44,348 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-16 17:10:44,348 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-16 17:10:45,156 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-16 17:10:45,179 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_GC5Q4mFcfQP7
2025-05-16 17:10:45,244 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-16 17:10:45,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-16 17:10:45,461 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_gwzLnqnMijEL
2025-05-16 17:10:45,463 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-16 17:10:45,675 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All plugins initialized successfully.
2025-05-16 17:10:45,677 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-16 17:10:45,679 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list: [ChatMessage(id='item_3b4b2aaaaa79', type='message', role='user', content=['Hello, LLM. Confirm you are working by saying OK.'], interrupted=False, hash=None, created_at=1747395645.6791148)]
2025-05-16 17:10:45,680 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(chat_message_list) [POSITIONAL for messages]
2025-05-16 17:10:45,681 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created positionally: <livekit.agents.llm.chat_context.ChatContext object at 0x00000163B87AB190>
2025-05-16 17:10:45,681 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(chat_ctx=chat_ctx_for_test)
2025-05-16 17:10:45,682 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test with chat_ctx= FAILED: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 932, in entrypoint
    async for chunk in await llm_plugin.chat(chat_ctx=chat_ctx_for_test):
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-16 17:10:45,685 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function. !!!
2025-05-16 17:10:45,685 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-16 17:10:45,685 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created.
2025-05-16 17:10:45,685 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-16 17:10:45,687 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-16 17:10:45,687 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-16 17:10:45,688 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-16 17:10:45,688 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-16 17:10:45,842 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-16 17:10:45,844 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_GC5Q4mFcfQP7.
2025-05-16 17:10:45,845 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-16 17:10:53,358 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:10:54,199 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:10:55,046 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:11:03,012 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:11:11,270 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:11:12,213 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:11:39,310 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:11:40,616 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:11:46,647 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:11:52,615 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:12:00,424 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:12:09,911 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:12:18,839 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:12:23,888 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:17:34,155 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:20:08,719 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:24:05,820 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:26:25,759 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:26:28,522 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:26:28,918 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:26:57,526 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:27:30,302 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:36:23,354 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:40:42,308 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:42:20,790 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:43:29,332 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:43:34,755 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:43:48,671 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:45:03,088 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:45:19,823 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:45:32,252 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:47:36,285 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:47:49,671 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:48:21,246 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-16 17:58:23,167 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 12:38:48,242 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 12:38:48,242 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 12:41:33,198 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 12:41:33,198 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 12:41:33,749 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 12:41:33,749 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 12:41:33,749 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 12:41:33,749 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 12:41:33,749 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 12:41:33,749 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 12:41:34,033 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 12:41:34,033 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['multilingual_agent.py', 'start']
2025-05-17 12:41:34,046 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 12:41:34,046 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 12:41:34,046 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 12:41:34,046 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 12:41:34,046 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 12:41:35,623 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:41:35,623 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:41:35,623 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:41:35,623 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:41:38,774 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 12:41:38,774 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 12:41:53,337 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:41:53,337 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 12:41:53,337 - livekit.agents - ERROR - [LiveKitAgentWorker] - worker failed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 90, in _worker_run
    await worker.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 402, in run
    await self._http_server.start()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1491, in create_server
    infos = await tasks.gather(*fs)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1423, in _create_server_getaddrinfo
    infos = await self._ensure_resolved((host, port), family=family,
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1419, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 867, in getaddrinfo
    return await self.run_in_executor(
                 ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 829, in run_in_executor
    executor.submit(func, *args), loop=self)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown
2025-05-17 12:41:53,337 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:41:53,390 - livekit.agents - INFO - [LiveKitAgentWorker] - draining worker
2025-05-17 12:41:53,391 - livekit.agents - INFO - [LiveKitAgentWorker] - shutting down worker
2025-05-17 12:41:53,393 - __main__ - ERROR - [LiveKitAgentWorker] - !!! run_worker: CRITICAL ERROR during cli.run_app execution: 
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2127, in run_worker
    cli.run_app(worker_options)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\cli.py", line 247, in run_app
    cli()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1363, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1830, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 794, in invoke
    return callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\cli.py", line 72, in start
    _run.run_worker(args)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 112, in run_worker
    loop.run_until_complete(worker.aclose())
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 98, in run_until_complete
    return f.result()
           ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 571, in aclose
    assert self._close_future is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-05-17 12:41:53,439 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Restored original sys.argv.
2025-05-17 12:41:53,440 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: LiveKit Agent Worker `cli.run_app` finished. ---
2025-05-17 12:41:53,440 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Function execution complete or terminated. ---
2025-05-17 12:43:30,044 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 12:43:30,044 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 12:43:30,603 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 12:43:30,603 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 12:43:30,603 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 12:43:30,603 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 12:43:30,603 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 12:43:30,603 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 12:43:30,928 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 12:43:30,928 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['multilingual_agent.py', 'start']
2025-05-17 12:43:30,928 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 12:43:30,929 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 12:43:30,930 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 12:43:30,934 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 12:43:30,934 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 12:43:32,470 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:43:32,472 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:43:32,470 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:43:32,472 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:43:35,629 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 12:43:35,630 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 12:43:36,549 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:43:36,549 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 12:43:36,549 - livekit.agents - ERROR - [LiveKitAgentWorker] - worker failed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 90, in _worker_run
    await worker.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 402, in run
    await self._http_server.start()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\http_server.py", line 27, in start
    self._server = await self._loop.create_server(handler, self._host, self._port)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1491, in create_server
    infos = await tasks.gather(*fs)
            ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1423, in _create_server_getaddrinfo
    infos = await self._ensure_resolved((host, port), family=family,
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1419, in _ensure_resolved
    return await loop.getaddrinfo(host, port, family=family, type=type,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 867, in getaddrinfo
    return await self.run_in_executor(
                 ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 829, in run_in_executor
    executor.submit(func, *args), loop=self)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown
2025-05-17 12:43:36,549 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:43:36,567 - livekit.agents - INFO - [LiveKitAgentWorker] - draining worker
2025-05-17 12:43:36,568 - livekit.agents - INFO - [LiveKitAgentWorker] - shutting down worker
2025-05-17 12:43:36,571 - __main__ - ERROR - [LiveKitAgentWorker] - !!! run_worker: CRITICAL ERROR during cli.run_app execution: 
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2127, in run_worker
    cli.run_app(worker_options)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\cli.py", line 247, in run_app
    cli()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1363, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1830, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\click\core.py", line 794, in invoke
    return callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\cli.py", line 72, in start
    _run.run_worker(args)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 112, in run_worker
    loop.run_until_complete(worker.aclose())
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 98, in run_until_complete
    return f.result()
           ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 203, in result
    raise self._exception.with_traceback(self._exception_tb)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 571, in aclose
    assert self._close_future is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-05-17 12:43:36,576 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Restored original sys.argv.
2025-05-17 12:43:36,576 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: LiveKit Agent Worker `cli.run_app` finished. ---
2025-05-17 12:43:36,576 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Function execution complete or terminated. ---
2025-05-17 12:44:37,091 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-4' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=SystemExit(1)>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1206, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1178, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1142, in _find_and_load_unlocked
ModuleNotFoundError: No module named 'multilingual_agent'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\config.py", line 435, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\importer.py", line 24, in import_from_string
    raise ImportFromStringError(message.format(module_str=module_str))
uvicorn.importer.ImportFromStringError: Could not import module "multilingual_agent".

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2186, in <module>
    uvicorn.run(
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 70, in serve
    await self._serve(sockets)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 77, in _serve
    config.load()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\config.py", line 438, in load
    sys.exit(1)
SystemExit: 1
2025-05-17 12:47:14,057 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 12:47:14,057 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 12:47:14,619 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 12:47:14,619 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 12:47:14,619 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 12:47:14,619 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 12:47:14,619 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 12:47:14,619 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 12:47:14,914 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 12:47:14,914 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 12:47:14,914 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 12:47:14,914 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 12:47:14,914 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 12:47:14,928 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 12:47:14,929 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 12:47:16,489 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:47:16,489 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:47:16,489 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:47:16,489 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:47:19,653 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 12:47:19,653 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 12:47:20,348 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:47:20,348 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 12:47:20,348 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:20,348 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:20,364 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:20,364 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:20,364 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:20,364 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:20,364 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:20,365 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:20,365 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:20,369 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 12:47:20,542 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 12:47:21,934 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 12:47:21,935 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 12:47:21,939 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 12:47:21,940 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 12:47:22,404 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 12:47:22,434 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_WtEjKzm4F9q7
2025-05-17 12:47:22,467 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:47:22,469 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:47:22,744 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_KuXNWYQi7Qpr
2025-05-17 12:47:22,745 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 12:47:22,745 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 12:47:22,812 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 12:47:22,824 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: arya.
2025-05-17 12:47:23,001 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 12:47:23,155 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 12:47:23,156 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 12:47:23,156 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2009, in entrypoint
    initial_prompts=[voice.TextPrompt("! / Hello!       ? / How can I help you?")] # Bilingual greeting
                     ^^^^^^^^^^^^^^^^
AttributeError: module 'livekit.agents.voice' has no attribute 'TextPrompt'
2025-05-17 12:48:35,035 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 12:48:35,035 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 12:48:35,035 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-17 12:48:35,035 - __main__ - ERROR - [MainThread] - Access denied when trying to terminate process PID 0 on port 8000. Manual intervention may be required.
2025-05-17 12:48:35,035 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 12:48:35,035 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 12:48:35,035 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 12:48:35,035 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 12:48:35,035 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 12:48:35,605 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 12:48:35,605 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 12:48:35,605 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 12:48:35,605 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 12:48:35,605 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 12:48:35,614 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 12:48:35,614 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 12:48:37,146 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:48:37,146 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:48:37,146 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:48:37,146 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:48:40,066 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 12:48:40,067 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 12:48:40,787 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:48:40,787 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 12:48:40,787 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:48:40,794 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:48:40,795 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:48:40,795 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:48:40,797 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:48:40,797 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:48:40,798 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:48:40,798 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:48:40,799 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:48:40,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:48:40,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:48:40,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:48:40,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:48:40,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:48:40,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:48:40,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:48:40,802 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:48:40,802 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 12:48:40,971 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 12:48:46,273 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 12:48:46,273 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 12:48:46,273 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 12:48:46,273 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 12:49:17,959 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 12:49:17,960 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 12:49:17,963 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 12:49:17,964 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 12:53:21,214 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 12:53:21,214 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 12:53:21,746 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 12:53:21,746 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 12:53:21,746 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 12:53:21,746 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 12:53:21,746 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 12:53:21,746 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 12:53:22,045 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 12:53:22,045 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 12:53:22,045 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 12:53:22,045 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 12:53:22,045 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 12:53:22,052 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 12:53:22,053 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 12:53:23,593 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:53:23,593 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:53:23,593 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 12:53:23,593 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 12:53:26,779 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 12:53:26,779 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 12:53:27,215 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:53:27,215 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 12:53:27,215 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 12:53:27,230 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:27,230 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:27,230 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:27,238 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:27,238 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:27,239 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:27,240 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:27,240 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:27,244 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:27,244 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:27,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:27,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:27,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:27,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:27,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:27,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:27,251 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 12:53:27,388 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 12:53:32,201 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 12:53:32,201 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 12:53:32,216 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 12:53:32,219 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 12:53:32,697 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 12:53:32,715 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_DV8gkHTpBZKQ
2025-05-17 12:53:32,774 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 12:53:32,775 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 12:53:33,005 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_SLogCP6Xteun
2025-05-17 12:53:33,007 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 12:53:33,007 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 12:53:33,060 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 12:53:33,074 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: arya.
2025-05-17 12:53:33,228 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 12:53:33,372 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 12:53:33,373 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 12:53:33,374 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2009, in entrypoint
    initial_prompts=[voice.TextPrompt("! / Hello!       ? / How can I help you?")] # Bilingual greeting
                     ^^^^^^^^^^^^^^^^
AttributeError: module 'livekit.agents.voice' has no attribute 'TextPrompt'
2025-05-17 13:03:06,957 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-17 13:03:06,958 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-17 13:03:06,982 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-17 13:03:06,983 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-17 13:03:07,257 - livekit.agents - ERROR - [LiveKitAgentWorker] - Error in _load_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 430, in _load_task
    self._worker_load = await asyncio.get_event_loop().run_in_executor(None, load_fnc)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 829, in run_in_executor
    executor.submit(func, *args), loop=self)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown
2025-05-17 13:03:07,272 - livekit.agents - ERROR - [LiveKitAgentWorker] - worker failed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 90, in _worker_run
    await worker.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 467, in run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 430, in _load_task
    self._worker_load = await asyncio.get_event_loop().run_in_executor(None, load_fnc)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 829, in run_in_executor
    executor.submit(func, *args), loop=self)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown
2025-05-17 13:03:07,274 - livekit.agents - INFO - [LiveKitAgentWorker] - draining worker
2025-05-17 13:03:07,612 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-4' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-17 13:03:13,617 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:03:13,617 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:03:14,185 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:03:14,186 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:03:14,186 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:03:14,186 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:03:14,186 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:03:14,186 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:03:14,477 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:03:14,477 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:03:14,477 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:03:14,477 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:03:14,477 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:03:14,492 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:03:14,492 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:03:15,984 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:03:15,984 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:03:15,984 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:03:15,984 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:03:19,199 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:03:19,199 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:03:19,546 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:03:19,546 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:03:19,546 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:03:19,553 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:03:19,553 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:03:19,555 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:03:19,555 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:03:19,556 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:03:19,556 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:03:19,556 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:03:19,556 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:03:19,562 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:03:19,563 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:03:19,563 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:03:19,563 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:03:19,563 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:03:19,563 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:03:19,563 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:03:19,563 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:03:19,564 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:03:19,693 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:10:13,481 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:10:13,481 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:10:14,122 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:10:14,122 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:10:14,123 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:10:14,123 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:10:14,123 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:10:14,123 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:10:14,427 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:10:14,427 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:10:14,427 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:10:14,443 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:10:14,443 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:10:14,445 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:10:14,445 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:10:16,014 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:10:16,014 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:10:16,014 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:10:16,014 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:10:19,153 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:10:19,154 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:10:19,655 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:10:19,655 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:10:19,655 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:10:19,664 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:19,664 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:19,665 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:19,665 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:19,666 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:19,667 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:19,667 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:19,667 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:19,669 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:19,669 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:19,669 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:19,669 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:19,669 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:19,673 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:19,673 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:19,673 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:19,677 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:10:19,810 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:10:23,564 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:10:23,564 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:10:23,564 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:10:23,577 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:10:24,172 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 13:10:24,201 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_Cy8bPcqwhmAz
2025-05-17 13:10:24,248 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:10:24,249 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:10:24,508 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_xxM8yJUnox5r
2025-05-17 13:10:24,509 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 13:10:24,510 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 13:10:24,545 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 13:10:24,555 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: arya.
2025-05-17 13:10:24,676 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 13:10:24,824 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 13:10:24,824 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 13:10:24,824 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2002, in entrypoint
    session = AgentSession(
              ^^^^^^^^^^^^^
TypeError: AgentSession.__init__() got an unexpected keyword argument 'initial_prompts'
2025-05-17 13:12:03,230 - livekit - WARNING - [Dummy-2] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-17 13:12:03,230 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-17 13:12:03,231 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-17 13:12:03,232 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-17 13:12:03,233 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-17 13:16:03,728 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:16:03,728 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:16:04,295 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:16:04,295 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:16:04,295 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:16:04,295 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:16:04,295 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:16:04,295 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:16:04,614 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:16:04,614 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:16:04,614 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:16:04,623 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:16:04,623 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:16:04,623 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:16:04,623 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:16:06,184 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:16:06,184 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:16:06,184 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:16:06,184 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:16:09,349 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:16:09,349 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:16:09,814 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:16:09,814 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:16:09,814 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:16:09,822 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:09,822 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:09,822 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:09,827 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:09,828 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:09,828 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:09,829 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:09,830 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:09,832 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:09,832 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:09,832 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:09,832 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:09,832 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:09,832 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:09,832 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:09,832 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:09,843 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:16:09,974 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:16:14,898 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:16:14,898 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:16:14,901 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:16:14,902 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:16:15,282 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 13:16:15,300 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_hKLZvSA7gqCY
2025-05-17 13:16:15,360 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:16:15,361 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:16:15,593 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_hGhXyybt2FGP
2025-05-17 13:16:15,596 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 13:16:15,598 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 13:16:15,649 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 13:16:15,660 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: arya.
2025-05-17 13:16:15,787 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 13:16:15,939 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 13:16:15,940 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 13:16:15,941 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-17 13:16:15,941 - __main__ - INFO - [job_thread_runner] - --- [MultilingualAssistant] __init__ CALLED ---
2025-05-17 13:16:15,941 - __main__ - INFO - [job_thread_runner] - [AgentEntry] MultilingualAssistant instance created.
2025-05-17 13:16:15,941 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-17 13:16:15,942 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage turns.
2025-05-17 13:16:15,942 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 13:16:15,945 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-17 13:16:15,947 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-17 13:16:15,947 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_hKLZvSA7gqCY.
2025-05-17 13:16:15,947 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 13:16:18,547 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:16:19,430 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:16:20,783 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1549, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}}
2025-05-17 13:16:20,851 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 256, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}} (status_code=400, request_id=req_91770fb6a87f7bd21433978d8e9f0e2a, body={'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'})
2025-05-17 13:16:21,548 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1549, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}}
2025-05-17 13:16:21,548 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 256, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}} (status_code=400, request_id=req_5354f3d219c32e9a3d4c4d6e4a08fe1d, body={'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'})
2025-05-17 13:16:23,823 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1549, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}}
2025-05-17 13:16:23,831 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 256, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}} (status_code=400, request_id=req_40b8b9bd379d0e7b13e3451f99b471e6, body={'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'})
2025-05-17 13:16:25,914 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:16:26,178 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1549, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}}
2025-05-17 13:16:26,190 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 256, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}} (status_code=400, request_id=req_9f9ab5b34584738dcb1d6833b00cbb72, body={'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'})
2025-05-17 13:16:27,098 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1549, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}}
2025-05-17 13:16:27,104 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 256, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}} (status_code=400, request_id=req_3b5c080dcd99588db3887304a0fe0abe, body={'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'})
2025-05-17 13:16:27,812 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1549, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}}
2025-05-17 13:16:27,818 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 256, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}} (status_code=400, request_id=req_1c4b1f3e683d6d8b95ee616fad778bcf, body={'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'})
2025-05-17 13:16:27,888 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-17 13:16:30,128 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1549, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}}
2025-05-17 13:16:30,130 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 256, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}} (status_code=400, request_id=req_0d26dd10b08ca89d0f362626548cfac2, body={'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'})
2025-05-17 13:16:32,431 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1549, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid value: 'arya'. Supported values are: 'alloy', 'echo', 'fable', 'onyx', 'nova', 'shimmer', 'coral', 'verse', 'ballad', 'ash', and 'sage'.", 'type': 'invalid_request_error', 'param': 'voice', 'code': 'invalid_value'}}
2025-05-17 13:23:18,161 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-17 13:23:18,161 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-17 13:23:18,184 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-17 13:23:18,186 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-17 13:23:18,187 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-17 13:23:18,284 - livekit.agents - ERROR - [LiveKitAgentWorker] - Error in _load_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 430, in _load_task
    self._worker_load = await asyncio.get_event_loop().run_in_executor(None, load_fnc)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 829, in run_in_executor
    executor.submit(func, *args), loop=self)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown
2025-05-17 13:23:18,289 - livekit.agents - ERROR - [LiveKitAgentWorker] - worker failed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\cli\_run.py", line 90, in _worker_run
    await worker.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 467, in run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 430, in _load_task
    self._worker_load = await asyncio.get_event_loop().run_in_executor(None, load_fnc)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 829, in run_in_executor
    executor.submit(func, *args), loop=self)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown
2025-05-17 13:23:18,292 - livekit.agents - INFO - [LiveKitAgentWorker] - draining worker
2025-05-17 13:23:18,293 - livekit.agents - INFO - [LiveKitAgentWorker] - shutting down worker
2025-05-17 13:23:18,303 - livekit.agents - INFO - [LiveKitAgentWorker] - process exiting
2025-05-17 13:23:18,800 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: cli.run_app exited successfully (code: 0).
2025-05-17 13:23:18,801 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Restored original sys.argv.
2025-05-17 13:23:56,008 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:23:56,009 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:23:56,624 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:23:56,624 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:23:56,624 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:23:56,624 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:23:56,624 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:23:56,624 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:23:56,965 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:23:56,965 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:23:56,965 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:23:56,976 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:23:56,976 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:23:56,976 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:23:56,976 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:23:58,580 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:23:58,581 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:23:58,580 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:23:58,581 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:24:01,660 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:24:01,660 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:24:02,265 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:24:02,265 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:24:02,265 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:24:02,281 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:24:02,281 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:24:02,281 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:24:02,286 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:24:02,286 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:24:02,287 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:24:02,288 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:24:02,288 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:24:02,291 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:24:02,291 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:24:02,291 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:24:02,292 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:24:02,292 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:24:02,292 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:24:02,292 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:24:02,292 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:24:02,295 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:24:02,426 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:24:06,962 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:24:06,963 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:24:06,968 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:24:06,969 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:25:30,447 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:25:30,447 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:25:31,105 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:25:31,105 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:25:31,105 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:25:31,105 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:25:31,105 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:25:31,105 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:25:31,443 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:25:31,443 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:25:31,443 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:25:31,443 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:25:31,443 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:25:31,452 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:25:31,452 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:25:32,997 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:25:32,997 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:25:32,997 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:25:32,997 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:25:36,130 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:25:36,130 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:25:36,659 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:25:36,659 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:25:36,659 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:25:36,664 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:36,664 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:36,664 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:36,669 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:36,670 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:36,671 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:36,671 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:36,672 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:36,675 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:36,675 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:36,676 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:36,676 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:36,677 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:36,677 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:36,677 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:36,677 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:36,679 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:25:36,798 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:25:47,448 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:25:47,448 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:25:47,451 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:25:47,451 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:25:48,081 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 13:25:48,104 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_ftFRE9PosFPn
2025-05-17 13:25:48,200 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:25:48,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:25:48,401 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_ojBWZgC4RCXr
2025-05-17 13:25:48,402 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 13:25:48,402 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 13:25:48,437 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 13:25:48,447 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: shimmer.
2025-05-17 13:25:48,600 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 13:25:48,748 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 13:25:48,749 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 13:25:48,749 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-17 13:25:48,750 - __main__ - INFO - [job_thread_runner] - --- [MultilingualAssistant] __init__ CALLED ---
2025-05-17 13:25:48,750 - __main__ - INFO - [job_thread_runner] - [AgentEntry] MultilingualAssistant instance created.
2025-05-17 13:25:48,750 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-17 13:25:48,750 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage turns.
2025-05-17 13:25:48,750 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 13:25:48,754 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-17 13:25:48,755 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-17 13:25:48,755 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_ftFRE9PosFPn.
2025-05-17 13:27:18,227 - livekit - WARNING - [Dummy-2] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-17 13:27:18,229 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-17 13:27:18,231 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-17 13:27:18,232 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-17 13:33:45,483 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:33:45,483 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:33:46,049 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:33:46,049 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:33:46,049 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:33:46,050 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:33:46,050 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:33:46,051 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:33:46,345 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:33:46,345 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:33:46,345 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:33:46,345 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:33:46,345 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:33:46,345 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:33:46,345 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:33:47,903 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:33:47,904 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:33:47,903 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:33:47,904 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:33:51,077 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:33:51,077 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:33:51,614 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:33:51,614 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:33:51,614 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:33:51,624 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:51,624 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:51,626 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:51,626 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:51,626 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:51,627 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:51,627 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:51,628 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:51,629 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:51,629 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:51,629 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:51,629 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:51,629 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:51,629 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:51,629 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:51,629 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:51,629 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:33:51,764 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:33:55,650 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:33:55,650 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:33:55,665 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:33:55,668 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:33:56,102 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 13:33:56,125 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_jJTAnyRfWnYY
2025-05-17 13:33:56,175 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:33:56,177 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:33:56,420 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_G7PAZTWsAKhU
2025-05-17 13:33:56,420 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 13:33:56,421 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 13:33:56,454 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 13:33:56,464 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: shimmer.
2025-05-17 13:33:56,584 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 13:33:56,730 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 13:33:56,730 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 13:33:56,730 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-17 13:33:56,731 - __main__ - INFO - [job_thread_runner] - --- [MultilingualAssistant] __init__ CALLED ---
2025-05-17 13:33:56,731 - __main__ - INFO - [job_thread_runner] - [AgentEntry] MultilingualAssistant instance created.
2025-05-17 13:33:56,731 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-17 13:33:56,731 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage turns.
2025-05-17 13:33:56,732 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 13:33:56,735 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-17 13:33:56,736 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-17 13:33:56,738 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_jJTAnyRfWnYY.
2025-05-17 13:33:56,738 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 13:34:00,721 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:34:10,280 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:34:33,125 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:34:43,633 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:35:47,882 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:36:16,253 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:36:33,860 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:36:44,682 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:36:45,579 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:37:16,237 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:43:49,387 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:46:43,642 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:46:43,642 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:46:44,201 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:46:44,202 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:46:44,202 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:46:44,202 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:46:44,202 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:46:44,202 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:46:44,506 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:46:44,506 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:46:44,506 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:46:44,506 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:46:44,514 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:46:44,514 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:46:44,514 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:46:46,023 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:46:46,023 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:46:46,023 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:46:46,023 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:46:49,249 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:46:49,249 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:46:49,617 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:46:49,617 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:46:49,617 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:46:49,617 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:46:49,617 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:46:49,617 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:46:49,628 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:46:49,629 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:46:49,630 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:46:49,630 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:46:49,631 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:46:49,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:46:49,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:46:49,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:46:49,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:46:49,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:46:49,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:46:49,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:46:49,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:46:49,642 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:46:49,764 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:53:33,002 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:53:33,002 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:53:33,019 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:53:33,021 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:53:34,396 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 13:53:34,425 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_PZGujFEH23q9
2025-05-17 13:53:34,487 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:53:34,488 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:53:34,705 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_xvefPLewNrLE
2025-05-17 13:53:34,705 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 13:53:34,705 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 13:53:34,743 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 13:53:34,753 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: shimmer.
2025-05-17 13:53:34,875 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 13:53:35,014 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 13:53:35,015 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 13:53:35,015 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-17 13:53:35,015 - __main__ - INFO - [job_thread_runner] - --- [MultilingualAssistant] __init__ CALLED ---
2025-05-17 13:53:35,015 - __main__ - INFO - [job_thread_runner] - [AgentEntry] MultilingualAssistant instance created.
2025-05-17 13:53:35,015 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-17 13:53:35,016 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage turns.
2025-05-17 13:53:35,016 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 13:53:35,020 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-17 13:53:35,021 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-17 13:53:35,022 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_PZGujFEH23q9.
2025-05-17 13:53:35,022 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 13:53:37,139 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:53:37,660 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:53:39,507 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-17 13:54:36,318 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:54:36,318 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:54:36,914 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:54:36,914 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:54:36,917 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:54:36,917 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:54:36,917 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:54:36,917 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:54:37,232 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:54:37,246 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:54:37,246 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:54:37,246 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:54:37,249 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:54:37,249 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:54:37,249 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:54:38,777 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:54:38,777 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:54:38,777 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:54:38,777 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:54:41,952 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:54:41,952 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:54:42,387 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:54:42,387 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:54:42,387 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:54:42,387 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:54:42,387 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:54:42,387 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:54:42,397 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:54:42,398 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:54:42,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:54:42,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:54:42,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:54:42,402 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:54:42,402 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:54:42,402 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:54:42,402 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:54:42,403 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:54:42,403 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:54:42,403 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:54:42,403 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:54:42,409 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:54:42,545 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:54:48,864 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:54:48,864 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:54:48,864 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:54:48,878 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:56:39,719 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 13:56:39,719 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 13:56:40,342 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 13:56:40,343 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 13:56:40,343 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 13:56:40,344 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 13:56:40,344 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 13:56:40,344 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 13:56:40,685 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 13:56:40,685 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 13:56:40,685 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 13:56:40,685 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 13:56:40,685 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 13:56:40,685 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 13:56:40,685 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 13:56:42,290 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:56:42,290 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:56:42,290 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 13:56:42,290 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 13:56:45,393 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 13:56:45,393 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 13:56:46,029 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:56:46,029 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 13:56:46,029 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:46,046 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:46,059 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:46,059 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:46,059 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:46,059 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:46,059 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:46,067 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 13:56:46,195 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 13:56:50,989 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:56:50,989 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:56:50,989 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 13:56:50,992 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 13:56:51,515 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 13:56:51,542 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_NrJNLXR6beXb
2025-05-17 13:56:51,588 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 13:56:51,591 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 13:56:51,830 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_Epj85HZyfzU2
2025-05-17 13:56:51,831 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 13:56:51,831 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 13:56:51,873 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 13:56:51,883 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: shimmer.
2025-05-17 13:56:52,042 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 13:56:52,202 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 13:56:52,202 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 13:56:52,203 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-17 13:56:52,203 - __main__ - INFO - [job_thread_runner] - --- [MultilingualAssistant] __init__ CALLED ---
2025-05-17 13:56:52,203 - __main__ - INFO - [job_thread_runner] - [AgentEntry] MultilingualAssistant instance created.
2025-05-17 13:56:52,204 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-17 13:56:52,204 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage turns.
2025-05-17 13:56:52,204 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 13:56:52,209 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-17 13:56:52,210 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-17 13:56:52,212 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_NrJNLXR6beXb.
2025-05-17 13:56:52,212 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 13:56:57,833 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:57:06,303 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:57:15,570 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:57:43,760 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:57:56,411 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:59:41,106 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:59:41,572 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 13:59:56,308 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:24:44,520 - __main__ - INFO - [MainThread] - --- __main__: Script execution started ---
2025-05-17 14:24:44,520 - __main__ - DEBUG - [MainThread] - Checking port 8000...
2025-05-17 14:24:45,120 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process found/could be terminated.
2025-05-17 14:24:45,120 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 14:24:45,121 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 14:24:45,121 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 14:24:45,121 - __main__ - DEBUG - [LiveKitAgentWorker] - Checking port 8081...
2025-05-17 14:24:45,121 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to initialize before starting Uvicorn...
2025-05-17 14:24:45,448 - __main__ - DEBUG - [LiveKitAgentWorker] - Port 8081 is free or no process found/could be terminated.
2025-05-17 14:24:45,449 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['main.py', 'start']
2025-05-17 14:24:45,449 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 14:24:45,450 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 14:24:45,452 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 14:24:45,455 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 14:24:45,456 - livekit.agents - INFO - [LiveKitAgentWorker] - starting inference executor
2025-05-17 14:24:47,046 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 14:24:47,046 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 14:24:47,046 - livekit.agents - INFO - [MainThread] - initializing inference process
2025-05-17 14:24:47,046 - livekit.agents - DEBUG - [MainThread] - initializing inference runner
2025-05-17 14:24:50,140 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 14:24:50,140 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 14:24:50,690 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 14:24:50,690 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-17 14:24:50,690 - livekit.agents - INFO - [MainThread] - inference process initialized
2025-05-17 14:24:50,709 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:50,710 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:50,710 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:50,711 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:50,712 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:50,713 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:50,713 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:50,713 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:50,714 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:50,714 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:50,714 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:50,714 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:50,714 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:50,714 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:50,714 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:50,714 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:50,714 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 14:24:50,830 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 14:24:55,344 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 14:24:55,344 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 14:24:55,344 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 14:24:55,344 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 14:24:55,758 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 14:24:55,781 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_gkD39N27kMtP
2025-05-17 14:24:55,830 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:24:55,831 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:24:56,072 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_5wpDzNmi6n5Z
2025-05-17 14:24:56,072 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 14:24:56,073 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='multi'.
2025-05-17 14:24:56,108 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized with model: gpt-4o-mini.
2025-05-17 14:24:56,120 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized with voice: shimmer.
2025-05-17 14:24:56,250 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 14:24:56,405 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Multilingual turn detector initialized.
2025-05-17 14:24:56,406 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All essential plugins initialized successfully.
2025-05-17 14:24:56,406 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with initialized plugins.
2025-05-17 14:24:56,407 - __main__ - INFO - [job_thread_runner] - --- [MultilingualAssistant] __init__ CALLED ---
2025-05-17 14:24:56,407 - __main__ - INFO - [job_thread_runner] - [AgentEntry] MultilingualAssistant instance created.
2025-05-17 14:24:56,408 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession...
2025-05-17 14:24:56,409 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage turns.
2025-05-17 14:24:56,409 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 14:24:56,413 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-17 14:24:56,413 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent_task completed normally.
2025-05-17 14:24:56,414 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_gkD39N27kMtP.
2025-05-17 14:24:56,415 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 14:25:03,219 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:25:10,772 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:36:59,599 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 14:36:59,599 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 14:36:59,599 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 14:36:59,599 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 14:36:59,599 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-17 14:36:59,599 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-17 14:37:00,180 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-17 14:37:00,180 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 14:37:00,180 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 14:37:00,180 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 14:37:00,180 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-17 14:37:00,180 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-17 14:37:00,180 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 14:37:00,188 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 14:37:00,188 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 14:37:00,188 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 14:37:00,200 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:00,201 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:00,209 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:00,209 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:00,209 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:00,209 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:00,209 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 14:37:00,355 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 14:37:05,188 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 14:37:05,190 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 14:37:05,276 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 14:37:05,278 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 14:37:05,278 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 14:37:05,278 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 14:37:12,760 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 14:37:12,761 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 14:37:12,762 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 14:37:12,763 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 14:37:13,358 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 14:37:13,376 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_GEZfgFBmzQRP
2025-05-17 14:37:13,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:37:13,400 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:37:13,684 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_e9WnYfk4fSnS
2025-05-17 14:37:13,685 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 14:37:13,686 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-17 14:37:13,722 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-17 14:37:13,723 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-17 14:37:13,733 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-17 14:37:13,733 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-17 14:37:13,743 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-17 14:37:13,744 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-17 14:37:13,869 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 14:37:13,870 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-17 14:37:13,870 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-17 14:37:13,871 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list.
2025-05-17 14:37:13,872 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=chat_message_list)
2025-05-17 14:37:13,873 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2511, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-17 14:37:13,875 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-17 14:37:13,875 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-17 14:37:13,876 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-17 14:37:13,876 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-17 14:37:13,876 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-17 14:37:13,877 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-17 14:37:13,877 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-17 14:37:13,877 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-17 14:37:13,877 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 14:37:13,882 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_GEZfgFBmzQRP.
2025-05-17 14:37:13,882 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 14:37:18,976 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:37:28,036 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:37:37,285 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:37:48,926 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:37:57,022 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:38:09,008 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:38:18,304 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:38:20,210 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:38:32,166 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:38:41,389 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:38:49,494 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:39:04,706 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:39:17,254 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:39:23,805 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:39:51,146 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:39:53,397 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:02,918 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:09,105 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:11,871 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:15,991 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:20,123 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:25,904 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:29,051 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:39,653 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:47,789 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:50,572 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:40:51,724 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:41:03,738 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:41:05,325 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:41:17,644 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:41:18,567 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:41:20,203 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:41:22,284 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:42:34,793 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:42:41,778 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:42:51,771 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:43:00,700 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:43:11,386 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:43:22,883 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:43:30,472 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:45:36,180 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:45:45,552 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:45:55,123 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:46:00,852 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:46:10,025 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 14:46:18,503 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-17 14:47:30,414 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 14:47:30,414 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 14:47:30,414 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 14:47:30,414 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 14:47:30,414 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-17 14:47:30,414 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-17 14:47:31,003 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-17 14:47:31,003 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 14:47:31,003 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 14:47:31,003 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 14:47:31,003 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-17 14:47:31,003 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-17 14:47:31,003 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 14:47:31,003 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 14:47:31,003 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 14:47:31,003 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 14:47:31,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:31,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:31,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:31,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:31,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:31,015 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:31,019 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:31,019 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:31,021 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:31,022 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:31,022 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:31,022 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:31,023 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:31,023 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:31,023 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:31,024 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:31,026 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 14:47:31,186 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 14:47:36,005 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 14:47:36,005 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 14:47:36,090 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 14:47:36,090 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 14:47:36,091 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 14:47:36,091 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 14:47:37,164 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 14:47:37,164 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 14:47:37,164 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 14:47:37,164 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 14:47:37,614 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 14:47:37,645 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_gVQZJpjL7zNZ
2025-05-17 14:47:37,696 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 14:47:37,696 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 14:47:37,940 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_9RC3EopRguLC
2025-05-17 14:47:37,941 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 14:47:37,942 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-17 14:47:37,984 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-17 14:47:37,985 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-17 14:47:37,994 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-17 14:47:37,995 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-17 14:47:38,004 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-17 14:47:38,005 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-17 14:47:38,122 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 14:47:38,123 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-17 14:47:38,123 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-17 14:47:38,125 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list.
2025-05-17 14:47:38,125 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=chat_message_list)
2025-05-17 14:47:38,126 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2511, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-17 14:47:38,128 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-17 14:47:38,128 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-17 14:47:38,129 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-17 14:47:38,130 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-17 14:47:38,130 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-17 14:47:38,130 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-17 14:47:38,131 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-17 14:47:38,131 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-17 14:47:38,131 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 14:47:38,134 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_gVQZJpjL7zNZ.
2025-05-17 14:49:43,279 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-17 14:49:43,282 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-17 14:49:43,288 - livekit.agents - DEBUG - [LiveKitAgentWorker] - job exiting
2025-05-17 14:49:43,291 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-17 14:49:43,291 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-17 17:29:57,521 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 17:29:57,521 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 17:29:57,521 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 17:29:57,521 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 17:29:57,521 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-17 17:29:57,521 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-17 17:29:58,104 - __main__ - DEBUG - [MainThread] - Port 8000 is free or no process could be terminated.
2025-05-17 17:29:58,104 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 17:29:58,104 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 17:29:58,104 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 17:29:58,104 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-17 17:29:58,104 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-17 17:29:58,104 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 17:29:58,106 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 17:29:58,106 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 17:29:58,111 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:29:58,114 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:29:58,126 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:29:58,126 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:29:58,127 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:29:58,127 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:29:58,127 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:29:58,127 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:29:58,127 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:29:58,127 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 17:29:58,255 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 17:30:03,107 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 17:30:03,108 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 17:30:03,201 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 17:30:03,201 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 17:30:03,201 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 17:30:03,201 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 17:30:03,436 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 17:30:03,436 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 17:30:03,436 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 17:30:03,436 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 17:30:04,011 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 17:30:04,035 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_axDvy3mGAhjG
2025-05-17 17:30:04,115 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:30:04,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:30:04,339 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_8WkvzKakfiqy
2025-05-17 17:30:04,340 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 17:30:04,340 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-17 17:30:04,389 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-17 17:30:04,389 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-17 17:30:04,399 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-17 17:30:04,399 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-17 17:30:04,408 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-17 17:30:04,409 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-17 17:30:04,547 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 17:30:04,548 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-17 17:30:04,548 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-17 17:30:04,549 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list.
2025-05-17 17:30:04,550 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=chat_message_list)
2025-05-17 17:30:04,550 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 2511, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-17 17:30:04,552 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-17 17:30:04,552 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-17 17:30:04,552 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-17 17:30:04,553 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-17 17:30:04,553 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-17 17:30:04,553 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-17 17:30:04,554 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-17 17:30:04,554 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-17 17:30:04,555 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 17:30:04,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_axDvy3mGAhjG.
2025-05-17 17:30:04,559 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 17:30:11,925 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:30:17,042 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:30:26,693 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:30:28,802 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:30:35,492 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:30:44,760 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:30:54,805 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:31:06,674 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:31:36,211 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:31:42,665 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:31:46,958 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:31:49,977 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:31:52,479 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:04,661 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:07,984 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:09,807 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:12,281 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:13,988 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:17,404 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:19,958 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:22,171 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:25,673 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:28,277 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:31,218 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:35,520 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:39,013 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:42,418 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:46,802 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:50,295 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:51,812 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:53,831 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:58,403 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:32:59,970 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:33:04,596 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:33:11,835 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:33:24,602 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:33:55,692 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:34:28,579 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:34:34,123 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:34:36,346 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:34:48,779 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:34:57,562 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:34:59,547 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:35:04,752 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:35:05,642 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:35:08,203 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:35:09,870 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:35:13,507 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:55:14,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 17:55:14,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 17:55:14,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 17:55:14,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 17:55:14,480 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-17 17:55:14,480 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-17 17:55:14,480 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-17 17:55:15,061 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-17 17:55:15,061 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 17:55:15,061 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 17:55:15,061 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 17:55:15,061 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-17 17:55:15,061 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-17 17:55:15,064 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 17:55:15,064 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 17:55:15,064 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 17:55:15,070 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 17:55:15,077 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:15,078 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:15,078 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 17:55:15,241 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 17:55:20,065 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 17:55:20,065 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 17:55:20,122 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 17:55:20,122 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 17:55:20,122 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 17:55:20,122 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 17:55:20,396 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 17:55:20,397 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 17:55:20,397 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 17:55:20,397 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 17:55:20,989 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 17:55:21,015 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_kpELANjvNZxC
2025-05-17 17:55:21,116 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 17:55:21,118 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 17:55:21,302 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_PabTcwo9c5y4
2025-05-17 17:55:21,303 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 17:55:21,303 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-17 17:55:21,339 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-17 17:55:21,340 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-17 17:55:21,350 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-17 17:55:21,351 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-17 17:55:21,361 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-17 17:55:21,361 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-17 17:55:21,481 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 17:55:21,482 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-17 17:55:21,482 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-17 17:55:21,483 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list.
2025-05-17 17:55:21,484 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=chat_message_list)
2025-05-17 17:55:21,484 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3035, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-17 17:55:21,486 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-17 17:55:21,487 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-17 17:55:21,487 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-17 17:55:21,487 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-17 17:55:21,488 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-17 17:55:21,488 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-17 17:55:21,489 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-17 17:55:21,489 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-17 17:55:21,489 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 17:55:21,492 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_kpELANjvNZxC.
2025-05-17 17:55:21,493 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 17:55:26,543 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:55:38,455 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:55:39,585 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:55:41,363 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:55:49,533 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:55:51,193 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:56:06,607 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:56:11,269 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:56:22,512 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:56:41,675 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:57:10,754 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:57:13,397 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:57:15,713 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:57:40,824 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:57:56,295 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:07,335 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:18,890 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:22,990 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:27,616 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:30,823 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:32,497 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:39,186 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:40,145 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:44,981 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:48,895 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:49,815 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:57,732 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:58:58,711 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:08,971 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:23,341 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:25,505 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:29,354 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:31,419 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:43,863 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:50,206 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:51,860 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 17:59:52,518 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:01,812 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:05,517 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:15,621 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:27,902 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:30,728 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:33,729 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:46,163 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:50,412 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:00:52,278 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:01:04,960 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:01:10,054 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:01:22,829 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:01:24,255 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:03:47,518 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 18:03:47,519 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 18:03:47,519 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 18:03:47,519 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 18:03:47,520 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-17 18:03:47,520 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-17 18:03:47,520 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-17 18:03:48,107 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-17 18:03:48,107 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 18:03:48,107 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 18:03:48,107 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 18:03:48,107 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-17 18:03:48,107 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-17 18:03:48,107 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 18:03:48,107 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 18:03:48,107 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 18:03:48,114 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:03:48,120 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:03:48,133 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 18:03:48,249 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 18:03:53,109 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 18:03:53,109 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 18:03:53,164 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 18:03:53,164 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 18:03:53,164 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 18:03:53,164 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 18:04:40,541 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 18:04:40,541 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 18:04:40,541 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 18:04:40,557 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 18:04:41,130 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 18:04:41,155 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_JUGoi3awWb9w
2025-05-17 18:04:41,251 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:04:41,252 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:04:41,421 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_N2JMDwTNSRZ2
2025-05-17 18:04:41,421 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 18:04:41,422 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-17 18:04:41,456 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-17 18:04:41,456 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-17 18:04:41,466 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-17 18:04:41,466 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-17 18:04:41,476 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-17 18:04:41,477 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-17 18:04:41,599 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 18:04:41,599 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-17 18:04:41,600 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-17 18:04:41,601 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list for English and Hindi tests.
2025-05-17 18:04:41,601 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=chat_message_list)
2025-05-17 18:04:41,603 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3040, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-17 18:04:41,605 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-17 18:04:41,606 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-17 18:04:41,606 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-17 18:04:41,607 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-17 18:04:41,608 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-17 18:04:41,608 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-17 18:04:41,609 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-17 18:04:41,609 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-17 18:04:41,610 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 18:04:41,614 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_JUGoi3awWb9w.
2025-05-17 18:04:41,615 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 18:04:46,084 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:04:57,932 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:04:59,162 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:05:10,573 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:05:44,548 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:05:47,645 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:05:50,216 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:05:56,845 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:06:00,853 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:06:03,527 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:09:46,513 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 18:09:46,514 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 18:09:46,514 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 18:09:46,514 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 18:09:46,516 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-17 18:09:46,516 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-17 18:09:46,516 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-17 18:09:47,105 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-17 18:09:47,105 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 18:09:47,106 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 18:09:47,106 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 18:09:47,106 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-17 18:09:47,106 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-17 18:09:47,106 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 18:09:47,109 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 18:09:47,110 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 18:09:47,113 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:47,117 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:47,134 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 18:09:47,256 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 18:09:52,108 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 18:09:52,108 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 18:09:52,164 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 18:09:52,164 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 18:09:52,164 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 18:09:52,164 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 18:09:52,289 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 18:09:52,289 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 18:09:52,289 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 18:09:52,289 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 18:09:52,679 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 18:09:52,699 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_2YKJdzs7cb3Q
2025-05-17 18:09:52,795 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:09:52,796 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:09:52,988 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_QpzjDsvYBo8U
2025-05-17 18:09:52,992 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 18:09:52,993 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-17 18:09:53,059 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-17 18:09:53,059 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-17 18:09:53,069 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-17 18:09:53,070 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-17 18:09:53,080 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-17 18:09:53,080 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-17 18:09:53,207 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 18:09:53,208 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-17 18:09:53,208 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-17 18:09:53,210 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list for English and Hindi tests.
2025-05-17 18:09:53,210 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=chat_message_list)
2025-05-17 18:09:53,211 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3041, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-17 18:09:53,212 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-17 18:09:53,213 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-17 18:09:53,213 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-17 18:09:53,214 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-17 18:09:53,214 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-17 18:09:53,214 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-17 18:09:53,215 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-17 18:09:53,215 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-17 18:09:53,215 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 18:09:53,219 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_2YKJdzs7cb3Q.
2025-05-17 18:09:53,220 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 18:09:56,814 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:10:06,966 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:10:29,057 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:10:43,714 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:11:15,440 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:11:26,922 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:11:29,055 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:11:33,067 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:11:40,994 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:11:48,736 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:11:53,621 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:11:55,389 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:12:02,487 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:12:15,264 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:15:24,983 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 18:15:24,984 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 18:15:24,984 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 18:15:24,984 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 18:15:24,985 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-17 18:15:24,985 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-17 18:15:24,985 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-17 18:15:25,617 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 12016 (python.exe). Attempting to terminate.
2025-05-17 18:15:25,642 - __main__ - INFO - [MainThread] - Successfully handled potential process on port 8000.
2025-05-17 18:15:25,642 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 18:15:25,643 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 18:15:25,643 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 18:15:25,643 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-17 18:15:25,643 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-17 18:15:25,643 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 18:15:25,643 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 18:15:25,643 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 18:15:25,648 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 18:15:25,658 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:15:25,659 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:15:25,659 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:15:25,660 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:15:25,661 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:15:25,661 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:15:25,662 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:15:25,662 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:15:25,665 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:15:25,666 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:15:25,666 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:15:25,667 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:15:25,667 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:15:25,667 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:15:25,668 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:15:25,669 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:15:25,672 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 18:15:25,795 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 18:15:30,645 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 18:15:30,646 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 18:15:30,718 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 18:15:30,719 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 18:15:30,719 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 18:15:30,719 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 18:16:02,314 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-17 18:16:02,314 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished. ---
2025-05-17 18:16:02,360 - asyncio - ERROR - [MainThread] - Task exception was never retrieved
future: <Task finished name='Task-100' coro=<Server.serve() done, defined at C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py:68> exception=KeyboardInterrupt()>
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 30, in run
    return loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 92, in run_until_complete
    self._run_once()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\nest_asyncio.py", line 133, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 6 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 350, in __wakeup
    self.__step()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 69, in serve
    with self.capture_signals():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
KeyboardInterrupt
2025-05-17 18:17:32,144 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 18:17:32,144 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 18:17:32,144 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 18:17:32,144 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 18:17:32,146 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-17 18:17:32,146 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-17 18:17:32,146 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-17 18:17:32,719 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-17 18:17:32,719 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-17 18:17:32,719 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-17 18:17:32,719 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-17 18:17:32,719 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-17 18:17:32,719 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-17 18:17:32,719 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-17 18:17:32,719 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-17 18:17:32,719 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-17 18:17:32,727 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:32,727 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:32,744 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-17 18:17:32,878 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 18:17:37,722 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-17 18:17:37,722 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-17 18:17:37,784 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-17 18:17:37,784 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-17 18:17:37,784 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-17 18:17:37,784 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-17 18:17:37,801 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 18:17:37,801 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 18:17:37,805 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-17 18:17:37,805 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-17 18:17:38,186 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-17 18:17:38,208 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_nm5YJeBLxEwC
2025-05-17 18:17:38,291 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-17 18:17:38,292 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-17 18:17:38,501 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_8M4QiLTR3hwN
2025-05-17 18:17:38,501 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-17 18:17:38,502 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-17 18:17:38,542 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-17 18:17:38,542 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-17 18:17:38,553 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-17 18:17:38,553 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-17 18:17:38,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-17 18:17:38,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-17 18:17:38,695 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-17 18:17:38,695 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-17 18:17:38,696 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-17 18:17:38,697 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list for English and Hindi tests.
2025-05-17 18:17:38,697 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=chat_message_list)
2025-05-17 18:17:38,697 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3041, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-17 18:17:38,699 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-17 18:17:38,699 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-17 18:17:38,700 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-17 18:17:38,700 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-17 18:17:38,701 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-17 18:17:38,701 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-17 18:17:38,701 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-17 18:17:38,701 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-17 18:17:38,702 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-17 18:17:38,706 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_nm5YJeBLxEwC.
2025-05-17 18:17:38,706 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-17 18:17:41,402 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:17:50,543 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:17:58,295 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:18:08,975 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:18:09,876 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:18:44,221 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:19:02,945 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:19:19,634 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:20:49,213 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:20:51,469 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:20:55,018 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:21:38,050 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:21:45,154 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:21:48,063 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:21:50,716 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:04,064 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:12,138 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:13,463 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:24,336 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:25,888 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:30,730 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:34,343 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:40,815 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:43,388 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:44,144 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:45,309 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:22:58,459 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:23:08,836 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:23:16,242 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:23:19,927 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:23:31,513 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:23:41,026 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:23:53,300 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:42:41,394 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:42:46,002 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:42:46,925 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:42:51,207 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:43:00,797 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:43:15,933 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:43:30,807 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:43:36,537 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:43:46,711 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:43:50,896 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:43:59,206 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:44:02,146 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:44:07,118 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:44:14,288 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:44:26,348 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:44:39,851 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:45:00,817 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:45:14,954 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:45:27,314 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:45:29,676 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:45:40,053 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:45:43,423 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:45:44,953 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:45:59,437 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:19,307 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:20,382 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:25,982 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:27,834 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:30,716 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:34,528 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:35,438 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:39,333 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:41,075 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:42,826 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:47,164 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:54,695 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:46:56,946 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:06,149 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:09,039 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:10,210 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:12,825 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:17,547 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:18,417 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:31,945 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:35,691 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:37,822 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:41,048 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:46,799 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:48,267 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:50,483 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:54,089 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:47:58,055 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:00,901 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:04,723 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:06,335 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:07,420 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:08,638 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:11,115 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:14,341 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:18,089 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:20,943 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:23,372 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:25,522 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:26,796 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:28,244 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:32,726 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:33,822 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:40,556 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:43,228 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:51,728 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:54,979 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:48:56,880 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:03,708 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:06,422 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:09,017 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:13,020 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:19,323 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:20,748 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:25,278 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:33,240 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:34,630 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:37,206 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:50,753 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:56,082 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:58,490 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:49:59,223 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:03,607 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:06,283 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:09,267 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:11,133 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:13,677 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:14,678 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:16,251 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:18,951 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:23,331 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:26,408 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:29,937 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:30,597 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:52,687 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:50:57,898 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:00,541 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:01,930 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:05,413 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:07,350 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:08,818 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:10,676 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:13,310 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:17,958 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:20,594 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:23,043 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 18:51:27,309 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-17 21:23:38,451 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-17 21:23:38,455 - livekit - ERROR - [Dummy-1] - livekit::rtc_engine:716:livekit::rtc_engine - resuming connection... attempt: 0
2025-05-17 21:23:39,985 - root - ERROR - [job_thread_runner] - error running user callback for local_track_subscribed: room_handle: 3
local_track_subscribed {
  track_sid: "TR_AMT7avJkc9fP2z"
}
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\room.py", line 495, in _listen_task
    self._on_room_event(event.room_event)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\room.py", line 552, in _on_room_event
    lpublication._first_subscription.set_result(None)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\futures.py", line 260, in set_result
    raise exceptions.InvalidStateError(f'{self._state}: {self!r}')
asyncio.exceptions.InvalidStateError: FINISHED: <Future finished result=None>
2025-05-17 21:24:52,757 - livekit.agents - WARNING - [LiveKitAgentWorker] - failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 669, in _connection_task
    await self._run_ws(ws)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 750, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 339, in __wakeup
    future.result()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 267, in __step
    result = coro.send(None)
             ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\worker.py", line 722, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
2025-05-17 21:24:52,960 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-17 21:27:38,288 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-19 11:23:12,332 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 11:23:12,333 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 11:23:12,333 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 11:23:12,334 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 11:23:12,334 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 11:23:12,335 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-19 11:23:12,335 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 11:23:12,919 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 11:23:12,920 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-19 11:23:12,920 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-19 11:23:12,920 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-19 11:23:12,921 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-19 11:23:12,921 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-19 11:23:12,921 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-19 11:23:12,923 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-19 11:23:12,924 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-19 11:23:12,927 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-19 11:23:12,933 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:12,934 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:12,935 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:12,935 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:12,936 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:12,936 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:12,937 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:12,937 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:12,940 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:12,940 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:12,941 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:12,941 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:12,941 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:12,941 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:12,942 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:12,942 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:12,947 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-19 11:23:13,139 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-19 11:23:17,922 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-19 11:23:17,922 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 11:23:18,037 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 11:23:18,037 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 11:23:18,037 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 11:23:18,037 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 11:23:21,464 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 11:23:21,466 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 11:23:21,477 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 11:23:21,479 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 11:23:21,927 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-19 11:23:21,958 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_mgcytyPdxETg
2025-05-19 11:23:21,961 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:23:21,963 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:23:22,367 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_qdTxHss7AYSP
2025-05-19 11:23:22,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 11:23:22,370 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 11:23:22,428 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 11:23:22,429 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 11:23:22,438 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 11:23:22,438 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 11:23:22,448 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 11:23:22,449 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 11:23:22,645 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 11:23:22,645 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 11:23:22,646 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 11:23:22,647 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Successfully created chat_message_list for English and Hindi tests.
2025-05-19 11:23:22,648 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=chat_message_list)
2025-05-19 11:23:22,648 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3041, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-19 11:23:22,650 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-19 11:23:22,650 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-19 11:23:22,651 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END ---
2025-05-19 11:23:22,651 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 11:23:22,652 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 11:23:22,653 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 11:23:22,653 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 11:23:22,654 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-19 11:23:22,654 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-19 11:23:22,659 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_mgcytyPdxETg.
2025-05-19 11:24:11,545 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 11:24:11,546 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 11:24:11,549 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 11:24:11,549 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 11:24:11,967 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 11:24:17,729 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:27,584 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:31,272 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:32,821 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:39,857 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:41,716 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:45,863 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:46,804 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:48,377 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:50,817 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:24:52,081 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:05,872 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:07,524 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:16,110 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:18,135 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:24,806 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:35,796 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:51,490 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:52,322 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:54,410 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:25:56,487 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:27:42,330 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:27:43,160 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:27:46,719 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:27:52,080 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:27:52,825 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:27:53,497 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:27:55,197 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:28:01,927 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:28:04,418 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:28:09,142 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:28:09,736 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:28:15,093 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:28:17,756 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:28:19,169 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:28:50,070 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:29:14,714 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:29:30,221 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:29:38,745 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:30:04,877 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:30:06,554 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:30:18,626 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:01,743 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:10,999 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:21,055 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:22,911 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:23,510 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:24,689 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:28,222 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:30,708 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:32,164 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:36,119 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:36,770 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:37,702 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:39,952 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:45,246 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:48,912 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:31:57,964 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:07,248 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:18,635 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:19,254 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:22,329 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:23,787 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:35,176 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:37,681 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:38,811 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:45,821 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:49,395 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:50,998 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:51,927 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:32:56,008 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:01,068 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:02,227 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:09,837 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:13,646 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:18,973 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:43,961 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:50,092 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:54,853 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:57,726 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:33:59,674 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:02,988 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:08,645 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:09,516 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:14,208 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:17,674 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:32,365 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:36,275 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:38,674 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:42,637 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:34:46,187 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:17,187 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:23,125 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:26,264 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:29,416 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:31,655 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:34,616 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:36,690 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:39,431 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:42,753 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:46,450 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:48,566 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:51,517 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:35:53,159 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:07,397 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:14,625 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:15,337 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:18,804 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:21,599 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:22,585 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:28,369 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:36,593 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:37,365 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:42,007 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:44,228 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:45,300 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:46,519 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:47,898 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:51,684 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:56,832 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:36:58,401 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:37:01,771 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:37:05,602 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:37:07,073 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:37:10,832 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:37:12,421 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:37:13,316 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:37:19,720 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:37:21,724 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:41:42,698 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 11:41:42,698 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 11:41:42,698 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 11:41:42,698 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 11:41:42,698 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 11:41:42,698 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-19 11:41:42,698 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 11:41:43,372 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 11:41:43,372 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-19 11:41:43,372 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-19 11:41:43,372 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-19 11:41:43,372 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-19 11:41:43,372 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-19 11:41:43,372 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-19 11:41:43,372 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-19 11:41:43,372 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-19 11:41:43,391 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-19 11:41:43,396 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:41:43,399 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:41:43,409 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-19 11:41:43,576 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-19 11:41:48,385 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-19 11:41:48,385 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 11:41:48,441 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 11:41:48,442 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 11:41:48,442 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 11:41:48,443 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 11:42:14,618 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 11:42:14,618 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 11:42:14,620 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 11:42:14,621 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 11:42:16,098 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-19 11:42:16,127 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED (ChatContext Deep Dive) --- Room: voice-assistant-room, Job: AJ_sxzpU8oKt25A
2025-05-19 11:42:16,227 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 11:42:16,228 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 11:42:16,457 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_jogK42bchuTe
2025-05-19 11:42:16,458 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 11:42:16,458 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 11:42:16,495 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 11:42:16,495 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 11:42:16,505 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 11:42:16,506 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 11:42:16,516 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 11:42:16,517 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 11:42:16,649 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 11:42:16,649 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 11:42:16,649 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 11:42:16,651 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 11:42:16,652 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(messages=...)
2025-05-19 11:42:16,652 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM Direct Test: Error creating ChatContext: ChatContext.__init__() got an unexpected keyword argument 'messages'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3557, in entrypoint
    chat_ctx_for_test = ChatContext(messages=chat_message_list)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChatContext.__init__() got an unexpected keyword argument 'messages'
2025-05-19 11:42:16,654 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM Direct Test: chat_ctx_for_test is None, skipping llm.chat() call.
2025-05-19 11:42:16,654 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent may not function correctly. !!!
2025-05-19 11:42:16,655 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 11:42:16,655 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 11:42:16,656 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 11:42:16,656 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 11:42:16,657 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. Session will manage greeting and turns.
2025-05-19 11:42:16,658 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Main agent logic running. Waiting for AgentSession task to complete.
2025-05-19 11:42:16,663 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_sxzpU8oKt25A.
2025-05-19 11:42:16,664 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 11:42:28,284 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:42:29,848 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:42:41,095 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:42:45,694 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:42:50,058 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:42:52,700 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:03,645 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:08,995 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:12,359 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:14,156 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:15,356 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:19,652 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:30,472 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:40,534 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:43:42,317 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:44:44,111 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:44:50,819 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:45:00,995 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:45:03,209 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:45:04,702 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:45:05,943 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:45:19,581 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:45:36,035 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:45:36,736 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1484, in request
    response = await self._client.send(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1502, in request
    raise APITimeoutError(request=request) from err
openai.APITimeoutError: Request timed out.
2025-05-19 11:45:36,944 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 254, in _run
    raise APITimeoutError() from None
livekit.agents._exceptions.APITimeoutError: Request timed out.
2025-05-19 11:45:40,880 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:46:11,859 - livekit.plugins.openai - ERROR - [job_thread_runner] - Error in _decode_loop
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 136, in handle_async_request
    raise exc
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 32, in read
    with map_exceptions(exc_map):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1484, in request
    response = await self._client.send(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 155, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ReadTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 234, in _decode_loop
    async with oai_stream as stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_response.py", line 650, in __aenter__
    self.__response = await self._api_request
                      ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\audio\speech.py", line 190, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1502, in request
    raise APITimeoutError(request=request) from err
openai.APITimeoutError: Request timed out.
2025-05-19 11:46:11,864 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 203, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\tts.py", line 254, in _run
    raise APITimeoutError() from None
livekit.agents._exceptions.APITimeoutError: Request timed out.
2025-05-19 11:46:12,999 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:46:56,323 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:47:11,891 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:47:26,604 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:47:38,287 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:48:23,397 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 11:48:36,535 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:13:56,957 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:13:56,957 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:13:56,957 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:13:56,957 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:13:56,958 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 12:13:56,958 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-19 12:13:56,958 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 12:13:57,611 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 12:13:57,611 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-19 12:13:57,611 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-19 12:13:57,611 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-19 12:13:57,612 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-19 12:13:57,612 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-19 12:13:57,612 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-19 12:13:57,614 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-19 12:13:57,615 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-19 12:13:57,619 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-19 12:13:57,625 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:13:57,625 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:13:57,626 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:13:57,627 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:13:57,627 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:13:57,628 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:13:57,628 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:13:57,628 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:13:57,631 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:13:57,631 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:13:57,631 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:13:57,631 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:13:57,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:13:57,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:13:57,633 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:13:57,634 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:13:57,638 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-19 12:13:57,773 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-19 12:14:02,614 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-19 12:14:02,614 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 12:14:02,688 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:14:02,689 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:14:02,689 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:14:02,689 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:15:11,599 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 12:15:11,601 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 12:15:11,610 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 12:15:11,613 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 12:15:12,057 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-19 12:15:12,082 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_uiMgdUyB7xPK
2025-05-19 12:15:12,162 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:15:12,163 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:15:12,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_oq6pt8PBD9Tt
2025-05-19 12:15:12,370 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 12:15:12,371 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 12:15:12,408 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 12:15:12,408 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 12:15:12,418 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 12:15:12,419 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 12:15:12,428 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 12:15:12,429 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 12:15:12,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 12:15:12,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 12:15:12,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 12:15:12,559 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 12:15:12,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 12:15:12,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 12:15:12,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 12:15:12,565 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call setup or stream: 'async for' requires an object with __aiter__ method, got coroutine
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3595, in entrypoint
    async for chunk in asyncio.wait_for(llm_plugin.chat(chat_ctx=chat_ctx_for_test), timeout=15):
TypeError: 'async for' requires an object with __aiter__ method, got coroutine
2025-05-19 12:15:12,566 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-19 12:15:12,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 12:15:12,567 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 12:15:12,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 12:15:12,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 12:15:12,568 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() called. The AgentSession should now run and call agent methods like on_transcript.
2025-05-19 12:15:12,568 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Entrypoint setup complete. Agent session is running.
2025-05-19 12:24:52,552 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:24:52,552 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:24:52,552 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:24:52,552 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:24:52,553 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 12:24:52,553 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server and Agent Worker thread. ---
2025-05-19 12:24:52,553 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 12:24:53,198 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 12:24:53,198 - __main__ - INFO - [MainThread] - --- __main__: Creating worker thread (LiveKitAgentWorker) ---
2025-05-19 12:24:53,198 - __main__ - INFO - [LiveKitAgentWorker] - --- run_worker: Attempting to start LiveKit Agent Worker ---
2025-05-19 12:24:53,198 - __main__ - INFO - [MainThread] - --- __main__: Worker thread started.
2025-05-19 12:24:53,198 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Modified sys.argv for cli.run_app: ['livekit_agent_script_embedded.py', 'start']
2025-05-19 12:24:53,198 - __main__ - INFO - [MainThread] - --- __main__: Waiting a few seconds for agent worker to potentially initialize...
2025-05-19 12:24:53,198 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applying nest_asyncio and calling cli.run_app(worker_options)...
2025-05-19 12:24:53,203 - asyncio - DEBUG - [LiveKitAgentWorker] - Using proactor: IocpProactor
2025-05-19 12:24:53,203 - __main__ - INFO - [LiveKitAgentWorker] - run_worker: Applied nest_asyncio.
2025-05-19 12:24:53,203 - livekit.agents - INFO - [LiveKitAgentWorker] - starting worker
2025-05-19 12:24:53,214 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:24:53,215 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:24:53,215 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:24:53,216 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:24:53,217 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:24:53,217 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:24:53,218 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:24:53,218 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:24:53,220 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:24:53,220 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:24:53,220 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:24:53,223 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:24:53,223 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:24:53,223 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:24:53,223 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:24:53,223 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:24:53,229 - livekit.agents - INFO - [LiveKitAgentWorker] - see tracing information at http://localhost:8081/debug
2025-05-19 12:24:53,383 - livekit.agents - INFO - [LiveKitAgentWorker] - registered worker
2025-05-19 12:24:58,203 - __main__ - INFO - [MainThread] - --- __main__: Worker thread IS ALIVE. Proceeding to start Uvicorn.
2025-05-19 12:24:58,203 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 12:24:58,283 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:24:58,287 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:24:58,287 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:24:58,287 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:25:03,938 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 12:25:03,939 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 12:25:03,943 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 12:25:03,943 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 12:25:05,323 - livekit.agents - INFO - [LiveKitAgentWorker] - received job request
2025-05-19 12:25:05,353 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_a2CArnCUUpxH
2025-05-19 12:25:05,416 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:25:05,417 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:25:05,676 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_4cPsxfoBVmUA
2025-05-19 12:25:05,678 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 12:25:05,680 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 12:25:05,752 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 12:25:05,752 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 12:25:05,762 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 12:25:05,763 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 12:25:05,773 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 12:25:05,773 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 12:25:05,895 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 12:25:05,895 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 12:25:05,896 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 12:25:05,897 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 12:25:05,897 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 12:25:05,897 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 12:25:05,897 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 12:25:05,898 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call setup or stream: An asyncio.Future, a coroutine or an awaitable is required
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3593, in entrypoint
    llm_test_stream = await asyncio.wait_for(llm_plugin.chat(chat_ctx=chat_ctx_for_test), timeout=15)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 460, in wait_for
    fut = ensure_future(fut, loop=loop)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 649, in ensure_future
    return _ensure_future(coro_or_future, loop=loop)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 664, in _ensure_future
    raise TypeError('An asyncio.Future, a coroutine or an awaitable '
TypeError: An asyncio.Future, a coroutine or an awaitable is required
2025-05-19 12:25:05,913 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-19 12:25:05,913 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 12:25:05,914 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 12:25:05,914 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 12:25:05,915 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 12:25:05,916 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() finished/returned. This typically means the session has ended.
2025-05-19 12:25:05,917 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_a2CArnCUUpxH.
2025-05-19 12:25:06,079 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 12:25:08,887 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:25:16,855 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:25:26,079 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:25:29,485 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:25:31,797 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:25:46,778 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:25:48,661 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:25:53,003 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:26:04,486 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:32:59,856 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:32:59,856 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:32:59,856 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:32:59,856 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:32:59,856 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 12:32:59,856 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 12:32:59,856 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 12:33:00,455 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 12:33:00,455 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 12:33:00,455 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 12:33:00,519 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:33:00,519 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:33:00,519 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:33:00,519 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:33:19,790 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:33:19,790 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:33:19,790 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:33:19,790 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:33:19,790 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 12:33:19,790 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 12:33:19,790 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 12:33:19,799 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:19,799 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:19,799 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:19,803 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:19,804 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:19,804 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:19,806 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:19,806 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:19,809 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:19,809 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:19,809 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:19,810 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:19,810 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:19,810 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:19,810 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:19,811 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:19,816 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 12:33:19,949 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 12:33:28,452 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 12:33:28,454 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 12:33:28,454 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 12:33:28,454 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 12:33:29,037 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 12:33:29,058 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_MCnWWo7Q76n4
2025-05-19 12:33:29,136 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:33:29,136 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:33:29,357 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_UCju6gcN2tyB
2025-05-19 12:33:29,358 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 12:33:29,358 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 12:33:29,412 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 12:33:29,412 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 12:33:29,422 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 12:33:29,422 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 12:33:29,432 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 12:33:29,432 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 12:33:29,559 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 12:33:29,559 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 12:33:29,559 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 12:33:29,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 12:33:29,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 12:33:29,562 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 12:33:29,562 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 12:33:29,563 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3613, in entrypoint
    llm_test_stream = await llm_plugin.chat(chat_ctx=chat_ctx_for_test)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-19 12:33:29,565 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-19 12:33:29,565 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 12:33:29,566 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 12:33:29,566 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 12:33:29,567 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 12:33:29,569 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() finished/returned. This typically means the session has ended (e.g., room closed).
2025-05-19 12:33:29,569 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_MCnWWo7Q76n4.
2025-05-19 12:33:29,723 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 12:33:32,307 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:33:41,953 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:33:57,673 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:34:08,221 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:34:17,676 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:39:21,076 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:39:21,076 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:39:21,076 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:39:21,076 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:39:21,076 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 12:39:21,076 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 12:39:21,076 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 12:39:21,748 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 12:39:21,748 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 12:39:21,748 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 12:39:21,799 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:39:21,799 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:39:21,799 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:39:21,799 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:39:43,535 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 12:39:43,535 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 12:39:43,535 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 12:39:43,535 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 12:39:43,536 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 12:39:43,536 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 12:39:43,540 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 12:39:43,546 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:39:43,546 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:39:43,547 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:39:43,548 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:39:43,548 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:39:43,549 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:39:43,549 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:39:43,551 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:39:43,554 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:39:43,554 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:39:43,554 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:39:43,554 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:39:43,554 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:39:43,554 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:39:43,554 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:39:43,554 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:39:43,558 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 12:39:43,719 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 12:40:05,107 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 12:40:05,108 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 12:40:05,108 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 12:40:05,108 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 12:40:06,463 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 12:40:06,491 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_3pPqvRhgcnKs
2025-05-19 12:40:06,545 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 12:40:06,546 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 12:40:06,795 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_KCEDPdcwQPFR
2025-05-19 12:40:06,795 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 12:40:06,796 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 12:40:06,849 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 12:40:06,849 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 12:40:06,860 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 12:40:06,860 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 12:40:06,869 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 12:40:06,870 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 12:40:06,994 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 12:40:06,994 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 12:40:06,994 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 12:40:06,997 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 12:40:06,997 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 12:40:06,997 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 12:40:06,998 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 12:40:08,190 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM plugin direct test: Received stream, but no text chunks were collected.
2025-05-19 12:40:08,191 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-19 12:40:08,192 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 12:40:08,193 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 12:40:08,194 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 12:40:08,195 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 12:40:08,199 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() finished/returned. This typically means the session has ended (e.g., room closed).
2025-05-19 12:40:08,200 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_3pPqvRhgcnKs.
2025-05-19 12:40:08,202 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 12:40:14,688 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:40:19,389 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:40:29,414 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:40:38,317 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:40:52,204 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:40:54,158 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:40:57,743 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:41:02,735 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:41:05,136 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:41:15,026 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:41:52,623 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:41:55,112 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 12:41:57,974 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:02:44,089 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:02:44,089 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:02:44,089 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:02:44,089 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:02:44,089 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:02:44,089 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:02:44,089 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:02:44,748 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 13:02:44,748 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:02:44,755 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:02:44,805 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:02:44,805 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:02:44,805 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:02:44,805 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:03:02,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:03:02,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:03:02,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:03:02,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:03:02,882 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:03:02,882 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:03:02,886 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:03:02,891 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:02,891 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:02,892 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:02,892 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:02,893 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:02,893 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:02,893 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:02,893 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:02,896 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:02,897 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:02,897 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:02,897 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:02,897 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:02,898 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:02,898 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:02,898 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:02,901 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:03:03,035 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:03:06,188 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:03:06,188 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:03:06,188 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:03:06,188 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:03:07,599 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 13:03:07,629 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_jNDwDivNtJht
2025-05-19 13:03:07,658 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:03:07,664 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:03:07,963 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_MLZRyJvJxSJj
2025-05-19 13:03:07,964 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 13:03:07,964 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 13:03:08,018 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 13:03:08,018 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 13:03:08,029 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 13:03:08,029 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 13:03:08,040 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 13:03:08,040 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 13:03:08,167 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 13:03:08,167 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 13:03:08,167 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 13:03:08,169 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 13:03:08,169 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 13:03:08,170 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 13:03:08,170 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 13:03:09,911 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM plugin direct test: Received stream, but no text chunks were collected.
2025-05-19 13:03:09,912 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-19 13:03:09,913 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 13:03:09,915 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 13:03:09,916 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 13:03:09,916 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 13:03:09,918 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() finished/returned. This typically means the session has ended (e.g., room closed).
2025-05-19 13:03:09,919 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_jNDwDivNtJht.
2025-05-19 13:03:09,922 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 13:03:12,481 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:03:14,125 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:03:18,652 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:03:23,505 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:03:31,491 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:03:38,196 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:03:41,691 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:08:48,344 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-19 13:08:48,576 - livekit.agents - WARNING - [MainThread] - exiting forcefully
2025-05-19 13:09:51,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:09:51,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:09:51,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:09:51,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:09:51,943 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:09:51,943 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:09:51,947 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:09:51,953 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:09:51,953 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:09:51,953 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:09:51,953 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:09:51,953 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:09:51,953 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:09:51,956 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:09:51,956 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:09:51,960 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:09:51,960 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:09:51,960 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:09:51,960 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:09:51,960 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:09:51,961 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:09:51,961 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:09:51,961 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:09:51,962 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:09:52,112 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:11:07,648 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:11:07,648 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:11:07,648 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:11:07,648 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:11:07,648 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:11:07,648 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:11:07,648 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:11:08,265 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 13:11:08,265 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:11:08,282 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:11:08,334 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:11:08,335 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:11:08,335 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:11:08,335 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:11:43,625 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:11:43,625 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:11:43,625 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:11:43,625 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:11:43,625 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:11:43,625 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:11:43,625 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:11:43,641 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:43,641 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:43,641 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:43,645 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:43,646 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:43,646 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:43,647 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:43,648 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:43,650 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:43,651 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:43,651 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:43,651 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:43,651 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:43,651 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:43,651 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:43,651 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:43,651 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:11:43,830 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:11:49,089 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:11:49,089 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:11:49,089 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:11:49,089 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:11:49,486 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 13:11:49,521 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_hVZgGGMXCoKc
2025-05-19 13:11:49,585 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:11:49,586 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:11:49,817 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_42idbrrZzwta
2025-05-19 13:11:49,818 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 13:11:49,818 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 13:11:49,872 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 13:11:49,872 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 13:11:49,881 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 13:11:49,882 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 13:11:49,891 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 13:11:49,892 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 13:11:50,014 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 13:11:50,015 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 13:11:50,015 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 13:11:50,016 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 13:11:50,017 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 13:11:50,017 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 13:11:50,017 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 13:11:50,931 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:50,996 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:50,997 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,086 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,086 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:11:51,168 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,169 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content=',', tool_calls=[]) usage=None
2025-05-19 13:11:51,222 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:11:51,222 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,307 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,311 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:11:51,388 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,389 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:11:51,445 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,446 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:11:51,638 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,639 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,790 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:11:51,791 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,826 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,826 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:11:51,831 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=ChoiceDelta(role='assistant', content=None, tool_calls=[]) usage=None
2025-05-19 13:11:51,832 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpQ3n6FJraOgNy0LfKhbVpmxJFJf' delta=None usage=CompletionUsage(completion_tokens=28, prompt_tokens=102, prompt_cached_tokens=0, cache_creation_tokens=0, cache_read_tokens=0, total_tokens=130)
2025-05-19 13:11:51,833 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM plugin direct test: Received stream, but no text chunks were collected.
2025-05-19 13:11:51,833 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-19 13:11:51,835 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 13:11:51,835 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 13:11:51,835 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 13:11:51,836 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 13:11:51,837 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() finished/returned. This typically means the session has ended (e.g., room closed).
2025-05-19 13:11:51,838 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_hVZgGGMXCoKc.
2025-05-19 13:11:51,840 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 13:11:59,842 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:12:16,050 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:12:20,106 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:12:39,897 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:12:52,785 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:12:54,672 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:23:41,255 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-19 13:23:41,463 - livekit.agents - WARNING - [MainThread] - exiting forcefully
2025-05-19 13:24:06,315 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:24:06,315 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:24:06,315 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:24:06,315 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:24:06,315 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:24:06,315 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:24:06,322 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:24:06,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:24:06,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:24:06,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:24:06,329 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:24:06,332 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:24:06,340 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:24:06,539 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:26:27,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:26:27,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:26:27,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:26:27,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:26:27,656 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:26:27,656 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:26:27,656 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:26:28,355 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 13:26:28,355 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:26:28,355 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:26:28,408 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:26:28,408 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:26:28,408 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:26:28,409 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:26:55,189 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:26:55,189 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:26:55,189 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:26:55,190 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:26:55,190 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:26:55,190 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:26:55,190 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:26:55,198 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:26:55,198 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:26:55,198 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:26:55,202 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:26:55,202 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:26:55,203 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:26:55,203 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:26:55,203 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:26:55,206 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:26:55,207 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:26:55,207 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:26:55,207 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:26:55,207 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:26:55,207 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:26:55,207 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:26:55,207 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:26:55,207 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:26:55,406 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:27:00,414 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:27:00,414 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:27:00,414 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:27:00,414 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:27:01,074 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 13:27:01,114 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_PMrk7F7qEdFR
2025-05-19 13:27:01,178 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:27:01,179 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:27:01,414 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_LbvrxMyhaEHS
2025-05-19 13:27:01,415 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 13:27:01,415 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 13:27:01,469 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 13:27:01,469 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 13:27:01,479 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 13:27:01,480 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 13:27:01,490 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 13:27:01,491 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 13:27:01,612 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 13:27:01,612 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 13:27:01,612 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 13:27:01,613 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 13:27:01,614 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 13:27:01,614 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 13:27:01,614 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 13:27:02,679 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpelhYk67hflPHBbb7FdjISAXFLv' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:27:02,681 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpelhYk67hflPHBbb7FdjISAXFLv' delta=ChoiceDelta(role='assistant', content='OK', tool_calls=[]) usage=None
2025-05-19 13:27:02,683 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpelhYk67hflPHBbb7FdjISAXFLv' delta=ChoiceDelta(role='assistant', content=None, tool_calls=[]) usage=None
2025-05-19 13:27:02,684 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpelhYk67hflPHBbb7FdjISAXFLv' delta=None usage=CompletionUsage(completion_tokens=1, prompt_tokens=102, prompt_cached_tokens=0, cache_creation_tokens=0, cache_read_tokens=0, total_tokens=103)
2025-05-19 13:27:02,685 - __main__ - INFO - [job_thread_runner] - [LLM Test] Final collected response: 'OK'
2025-05-19 13:27:02,685 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM plugin direct test SUCCEEDED. Collected response: 'OK'
2025-05-19 13:27:02,686 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-19 13:27:02,687 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 13:27:02,688 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 13:27:02,689 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 13:27:02,689 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 13:27:02,692 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() finished/returned. This typically means the session has ended (e.g., room closed).
2025-05-19 13:27:02,694 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_PMrk7F7qEdFR.
2025-05-19 13:27:02,697 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 13:27:06,662 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:27:21,682 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:30:30,658 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:31:06,171 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:31:09,199 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:31:16,895 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:32:36,598 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:32:43,107 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:32:45,505 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:08,809 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:11,811 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:12,833 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:17,215 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:21,003 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:26,078 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:32,569 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:33,940 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:37,151 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:42,713 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:43,933 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:47,430 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:49,279 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:33:50,940 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:34:09,709 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:34:48,186 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:34:57,714 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:35:52,634 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:35:53,970 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:36:03,599 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:42:23,679 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:42:23,679 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:42:23,679 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:42:23,680 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:42:23,680 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:42:23,681 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:42:23,681 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:42:24,314 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 13:42:24,314 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:42:24,314 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:42:24,368 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:42:24,368 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:42:24,368 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:42:24,368 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:42:50,576 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:42:50,576 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:42:50,576 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:42:50,576 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:42:50,576 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:42:50,576 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:42:50,576 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:42:50,576 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:50,576 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:50,576 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:50,590 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:50,590 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:50,591 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:50,591 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:50,592 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:50,594 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:50,595 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:50,596 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:50,596 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:50,596 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:50,596 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:50,596 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:50,597 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:50,600 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:42:50,752 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:42:55,606 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:42:55,610 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:42:55,614 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:42:55,614 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:42:56,029 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 13:42:56,051 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_99MHUahFRG2Y
2025-05-19 13:42:56,104 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:42:56,113 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:42:56,361 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_TEenzGZQq4SP
2025-05-19 13:42:56,362 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 13:42:56,363 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 13:42:56,416 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 13:42:56,416 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 13:42:56,426 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 13:42:56,427 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 13:42:56,435 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 13:42:56,437 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 13:42:56,557 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 13:42:56,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 13:42:56,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 13:42:56,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 13:42:56,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 13:42:56,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 13:42:56,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 13:42:57,702 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:42:57,763 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:42:57,765 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:42:57,895 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:42:57,898 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:42:57,933 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:42:57,934 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:42:57,940 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=ChoiceDelta(role='assistant', content=None, tool_calls=[]) usage=None
2025-05-19 13:42:57,941 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYpuAKVSkPfDMZu5C3GYkDWIPdGXh' delta=None usage=CompletionUsage(completion_tokens=9, prompt_tokens=102, prompt_cached_tokens=0, cache_creation_tokens=0, cache_read_tokens=0, total_tokens=111)
2025-05-19 13:42:57,943 - __main__ - INFO - [job_thread_runner] - [LLM Test] Final collected response: ' '
2025-05-19 13:42:57,943 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM plugin direct test SUCCEEDED. Collected response: ' '
2025-05-19 13:42:57,943 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-19 13:42:57,944 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 13:42:57,944 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 13:42:57,945 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 13:42:57,945 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 13:42:57,947 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() finished/returned. This typically means the session has ended (e.g., room closed).
2025-05-19 13:42:57,947 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_99MHUahFRG2Y.
2025-05-19 13:42:57,949 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 13:42:59,875 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:43:01,800 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:43:08,621 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:43:11,031 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:43:21,973 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:43:26,261 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:43:43,984 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:44:18,206 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:44:20,497 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:44:24,792 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:44:34,702 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:44:47,448 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:44:58,712 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:01,294 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:06,039 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:11,225 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:14,916 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:18,370 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:19,826 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:21,730 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:29,325 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:33,133 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:35,607 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:39,024 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:40,266 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:41,742 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:45,967 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:49,160 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:54,457 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:45:56,550 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:46:04,500 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:46:11,177 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:46:25,579 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:46:27,222 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 13:46:34,215 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-19 13:46:34,424 - livekit.agents - WARNING - [MainThread] - exiting forcefully
2025-05-19 13:46:37,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:46:37,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:46:37,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:46:37,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:46:37,760 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:46:37,760 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:46:37,765 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:46:37,772 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:46:37,773 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:46:37,773 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:46:37,774 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:46:37,774 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:46:37,774 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:46:37,775 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:46:37,775 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:46:37,777 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:46:37,778 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:46:37,778 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:46:37,778 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:46:37,778 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:46:37,778 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:46:37,779 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:46:37,779 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:46:37,783 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:46:37,917 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:46:48,738 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-19 13:46:48,739 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Token Server mode). ---
2025-05-19 13:46:51,730 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:46:51,730 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:46:51,730 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:46:51,730 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:46:51,730 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:46:51,730 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:46:51,730 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:46:52,389 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 13:46:52,389 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:46:52,392 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:46:52,440 - __main__ - ERROR - [MainThread] - --- __main__: Uvicorn server failed: '_io.BufferedWriter' object has no attribute 'encoding'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3694, in <module>
    uvicorn.run(
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\main.py", line 580, in run
    server.run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 70, in serve
    await self._serve(sockets)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\server.py", line 77, in _serve
    config.load()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\config.py", line 435, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\uvicorn\importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\importlib\__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1206, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1178, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1149, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3276, in <module>
    if sys.stdout.encoding != 'UTF-8':
       ^^^^^^^^^^^^^^^^^^^
  File "<frozen codecs>", line 409, in __getattr__
AttributeError: '_io.BufferedWriter' object has no attribute 'encoding'
2025-05-19 13:46:53,614 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-19 13:46:53,614 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-19 13:46:53,620 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited SystemExit (code: 0).
2025-05-19 13:46:53,620 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-19 13:49:36,771 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:49:36,771 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:49:36,775 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:49:36,775 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:49:36,775 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:49:36,775 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:49:36,775 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:49:37,409 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 13:49:37,409 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:49:37,409 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:49:37,459 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:49:37,459 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:49:37,459 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:49:37,459 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:49:50,220 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:49:50,220 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:49:50,220 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:49:50,220 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:49:50,227 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:49:50,227 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:49:50,230 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:49:50,238 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:49:50,238 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:49:50,238 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:49:50,240 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:49:50,240 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:49:50,240 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:49:50,240 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:49:50,241 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:49:50,243 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:49:50,244 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:49:50,244 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:49:50,244 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:49:50,244 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:49:50,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:49:50,245 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:49:50,246 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:49:50,249 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:49:50,400 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:49:55,490 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:49:55,490 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:49:55,495 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:49:55,495 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:51:26,068 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:51:26,068 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:51:26,068 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:51:26,068 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:51:26,068 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:51:26,068 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:51:26,068 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:51:26,079 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-19 13:51:26,079 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-19 13:51:26,079 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:51:26,079 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:51:26,120 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:51:26,120 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:51:26,120 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:51:26,120 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:51:34,870 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:51:34,870 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:51:34,870 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:51:34,870 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:52:39,314 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:52:39,314 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:52:39,315 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:52:39,315 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:52:39,315 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:52:39,316 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:52:39,316 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:52:39,319 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-19 13:52:39,320 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-19 13:52:39,320 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:52:39,323 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:52:39,361 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:52:39,361 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:52:39,361 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:52:39,361 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:52:45,172 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:52:45,172 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:52:45,172 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:52:45,172 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:53:39,919 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:53:39,919 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:53:39,919 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:53:39,919 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:53:39,919 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:53:39,919 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:53:39,919 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:53:39,919 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-19 13:53:39,919 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-19 13:53:39,919 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:53:39,919 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:53:39,969 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:53:39,969 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:53:39,969 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:53:39,969 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:53:54,791 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:53:54,791 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:53:54,791 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:53:54,791 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:53:54,798 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:53:54,798 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 13:53:54,801 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 13:53:54,807 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:53:54,807 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:53:54,810 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:53:54,810 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:53:54,811 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:53:54,811 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:53:54,812 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:53:54,812 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:53:54,815 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:53:54,815 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:53:54,815 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:53:54,815 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:53:54,815 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:53:54,815 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:53:54,815 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:53:54,815 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:53:54,815 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 13:53:54,960 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 13:54:02,563 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:54:02,563 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:54:02,563 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 13:54:02,563 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 13:54:03,086 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 13:54:03,113 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_RFMYc9acGP2j
2025-05-19 13:54:03,142 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 13:54:03,143 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 13:54:03,461 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_LEXZZM26PF3q
2025-05-19 13:54:03,461 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 13:54:03,462 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 13:54:03,511 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 13:54:03,512 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 13:54:03,522 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 13:54:03,522 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 13:54:03,533 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 13:54:03,534 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 13:54:03,656 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 13:54:03,657 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 13:54:03,657 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 13:54:03,659 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 13:54:03,659 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 13:54:03,659 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 13:54:03,659 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 13:54:04,661 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:04,778 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:04,778 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:04,899 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=',', tool_calls=[]) usage=None
2025-05-19 13:54:04,899 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:05,008 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,009 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,093 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:05,094 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,239 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,241 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,316 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:05,316 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,569 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:05,571 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,597 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:05,598 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,691 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:05,692 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,831 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,833 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,892 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:05,894 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,980 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:05,981 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:06,034 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:06,035 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:06,217 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:06,218 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 13:54:06,252 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:06,253 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 13:54:06,266 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=ChoiceDelta(role='assistant', content=None, tool_calls=[]) usage=None
2025-05-19 13:54:06,268 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYq4v8xbhCyhox17lwPrVgxLDa7gA' delta=None usage=CompletionUsage(completion_tokens=43, prompt_tokens=101, prompt_cached_tokens=0, cache_creation_tokens=0, cache_read_tokens=0, total_tokens=144)
2025-05-19 13:54:06,269 - __main__ - INFO - [job_thread_runner] - [LLM Test] Final collected response: ',         '
2025-05-19 13:54:06,270 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM plugin direct test SUCCEEDED. Collected response: ',         '
2025-05-19 13:54:06,271 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-19 13:54:06,272 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 13:54:06,273 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 13:54:06,274 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 13:54:06,275 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3626, in entrypoint
    stt_plugin.on("transcript", handle_transcript)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 161, in on
    raise ValueError(
ValueError: Cannot register an async callback with `.on()`. Use `asyncio.create_task` within your synchronous callback instead.
2025-05-19 13:59:28,767 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:59:28,767 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:59:28,767 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:59:28,767 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 13:59:28,767 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 13:59:28,767 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 13:59:28,767 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 13:59:29,417 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 13:59:29,417 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 13:59:29,417 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 13:59:29,470 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 13:59:29,470 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 13:59:29,470 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 13:59:29,470 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 14:00:04,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 14:00:04,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 14:00:04,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 14:00:04,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 14:00:04,843 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 14:00:04,843 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 14:00:04,848 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 14:00:04,848 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:04,848 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:04,848 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:04,857 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:04,858 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:04,858 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:04,859 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:04,859 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:04,862 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:04,862 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:04,862 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:04,862 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:04,862 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:04,862 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:04,862 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:04,862 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:04,869 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 14:00:05,003 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 14:00:09,642 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 14:00:09,642 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 14:00:09,642 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 14:00:09,642 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 14:00:10,164 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 14:00:10,196 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_mYfxJKqZz5Nn
2025-05-19 14:00:10,278 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:00:10,279 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:00:10,498 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_BfHcRexpyA4h
2025-05-19 14:00:10,499 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 14:00:10,499 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 14:00:10,551 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 14:00:10,551 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 14:00:10,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 14:00:10,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 14:00:10,571 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 14:00:10,572 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 14:00:10,701 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 14:00:10,701 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 14:00:10,702 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 14:00:10,704 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 14:00:10,704 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 14:00:10,704 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 14:00:10,705 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 14:00:11,780 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:00:11,891 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:00:11,891 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:00:12,068 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:00:12,068 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 14:00:12,113 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:00:12,114 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:00:12,116 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=ChoiceDelta(role='assistant', content=None, tool_calls=[]) usage=None
2025-05-19 14:00:12,117 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqAqdyKkpOVvmkupAuqW432b0pP9' delta=None usage=CompletionUsage(completion_tokens=9, prompt_tokens=101, prompt_cached_tokens=0, cache_creation_tokens=0, cache_read_tokens=0, total_tokens=110)
2025-05-19 14:00:12,119 - __main__ - INFO - [job_thread_runner] - [LLM Test] Final collected response: ' '
2025-05-19 14:00:12,120 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM plugin direct test SUCCEEDED. Collected response: ' '
2025-05-19 14:00:12,120 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-19 14:00:12,121 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 14:00:12,121 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 14:00:12,121 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 14:00:12,121 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Registered sync_transcript_handler with STT plugin.
2025-05-19 14:00:12,122 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 14:00:12,122 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] Error in session.start(): 'Room' object has no attribute 'is_connected'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3638, in entrypoint
    logger.debug("[AgentEntry] Before session.start() - Room state: connected=%s", ctx.room.is_connected())
                                                                                   ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Room' object has no attribute 'is_connected'
2025-05-19 14:00:12,124 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-19 14:00:12,124 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3638, in entrypoint
    logger.debug("[AgentEntry] Before session.start() - Room state: connected=%s", ctx.room.is_connected())
                                                                                   ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Room' object has no attribute 'is_connected'
2025-05-19 14:05:30,269 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 14:05:30,269 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 14:05:30,269 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 14:05:30,269 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 14:05:30,269 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 14:05:30,269 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 14:05:30,269 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 14:05:30,905 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 14:05:30,905 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 14:05:30,910 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 14:05:30,984 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 14:05:30,984 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 14:05:30,984 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 14:05:30,984 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 14:05:41,806 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 14:05:41,806 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 14:05:41,806 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 14:05:41,806 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 14:05:41,806 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 14:05:41,806 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 14:05:41,806 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 14:05:41,806 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:41,806 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:41,806 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:41,818 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:41,819 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:41,820 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:41,820 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:41,821 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:41,823 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:41,823 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:41,824 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:41,824 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:41,824 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:41,825 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:41,825 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:41,825 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:41,825 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 14:05:42,001 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 14:05:46,484 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 14:05:46,484 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 14:05:46,484 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 14:05:46,484 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 14:05:46,903 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 14:05:46,928 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_YYo5wFyYxa8P
2025-05-19 14:05:47,038 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 14:05:47,040 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 14:05:47,234 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_ZgZaNE68d3Mc
2025-05-19 14:05:47,236 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 14:05:47,237 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 14:05:47,305 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 14:05:47,305 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 14:05:47,315 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 14:05:47,315 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 14:05:47,326 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 14:05:47,327 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 14:05:47,453 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 14:05:47,454 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 14:05:47,454 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 14:05:47,455 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 14:05:47,456 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 14:05:47,456 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 14:05:47,456 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 14:05:48,673 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:48,740 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:48,740 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:48,892 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:48,893 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 14:05:49,209 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,210 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content=',', tool_calls=[]) usage=None
2025-05-19 14:05:49,268 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 14:05:49,270 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,360 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,362 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 14:05:49,467 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,468 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,563 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,564 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content=' ', tool_calls=[]) usage=None
2025-05-19 14:05:49,669 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,672 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,684 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content='', tool_calls=[]) usage=None
2025-05-19 14:05:49,689 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=ChoiceDelta(role='assistant', content=None, tool_calls=[]) usage=None
2025-05-19 14:05:49,691 - __main__ - INFO - [job_thread_runner] - [LLM Test] Got chunk: id='chatcmpl-BYqGHnh1T3DKchT2SGeJu1r1eBRA6' delta=None usage=CompletionUsage(completion_tokens=23, prompt_tokens=101, prompt_cached_tokens=0, cache_creation_tokens=0, cache_read_tokens=0, total_tokens=124)
2025-05-19 14:05:49,693 - __main__ - INFO - [job_thread_runner] - [LLM Test] Final collected response: ' ,   '
2025-05-19 14:05:49,693 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM plugin direct test SUCCEEDED. Collected response: ' ,   '
2025-05-19 14:05:49,694 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-19 14:05:49,694 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 14:05:49,695 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 14:05:49,695 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 14:05:49,697 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Registered sync_transcript_handler with STT plugin.
2025-05-19 14:05:49,697 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 14:05:49,699 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-19 14:05:49,700 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-19 14:05:49,700 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_YYo5wFyYxa8P.
2025-05-19 14:05:49,702 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 14:05:55,140 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:06:02,406 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:06:06,253 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:06:22,394 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:06:35,564 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:06:49,894 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:07:10,531 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:07:44,180 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:07:52,320 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:08:59,379 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:09:04,293 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:09:07,656 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:09:11,450 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:09:24,594 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:09:43,080 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:09:53,739 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:09:55,522 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:10:14,274 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:10:17,639 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:10:20,235 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:10:38,216 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:11:07,576 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:11:35,585 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:13:29,623 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:13:38,432 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:13:44,152 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:13:45,966 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:08,336 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:11,014 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:13,550 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:18,737 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:22,050 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:24,406 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:29,581 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:30,869 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:33,190 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:39,096 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:48,041 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:14:57,782 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:06,561 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:23,806 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:30,904 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:33,987 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:35,210 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:35,989 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:38,416 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:47,954 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:56,750 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:15:57,092 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9293, Requested 1182. Please try again in 2.85s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_7ff2671960d13ec596dbae61f1567919, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9293, Requested 1182. Please try again in 2.85s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})
2025-05-19 14:16:00,120 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:16:03,500 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:16:03,886 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9345, Requested 1197. Please try again in 3.252s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_68e7a687ce3c224aeadfc1c4b3d722d8, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9345, Requested 1197. Please try again in 3.252s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})
2025-05-19 14:16:06,254 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:16:06,583 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 8896, Requested 1208. Please try again in 624ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_4ef982b5ddaa8837911a10ee45a65c7e, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 8896, Requested 1208. Please try again in 624ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})
2025-05-19 14:16:09,518 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:16:13,065 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:16:13,564 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 8953, Requested 1225. Please try again in 1.068s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_8b40b30bd76590d8d0b217b80f67c537, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 8953, Requested 1225. Please try again in 1.068s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})
2025-05-19 14:16:13,996 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:16:16,378 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-19 14:16:16,730 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 10000, Requested 1243. Please try again in 7.458s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_602ded6609060b1f2c60b26b1e2ad654, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 10000, Requested 1243. Please try again in 7.458s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})
2025-05-19 14:16:19,064 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 10000, Requested 1243. Please try again in 7.458s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_6c19e824eac6233c092ec9d3037e2458, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 10000, Requested 1243. Please try again in 7.458s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})
2025-05-19 14:16:21,417 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9748, Requested 1243. Please try again in 5.946s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_48cc5751a82c1c0b26a2e01e109727bc, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9748, Requested 1243. Please try again in 5.946s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})
2025-05-19 14:16:23,733 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9362, Requested 1243. Please try again in 3.63s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_83b05c203b8117ab8e5701b4ff2b8f0e, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9362, Requested 1243. Please try again in 3.63s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})
2025-05-19 14:16:23,737 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9362, Requested 1243. Please try again in 3.63s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_83b05c203b8117ab8e5701b4ff2b8f0e, body={'message': 'Rate limit reached for gpt-4 in organization org-0dOCR12uUL2wDgGqn2BQ2UFn on tokens per min (TPM): Limit 10000, Used 9362, Requested 1243. Please try again in 3.63s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 84, in _inference_task
    async for chunk in llm_node:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 465, in llm_node
    async for chunk in stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 228, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-05-19 14:16:23,781 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-19 15:10:30,357 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:10:30,357 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:10:30,357 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:10:30,357 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:10:30,367 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:10:30,367 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 15:10:30,367 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 15:10:31,079 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 15:10:31,079 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 15:10:31,079 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 15:10:31,134 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:10:31,134 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:10:31,134 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:10:31,134 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:10:45,114 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:10:45,114 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:10:45,114 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:10:45,114 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:10:45,116 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:10:45,116 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 15:10:45,120 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 15:10:45,127 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:10:45,127 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:10:45,128 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:10:45,128 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:10:45,129 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:10:45,129 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:10:45,129 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:10:45,130 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:10:45,133 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:10:45,133 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:10:45,133 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:10:45,133 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:10:45,134 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:10:45,134 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:10:45,134 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:10:45,134 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:10:45,140 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 15:10:45,268 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 15:10:50,655 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:10:50,655 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:10:50,657 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:10:50,657 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:11:58,373 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:11:58,373 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:11:58,373 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:11:58,373 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:11:58,373 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:11:58,373 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 15:11:58,373 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 15:11:58,373 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-19 15:11:58,373 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-19 15:11:58,373 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 15:11:58,373 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 15:11:58,423 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:11:58,423 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:11:58,423 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:11:58,423 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:12:12,377 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:12:12,377 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:12:12,377 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:12:12,377 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:12:12,377 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:12:12,377 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 15:12:12,377 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 15:12:12,393 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:12,393 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:12,394 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:12,394 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 15:12:12,560 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 15:12:15,901 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:12:15,901 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:12:15,901 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:12:15,901 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:12:16,473 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 15:12:16,489 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_DaFYfkb3xSdN
2025-05-19 15:12:16,576 - livekit.agents - INFO - [job_thread_runner] - initializing job runner
2025-05-19 15:12:16,577 - livekit.agents - INFO - [job_thread_runner] - job runner initialized
2025-05-19 15:12:16,792 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_kn8BKKYuVpDf
2025-05-19 15:12:16,793 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 15:12:16,794 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-19 15:12:16,847 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-19 15:12:16,848 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-19 15:12:16,858 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-19 15:12:16,859 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-19 15:12:16,870 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-19 15:12:16,870 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-19 15:12:17,005 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-19 15:12:17,006 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-19 15:12:17,006 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-19 15:12:17,008 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-19 15:12:17,008 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-19 15:12:17,008 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-19 15:12:17,009 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-19 15:12:18,254 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_3b2ae420b7b78d98ad96bbd42dce83f2, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-19 15:12:20,555 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_027d10c85ca9386ab1dcb7d8bfa57f59, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-19 15:12:22,852 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_68aa729212436f233dfdb9f2a4331af0, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-19 15:12:25,154 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: failed to generate LLM completion after 4 attempts
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_6f697a79137d9cc1d2ec5320e6d5898c, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3588, in entrypoint
    async for chunk in llm_test_stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 228, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-05-19 15:12:25,156 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-19 15:12:25,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-19 15:12:25,157 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-19 15:12:25,158 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-19 15:12:25,158 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-19 15:12:25,160 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-19 15:12:25,160 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-19 15:12:25,160 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_DaFYfkb3xSdN.
2025-05-19 15:12:25,162 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-19 15:12:29,664 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 228, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stream_adapter.py", line 127, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stream_adapter.py", line 104, in _recognize
    t_event = await self._wrapped_stt.recognize(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_aad84a1f531f5145d745b84b1bdd0b79, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-19 15:12:29,718 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-19 15:31:37,542 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:31:37,542 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:31:37,542 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:31:37,542 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: False
2025-05-19 15:31:37,542 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:31:37,542 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:31:37,542 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 15:31:37,542 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 15:31:38,185 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 15:31:38,186 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 15:31:38,188 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 15:31:38,229 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:31:38,229 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:31:38,229 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:31:38,229 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:31:50,192 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:31:50,192 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:31:50,192 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:31:50,192 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: False
2025-05-19 15:31:50,192 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:31:50,192 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:31:50,192 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 15:31:50,192 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 15:31:50,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:31:50,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:31:50,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:31:50,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:31:50,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:31:50,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:31:50,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:31:50,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:31:50,223 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:31:50,223 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:31:50,223 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:31:50,223 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:31:50,223 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:31:50,223 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:31:50,223 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:31:50,223 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:31:50,229 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 15:31:50,632 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 15:31:59,664 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:31:59,664 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:31:59,664 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:31:59,664 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:32:00,629 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 15:32:00,969 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_GKZ8zVJmupFr
2025-05-19 15:32:01,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:32:01,007 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:32:03,849 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_qGXxPL4zaydb
2025-05-19 15:32:03,850 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 15:32:03,850 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - GROQ_API_KEY environment variable is NOT set. Groq LLM plugin cannot initialize. !!!
2025-05-19 15:32:03,852 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 274, in entrypoint
    sys.exit("GROQ_API_KEY environment variable is not set.")
SystemExit: GROQ_API_KEY environment variable is not set.
2025-05-19 15:35:16,632 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:35:16,632 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:35:16,632 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:35:16,632 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-19 15:35:16,632 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:35:16,646 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:35:16,646 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 15:35:16,647 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 15:35:17,314 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 15:35:17,314 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 15:35:17,318 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 15:35:17,368 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:35:17,368 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:35:17,368 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:35:17,368 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:35:27,557 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:35:27,557 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:35:27,557 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:35:27,557 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-19 15:35:27,561 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:35:27,562 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:35:27,562 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 15:35:27,566 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 15:35:27,576 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:27,576 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:27,576 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:27,576 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:27,576 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:27,576 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:27,576 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:27,576 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:27,588 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 15:35:27,748 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 15:35:31,754 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:35:31,755 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:35:31,757 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:35:31,758 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:35:32,182 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 15:35:32,211 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_A8iVGdkmf4eE
2025-05-19 15:35:32,282 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:35:32,283 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:35:32,698 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_yMfWuapSVwas
2025-05-19 15:35:32,698 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 15:35:32,698 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin...
2025-05-19 15:35:32,699 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-19 15:35:32,699 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin...
2025-05-19 15:35:32,748 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized with model llama3-8b-8192.
2025-05-19 15:35:32,749 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-19 15:35:32,749 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing plugins: TTS.__init__() got an unexpected keyword argument 'voice'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 290, in entrypoint
    tts_plugin = elevenlabs.TTS(voice="p9aflnsbBe1o0aDeQa97", api_key=ELEVENLABS_API_KEY)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TTS.__init__() got an unexpected keyword argument 'voice'
2025-05-19 15:35:32,751 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 290, in entrypoint
    tts_plugin = elevenlabs.TTS(voice="p9aflnsbBe1o0aDeQa97", api_key=ELEVENLABS_API_KEY)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TTS.__init__() got an unexpected keyword argument 'voice'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 300, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: TTS.__init__() got an unexpected keyword argument 'voice'
2025-05-19 15:36:15,845 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-19 15:36:15,847 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-19 15:36:15,856 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited SystemExit (code: 0).
2025-05-19 15:36:15,857 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-19 15:36:19,423 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:36:19,427 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:36:19,427 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:36:19,428 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-19 15:36:19,428 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:36:19,428 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:36:19,428 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 15:36:19,428 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 15:36:19,440 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:19,440 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:19,440 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:19,440 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:19,440 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:19,445 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:19,446 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:19,446 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:19,450 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 15:36:19,585 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 15:36:55,946 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-19 15:36:55,947 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-19 15:36:55,956 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited SystemExit (code: 0).
2025-05-19 15:36:55,957 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-19 15:36:58,943 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:36:58,943 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:36:58,944 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:36:58,944 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-19 15:36:58,944 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:36:58,945 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:36:58,945 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 15:36:58,948 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 15:36:58,957 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:58,958 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:58,960 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:58,963 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:58,964 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:58,966 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:58,967 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:58,969 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:36:58,980 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:58,983 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:58,984 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:58,985 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:58,986 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:58,988 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:58,989 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:58,990 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:36:58,991 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 15:36:59,124 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 15:37:02,869 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-19 15:37:02,870 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Token Server mode). ---
2025-05-19 15:37:07,732 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:37:07,734 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:37:07,734 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:37:07,734 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-19 15:37:07,734 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:37:07,735 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:37:07,735 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 15:37:07,735 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 15:37:08,421 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-19 15:37:08,421 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 15:37:08,424 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 15:37:08,469 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:37:08,470 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:37:08,470 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:37:08,470 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:37:21,943 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:37:21,943 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:37:21,943 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:37:21,943 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:38:17,605 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:38:17,606 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:38:17,606 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:38:17,606 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-19 15:38:17,606 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:38:17,607 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:38:17,607 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-19 15:38:17,607 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-19 15:38:17,610 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-19 15:38:17,611 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-19 15:38:17,611 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-19 15:38:17,614 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-19 15:38:17,650 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:38:17,650 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:38:17,650 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:38:17,650 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-19 15:38:27,981 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-19 15:38:27,981 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-19 15:38:27,981 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-19 15:38:27,981 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-19 15:38:27,981 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-19 15:38:27,981 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-19 15:38:27,981 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-19 15:38:27,981 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-19 15:38:28,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:28,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:28,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:28,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:28,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:28,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:28,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:28,005 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:28,017 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:28,018 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:28,018 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:28,018 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:28,018 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:28,018 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:28,018 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:28,018 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:28,018 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-19 15:38:28,151 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-19 15:38:31,993 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:38:31,993 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:38:31,993 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-19 15:38:31,993 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-19 15:38:33,460 - livekit.agents - INFO - [MainThread] - received job request
2025-05-19 15:38:33,480 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_kAHsEfpVvzT9
2025-05-19 15:38:33,565 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-19 15:38:33,566 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-19 15:38:34,221 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_zoK4iFwY8W8j
2025-05-19 15:38:34,223 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-19 15:38:34,224 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin...
2025-05-19 15:38:34,225 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-19 15:38:34,225 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin...
2025-05-19 15:38:34,282 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized with model llama3-8b-8192.
2025-05-19 15:38:34,283 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-19 15:38:34,283 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing plugins: TTS.__init__() got an unexpected keyword argument 'voice'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 290, in entrypoint
    tts_plugin = elevenlabs.TTS(voice="nova", api_key=ELEVENLABS_API_KEY)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TTS.__init__() got an unexpected keyword argument 'voice'
2025-05-19 15:38:34,285 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 290, in entrypoint
    tts_plugin = elevenlabs.TTS(voice="nova", api_key=ELEVENLABS_API_KEY)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TTS.__init__() got an unexpected keyword argument 'voice'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 300, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: TTS.__init__() got an unexpected keyword argument 'voice'
2025-05-20 13:35:39,718 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:35:39,719 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:35:39,719 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:35:39,719 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:35:39,720 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:35:39,720 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 13:35:39,720 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-20 13:35:40,430 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-20 13:35:40,431 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 13:35:40,434 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-20 13:35:40,538 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:35:40,539 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:35:40,539 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:35:40,539 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:36:11,159 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:36:11,160 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:36:11,160 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:36:11,160 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:36:11,161 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:36:11,161 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 13:36:11,166 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 13:36:11,176 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:11,176 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:11,177 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:11,178 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:11,178 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:11,179 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:11,180 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:11,180 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:11,190 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:11,191 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:11,192 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:11,193 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:11,193 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:11,194 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:11,194 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:11,194 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:11,195 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 13:36:11,334 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 13:36:18,869 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:36:18,871 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:36:18,878 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:36:18,880 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:36:19,281 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 13:36:19,309 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_crZstQSjsbRF
2025-05-20 13:36:19,351 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:36:19,352 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:36:19,604 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_Pc5vXNsnzh6F
2025-05-20 13:36:19,606 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 13:36:19,607 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-20 13:36:19,700 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-20 13:36:19,701 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-20 13:36:19,712 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-20 13:36:19,712 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-20 13:36:19,722 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-20 13:36:19,723 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 13:36:19,918 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 13:36:19,919 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 13:36:19,919 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 13:36:19,921 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-20 13:36:19,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-20 13:36:19,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 13:36:19,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 13:36:20,909 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_98ca3846620bff636bddbe338803e990, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:36:23,261 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_561bc9c69c5289c58eb2200d1344f7fb, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:36:25,551 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_fe4365af84f7264c851e3e71b5ec9cfe, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:36:27,855 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: failed to generate LLM completion after 4 attempts
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_0fbd0ad26583ad5fb0c9e61e0ebc24f9, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3588, in entrypoint
    async for chunk in llm_test_stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-05-20 13:36:27,859 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-20 13:36:27,860 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-20 13:36:27,861 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-20 13:36:27,861 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-20 13:36:27,862 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-20 13:36:27,863 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-20 13:36:27,864 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-20 13:36:27,864 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_crZstQSjsbRF.
2025-05-20 13:37:45,146 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:37:45,146 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:37:45,148 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:37:45,148 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:37:45,460 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-20 13:37:48,859 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_02ba3eae5fabdb607380269629d98059, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:37:49,918 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_21217bf3ad41f45555ee4c1d56c4601e, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:37:52,532 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_6052d1ef44e6833440f0713c2149c301, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:37:55,174 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_52d231f152c7863858e96706a9def01d, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:37:55,181 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-20 13:46:43,539 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:46:43,539 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:46:43,539 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:46:43,540 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:46:43,540 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:46:43,540 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 13:46:43,541 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-20 13:46:44,318 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-20 13:46:44,318 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 13:46:44,322 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-20 13:46:44,375 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:46:44,375 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:46:44,375 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:46:44,376 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:46:59,731 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:46:59,731 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:46:59,732 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:46:59,732 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:46:59,732 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:46:59,733 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 13:46:59,736 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 13:46:59,744 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:46:59,745 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:46:59,745 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:46:59,746 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:46:59,746 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:46:59,747 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:46:59,748 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:46:59,748 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:46:59,755 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:46:59,756 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:46:59,756 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:46:59,756 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:46:59,757 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:46:59,758 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:46:59,758 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:46:59,758 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:46:59,759 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 13:46:59,859 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 13:47:04,060 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:47:04,061 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:47:04,069 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:47:04,070 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:47:04,488 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 13:47:04,505 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_be6zUfEx2QCd
2025-05-20 13:47:04,618 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:47:04,619 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:47:04,799 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_df45aUhjnuo5
2025-05-20 13:47:04,799 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 13:47:04,800 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-20 13:47:04,851 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-20 13:47:04,851 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-20 13:47:04,860 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-20 13:47:04,861 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-20 13:47:04,871 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-20 13:47:04,872 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 13:47:04,994 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 13:47:04,995 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 13:47:04,995 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 13:47:04,996 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-20 13:47:04,996 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-20 13:47:04,998 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 13:47:04,998 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 13:47:05,528 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_bfebaba94fa0e9e57814858da7256b23, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:47:07,822 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_5d13d7e5ec56a8c80fb20a27baea780e, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:47:10,135 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_bce0506d96070c6918f00c24b0d4b6ec, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:47:12,479 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: failed to generate LLM completion after 4 attempts
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_9ec6cd488622c0ee760bdceaa2fca9f9, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3588, in entrypoint
    async for chunk in llm_test_stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-05-20 13:47:12,494 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-20 13:47:12,496 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-20 13:47:12,498 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-20 13:47:12,499 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-20 13:47:12,500 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-20 13:47:12,503 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-20 13:47:12,505 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-20 13:47:12,506 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_be6zUfEx2QCd.
2025-05-20 13:47:12,510 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-20 13:47:16,371 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_6c9d61b8a09ccfe3e4988f910fa06ff0, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:47:16,972 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_a8e804e7ad6442f6b35e8e6b87c9d1b1, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:47:19,234 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_f5f3f3d541b2c0b2cac294b20c99a162, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:47:21,765 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_83827f53f3cf5b5b37d48a08d60ba0a0, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:47:21,768 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-20 13:49:39,353 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:49:39,353 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:49:39,353 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:49:39,354 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:49:39,355 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:49:39,355 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 13:49:39,355 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-20 13:49:40,122 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-20 13:49:40,123 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 13:49:40,126 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-20 13:49:40,195 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:49:40,195 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:49:40,195 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:49:40,196 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:50:01,592 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:50:01,592 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:50:01,592 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:50:01,593 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:50:01,593 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:50:01,593 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 13:50:01,597 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 13:50:01,605 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:01,606 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:01,606 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:01,607 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:01,607 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:01,608 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:01,608 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:01,609 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:01,616 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:01,618 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:01,619 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:01,620 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:01,620 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:01,620 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:01,621 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:01,621 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:01,622 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 13:50:01,749 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 13:50:08,253 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:50:08,254 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:50:08,260 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:50:08,262 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:50:08,839 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 13:50:08,859 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_ZYUTLaNmJPww
2025-05-20 13:50:08,907 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:50:08,908 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:50:09,127 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_Fq335J5zk5qA
2025-05-20 13:50:09,128 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 13:50:09,128 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-20 13:50:09,179 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-20 13:50:09,179 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-20 13:50:09,189 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-20 13:50:09,189 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-20 13:50:09,199 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-20 13:50:09,200 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 13:50:09,322 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 13:50:09,322 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 13:50:09,323 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 13:50:09,325 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-20 13:50:09,326 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-20 13:50:09,326 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 13:50:09,327 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 13:50:09,870 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_af38d786cfe8c8fb18c6afb541d08c5e, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:50:12,158 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_e869c76300459c6fb4883e3d53697107, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:50:14,455 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_ec771fd4c32228fb975bc580957eb0d0, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:50:16,763 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: failed to generate LLM completion after 4 attempts
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_feaca371c94a54d9c58ea62bda266e2a, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3588, in entrypoint
    async for chunk in llm_test_stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-05-20 13:50:16,767 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-20 13:50:16,768 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-20 13:50:16,768 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-20 13:50:16,768 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-20 13:50:16,769 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-20 13:50:16,770 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-20 13:50:16,771 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-20 13:50:16,771 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_ZYUTLaNmJPww.
2025-05-20 13:50:16,773 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-20 13:50:20,803 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_910fdbd42d449a0ed2b90e5122954c82, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:50:21,393 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_f8a6d9e4d3af7e7b6a5a33c6cdd87951, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:50:23,798 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_0c5ea99d48883de4beeec2a18ee5651c, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:50:26,406 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_a40fb34eac973509404eb1ed9e38a0d3, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:50:26,411 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-20 13:52:14,962 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:52:14,963 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:52:14,963 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:52:14,963 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:52:14,964 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:52:14,964 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 13:52:14,964 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-20 13:52:14,969 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 13:52:14,969 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 13:52:14,969 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 13:52:14,972 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-20 13:52:15,017 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:52:15,018 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:52:15,018 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:52:15,018 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:52:38,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:52:38,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:52:38,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:52:38,843 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:52:38,844 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:52:38,844 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 13:52:38,847 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 13:52:38,857 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:52:38,857 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:52:38,858 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:52:38,859 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:52:38,859 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:52:38,860 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:52:38,860 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:52:38,861 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:52:38,867 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:52:38,868 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:52:38,868 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:52:38,869 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:52:38,869 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:52:38,869 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:52:38,870 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:52:38,870 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:52:38,871 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 13:52:39,000 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 13:52:43,251 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:52:43,252 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:52:43,256 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:52:43,257 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:52:53,970 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:52:53,970 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:52:53,972 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:52:53,973 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:54:00,969 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:54:00,969 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:54:00,970 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:54:00,970 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:54:00,971 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:54:00,971 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 13:54:00,971 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-20 13:54:00,975 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 13:54:00,976 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 13:54:00,976 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 13:54:00,979 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-20 13:54:01,023 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:54:01,023 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:54:01,023 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:54:01,023 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:54:14,295 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 13:54:14,296 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 13:54:14,296 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 13:54:14,296 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 13:54:14,297 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 13:54:14,297 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 13:54:14,300 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 13:54:14,336 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:14,337 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:14,338 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:14,338 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:14,339 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:14,340 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:14,340 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:14,344 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:14,353 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:14,353 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:14,353 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:14,355 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:14,355 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:14,355 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:14,355 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:14,356 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:14,357 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 13:54:14,482 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 13:54:18,691 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:54:18,692 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:54:18,697 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 13:54:18,698 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 13:54:19,113 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 13:54:19,135 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_gKaNYtRTZnZs
2025-05-20 13:54:19,200 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 13:54:19,201 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 13:54:19,428 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_kXeyDQ68WMDn
2025-05-20 13:54:19,429 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 13:54:19,429 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-20 13:54:19,486 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-20 13:54:19,486 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-20 13:54:19,496 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-20 13:54:19,497 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-20 13:54:19,506 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-20 13:54:19,507 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 13:54:19,631 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 13:54:19,632 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 13:54:19,632 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 13:54:19,633 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-20 13:54:19,634 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-20 13:54:19,634 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 13:54:19,635 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 13:54:20,221 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_e4d81f38cbe3799a86d4a8236b5e517b, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:54:22,513 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_003759534917af8b070f943dfd0f7dcd, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:54:24,836 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_66e41c6a9fff59f60f406a1296b1ddb3, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:54:27,127 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: failed to generate LLM completion after 4 attempts
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_78e81c64e9ee2f393dc9c6628cb678f2, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3588, in entrypoint
    async for chunk in llm_test_stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-05-20 13:54:27,138 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-20 13:54:27,139 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-20 13:54:27,141 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-20 13:54:27,141 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-20 13:54:27,142 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-20 13:54:27,146 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-20 13:54:27,147 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-20 13:54:27,147 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_gKaNYtRTZnZs.
2025-05-20 13:54:27,150 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-20 13:54:31,503 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_7660254accc0c1dcee13a64dc8a299bb, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:54:32,107 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_48c699422147d6d3b67aa63ef59919ec, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:54:34,680 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_6bb7e19e73e7cbc1a144c95f38a88bbf, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:54:37,018 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_10181ae528cd5423d340d7498e10c48b, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 13:54:37,021 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-20 14:01:56,753 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:01:56,754 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:01:56,754 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:01:56,754 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:01:56,755 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:01:56,755 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:01:56,755 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-20 14:01:57,469 - __main__ - DEBUG - [MainThread] - Port 8000 appears free.
2025-05-20 14:01:57,469 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:01:57,473 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-20 14:01:57,516 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:01:57,517 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:01:57,517 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:01:57,517 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:02:20,064 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:02:20,064 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:02:20,064 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:02:20,066 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:02:20,066 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:02:20,066 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:02:20,070 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:02:20,078 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:02:20,078 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:02:20,079 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:02:20,080 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:02:20,080 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:02:20,081 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:02:20,082 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:02:20,082 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:02:20,091 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:02:20,091 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:02:20,091 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:02:20,092 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:02:20,092 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:02:20,092 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:02:20,093 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:02:20,093 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:02:20,094 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:02:20,222 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:02:31,010 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:02:31,012 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:02:31,020 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:02:31,022 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:02:34,966 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:02:34,966 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:02:34,968 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:02:34,968 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:02:41,006 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:02:41,006 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:02:41,008 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:02:41,009 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:03:37,527 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:03:37,528 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:03:37,528 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:03:37,528 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:03:37,529 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:03:37,529 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:03:37,529 - __main__ - DEBUG - [MainThread] - Checking if port 8000 is in use...
2025-05-20 14:03:37,533 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 14:03:37,534 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 14:03:37,534 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:03:37,537 - asyncio - DEBUG - [MainThread] - Using proactor: IocpProactor
2025-05-20 14:03:37,581 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:03:37,581 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:03:37,581 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:03:37,581 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:03:56,168 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:03:56,168 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:03:56,168 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:03:56,168 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:03:56,169 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:03:56,169 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:03:56,172 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:03:56,179 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:03:56,180 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:03:56,180 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:03:56,181 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:03:56,181 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:03:56,182 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:03:56,182 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:03:56,182 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:03:56,190 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:03:56,191 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:03:56,191 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:03:56,191 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:03:56,192 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:03:56,192 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:03:56,193 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:03:56,193 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:03:56,194 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:03:56,365 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:04:01,242 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:04:01,242 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:04:01,244 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:04:01,244 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:04:01,627 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 14:04:01,647 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_djQubWKkfh2j
2025-05-20 14:04:01,709 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:04:01,709 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:04:01,927 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connected to room. Local Participant SID: PA_3Zrk4Hh9yG4g
2025-05-20 14:04:01,928 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 14:04:01,929 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-20 14:04:01,981 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-20 14:04:01,982 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI LLM plugin...
2025-05-20 14:04:01,993 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI LLM plugin initialized.
2025-05-20 14:04:01,993 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI TTS plugin...
2025-05-20 14:04:02,004 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI TTS plugin initialized.
2025-05-20 14:04:02,004 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 14:04:02,128 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 14:04:02,129 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 14:04:02,129 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 14:04:02,130 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for English and Hindi tests.
2025-05-20 14:04:02,131 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting ChatContext(...) (positional)
2025-05-20 14:04:02,131 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 14:04:02,131 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 14:04:02,653 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_49758a1e4b241e9b6081bf255a9cdd2d, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 14:04:04,953 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_a305573957994efdd3766605743137e2, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 14:04:07,263 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_c431dca637cd2c31d150a02c73a307de, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 14:04:09,563 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: failed to generate LLM completion after 4 attempts
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_2175e309668e6b4f54a8be049bab21b9, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\main.py", line 3588, in entrypoint
    async for chunk in llm_test_stream:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-05-20 14:04:09,570 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. LLM might not function correctly. !!!
2025-05-20 14:04:09,571 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, LLM, TTS and Silero VAD.
2025-05-20 14:04:09,572 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED ---
2025-05-20 14:04:09,573 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-20 14:04:09,574 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-20 14:04:09,578 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-20 14:04:09,579 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-20 14:04:09,580 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_djQubWKkfh2j.
2025-05-20 14:04:09,583 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-20 14:04:12,387 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_20271b855b505ec4a585cb4b03cecdea, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 14:04:13,002 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_c1b5519c1ae67f340a4830916631ab34, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 14:04:15,284 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_94e153693f37fec937dde6591d4c10ce, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 14:04:17,874 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}} (status_code=429, request_id=req_a61b7a2f300633695490bb8978d2fb89, body={'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'})
2025-05-20 14:04:17,876 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-20 14:37:08,826 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:37:08,826 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:37:08,826 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:37:08,827 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:37:08,827 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:37:08,827 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:37:08,827 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:37:09,545 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:37:09,595 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:37:09,596 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:37:09,596 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:37:09,596 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:37:28,180 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:37:28,180 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:37:28,180 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:37:28,180 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:37:28,181 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:37:28,181 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:37:28,184 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:37:28,192 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:37:28,192 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:37:28,193 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:37:28,193 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:37:28,194 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:37:28,194 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:37:28,195 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:37:28,195 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:37:28,202 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:37:28,203 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:37:28,203 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:37:28,204 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:37:28,204 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:37:28,205 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:37:28,205 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:37:28,205 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:37:28,206 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:37:28,423 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:37:36,720 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:37:36,720 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:37:36,725 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:37:36,725 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:39:36,784 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:39:36,785 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:39:36,785 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:39:36,785 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:39:36,785 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:39:36,786 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:39:36,786 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:39:36,790 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 14:39:36,791 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 14:39:36,791 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:39:36,839 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:39:36,840 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:39:36,840 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:39:36,840 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:40:01,783 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:40:01,784 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:40:01,784 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:40:01,784 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:40:01,784 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:40:01,785 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:40:01,785 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:40:01,785 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 14:40:01,789 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:40:01,796 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:01,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:01,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:01,798 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:01,799 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:01,799 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:01,800 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:01,801 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:01,810 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:01,811 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:01,811 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:01,812 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:01,812 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:01,812 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:01,813 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:01,813 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:01,814 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:40:01,917 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:40:05,362 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:40:05,365 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:40:05,372 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:40:05,373 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:40:05,779 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 14:40:05,801 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_owa6zyyVMBfA
2025-05-20 14:40:05,905 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:40:05,905 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:40:06,086 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_sRJDtTD6zXJk
2025-05-20 14:40:06,088 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 14:40:06,089 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-20 14:40:06,091 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-20 14:40:06,092 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-20 14:40:06,172 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-20 14:40:06,173 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-20 14:40:06,173 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: TTS.__init__() got an unexpected keyword argument 'voice'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 442, in entrypoint
    tts_plugin = elevenlabs.TTS(voice="p9aflnsbBe1o0aDeQa97", api_key=ELEVENLABS_API_KEY)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TTS.__init__() got an unexpected keyword argument 'voice'
2025-05-20 14:40:06,175 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 442, in entrypoint
    tts_plugin = elevenlabs.TTS(voice="p9aflnsbBe1o0aDeQa97", api_key=ELEVENLABS_API_KEY)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: TTS.__init__() got an unexpected keyword argument 'voice'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 454, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: TTS.__init__() got an unexpected keyword argument 'voice'
2025-05-20 14:40:13,902 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:40:13,902 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:40:13,904 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:40:13,904 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:40:57,639 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:40:57,641 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:40:57,648 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:40:57,649 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:45:59,157 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:45:59,157 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:45:59,157 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:45:59,157 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:45:59,158 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:45:59,158 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:45:59,158 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:45:59,845 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:45:59,894 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:45:59,894 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:45:59,895 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:45:59,895 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:46:25,170 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:46:25,170 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:46:25,170 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:46:25,170 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:46:25,171 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:46:25,171 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:46:25,171 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:46:25,172 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 14:46:25,175 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:46:25,182 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:25,182 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:25,183 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:25,183 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:25,184 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:25,185 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:25,186 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:25,186 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:25,194 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:25,194 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:25,196 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:25,196 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:25,196 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:25,196 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:25,197 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:25,197 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:25,198 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:46:25,298 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:46:33,716 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:46:33,716 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:46:33,718 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:46:33,719 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:46:34,103 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 14:46:34,125 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_em845fUddBSr
2025-05-20 14:46:34,212 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:46:34,213 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:46:34,367 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_P2K6jJ77gxJ3
2025-05-20 14:46:34,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 14:46:34,371 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-20 14:46:34,372 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-20 14:46:34,374 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-20 14:46:34,441 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-20 14:46:34,441 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-20 14:46:34,442 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-20 14:46:34,442 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 14:46:34,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 14:46:34,559 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 14:46:34,559 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 14:46:34,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-20 14:46:34,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 14:46:34,561 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 14:46:34,562 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 478, in entrypoint
    llm_test_stream = await llm_plugin.chat(chat_ctx=chat_ctx_for_test)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-20 14:46:34,563 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] LLM direct test failed: object LLMStream can't be used in 'await' expression. Cannot proceed. !!!
2025-05-20 14:46:34,703 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 478, in entrypoint
    llm_test_stream = await llm_plugin.chat(chat_ctx=chat_ctx_for_test)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 503, in entrypoint
    sys.exit(f"LLM plugin direct test failed: {e_llm_call}")
SystemExit: LLM plugin direct test failed: object LLMStream can't be used in 'await' expression
2025-05-20 14:46:34,717 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1484, in request
    response = await self._client.send(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\httpcore\_backends\anyio.py", line 115, in connect_tcp
    stream: anyio.abc.ByteStream = await anyio.connect_tcp(
                                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\anyio\_core\_sockets.py", line 208, in connect_tcp
    gai_res = await getaddrinfo(
              ^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\anyio\_core\_sockets.py", line 584, in getaddrinfo
    gai_res = await get_async_backend().getaddrinfo(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 2692, in getaddrinfo
    return await get_running_loop().getaddrinfo(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 867, in getaddrinfo
    return await self.run_in_executor(
                 ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 822, in run_in_executor
    self._check_default_executor()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 523, in _check_default_executor
    raise RuntimeError('Executor shutdown has been called')
RuntimeError: Executor shutdown has been called

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 566, in _run
    self._oai_stream = stream = await self._client.chat.completions.create(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2028, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1742, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\openai\_base_client.py", line 1516, in request
    raise APIConnectionError(request=request) from err
openai.APIConnectionError: Connection error.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 609, in _run
    raise APIConnectionError(retryable=retryable) from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-20 14:49:38,916 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-20 14:49:38,919 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-20 14:49:38,937 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited gracefully with SystemExit (code: 0).
2025-05-20 14:49:38,937 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-20 14:49:42,249 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:49:42,250 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:49:42,250 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:49:42,250 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:49:42,250 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:49:42,251 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:49:42,251 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:49:42,251 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 14:49:42,255 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:49:42,262 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:49:42,262 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:49:42,263 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:49:42,264 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:49:42,264 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:49:42,265 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:49:42,266 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:49:42,266 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:49:42,274 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:49:42,274 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:49:42,274 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:49:42,275 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:49:42,275 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:49:42,275 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:49:42,276 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:49:42,276 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:49:42,276 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:49:42,383 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:49:44,927 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-20 14:49:44,928 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Token Server mode). ---
2025-05-20 14:49:47,868 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:49:47,869 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:49:47,869 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:49:47,869 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:49:47,869 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:49:47,869 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:49:47,870 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:49:48,624 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:49:48,669 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:49:48,670 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:49:48,670 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:49:48,670 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:49:52,310 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:49:52,310 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:49:52,313 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:49:52,313 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:49:55,445 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:49:55,446 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:49:55,448 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:49:55,449 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:50:14,237 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:50:14,237 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:50:14,239 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:50:14,240 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:50:35,911 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:50:35,913 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:50:35,917 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:50:35,918 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:51:28,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:51:28,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:51:28,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:51:28,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:51:28,942 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:51:28,943 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:51:28,943 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:51:28,947 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 14:51:28,948 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 14:51:28,948 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:51:28,994 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:51:28,995 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:51:28,995 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:51:28,995 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:51:57,239 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:51:57,240 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:51:57,240 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:51:57,240 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:51:57,240 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:51:57,241 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:51:57,241 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:51:57,241 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 14:51:57,245 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:51:57,252 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:51:57,253 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:51:57,253 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:51:57,254 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:51:57,254 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:51:57,255 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:51:57,255 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:51:57,256 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:51:57,262 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:51:57,262 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:51:57,263 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:51:57,263 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:51:57,263 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:51:57,264 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:51:57,264 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:51:57,264 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:51:57,266 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:51:57,363 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:52:02,906 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:52:02,907 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:52:02,909 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:52:02,910 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:52:03,285 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 14:52:03,307 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_yvFzuLh63gY3
2025-05-20 14:52:03,413 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:52:03,414 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:52:03,595 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_vM2YUdN5XwrN
2025-05-20 14:52:03,596 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 14:52:03,598 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-20 14:52:03,599 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-20 14:52:03,600 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-20 14:52:03,663 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-20 14:52:03,663 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-20 14:52:03,664 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-20 14:52:03,664 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 14:52:03,783 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 14:52:03,784 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 14:52:03,784 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 14:52:03,785 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-20 14:52:03,786 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 14:52:03,786 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 14:52:04,356 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,             ?'
2025-05-20 14:52:04,356 - __main__ - WARNING - [job_thread_runner] - [AgentEntry] LLM plugin direct test: Completed stream, but response text did not contain expected indicators ('OK', '', ''). Response: '! ,             ?'
2025-05-20 14:52:04,357 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent will not function correctly. !!!
2025-05-20 14:52:04,358 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 514, in entrypoint
    sys.exit("LLM plugin direct test failed unexpectedly.") # Ensure exit
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
SystemExit: LLM plugin direct test failed unexpectedly.
2025-05-20 14:55:02,016 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:55:02,016 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:55:02,017 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:55:02,017 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:55:02,017 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:55:02,018 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:55:02,018 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:55:02,805 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:55:02,850 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:55:02,851 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:55:02,851 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:55:02,851 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:55:13,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:55:13,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:55:13,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:55:13,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:55:13,205 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:55:13,206 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:55:13,206 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:55:13,206 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 14:55:13,210 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:55:13,218 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:55:13,219 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:55:13,220 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:55:13,220 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:55:13,221 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:55:13,221 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:55:13,222 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:55:13,223 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:55:13,230 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:55:13,230 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:55:13,231 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:55:13,232 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:55:13,232 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:55:13,233 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:55:13,233 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:55:13,258 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:55:13,261 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:55:13,361 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:55:18,419 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:55:18,420 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:55:18,423 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:55:18,423 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:55:36,635 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:55:36,635 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:55:36,637 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:55:36,638 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:56:07,585 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:56:07,585 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:56:07,587 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:56:07,588 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:56:10,764 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:56:10,766 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:56:10,768 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:56:10,769 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:56:24,274 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:56:24,274 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:56:24,277 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:56:24,278 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:56:25,625 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:56:25,625 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:56:25,627 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:56:25,628 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:58:54,385 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:58:54,385 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:58:54,386 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:58:54,386 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:58:54,386 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:58:54,386 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:58:54,387 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 14:58:54,391 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 14:58:54,391 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 14:58:54,391 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 14:58:54,441 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:58:54,441 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:58:54,441 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:58:54,443 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 14:59:13,024 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 14:59:13,024 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 14:59:13,025 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 14:59:13,025 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 14:59:13,025 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 14:59:13,026 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 14:59:13,026 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 14:59:13,026 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 14:59:13,029 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 14:59:13,039 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:59:13,040 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:59:13,040 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:59:13,041 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:59:13,041 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:59:13,042 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:59:13,042 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:59:13,044 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 14:59:13,050 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:59:13,051 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:59:13,052 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:59:13,052 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:59:13,052 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:59:13,053 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:59:13,053 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:59:13,053 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 14:59:13,054 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 14:59:13,183 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 14:59:16,125 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:59:16,127 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:59:16,134 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:59:16,135 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:59:26,196 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:59:26,196 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 14:59:26,199 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 14:59:26,201 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:00:19,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:00:19,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:00:19,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:00:19,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 15:00:19,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 15:00:19,324 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 15:00:19,324 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 15:00:19,328 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 15:00:19,329 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 15:00:19,329 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 15:00:19,375 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:00:19,375 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:00:19,375 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:00:19,375 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 15:00:30,712 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 15:00:30,712 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:00:30,715 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 15:00:30,716 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:01:56,572 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:01:56,572 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:01:56,572 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:01:56,572 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 15:01:56,572 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 15:01:56,573 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 15:01:56,573 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 15:01:56,578 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 15:01:56,578 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 15:01:56,578 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 15:01:56,627 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:01:56,628 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:01:56,628 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:01:56,628 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 15:02:07,135 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:02:07,135 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:02:07,135 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:02:07,136 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 15:02:07,136 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 15:02:07,136 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 15:02:07,136 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 15:02:07,137 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 15:02:07,141 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 15:02:07,150 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,151 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,152 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,153 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,154 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,154 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,155 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,155 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,163 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,163 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,164 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,164 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,165 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,165 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,166 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,166 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,167 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 15:02:07,296 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 15:02:07,338 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 15:02:07,362 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_gU3iiVFKvCDK
2025-05-20 15:02:07,456 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:02:07,458 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:02:07,603 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_cZEHJ2iHuEQy
2025-05-20 15:02:07,605 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 15:02:07,606 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-20 15:02:07,607 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-20 15:02:07,608 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-20 15:02:07,686 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-20 15:02:07,687 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-20 15:02:07,687 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-20 15:02:07,688 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 15:02:07,810 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 15:02:07,812 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 15:02:07,812 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 15:02:07,814 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-20 15:02:07,814 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 15:02:07,815 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 15:02:10,041 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ' ,          '
2025-05-20 15:02:10,042 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-20 15:02:10,043 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-20 15:02:10,043 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-20 15:02:10,044 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-20 15:02:10,045 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-20 15:02:10,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-20 15:02:10,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-20 15:02:10,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_gU3iiVFKvCDK.
2025-05-20 15:02:10,049 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-20 15:02:10,051 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-20 15:02:10,906 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 620, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/listen?model=nova-3&punctuate=true&smart_format=true&no_delay=true&interim_results=true&encoding=linear16&vad_events=true&sample_rate=16000&channels=1&endpointing=25&filler_words=true&profanity_filter=false&numerals=false&mip_opt_out=false&language=hi'
2025-05-20 15:02:10,952 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-20 15:02:23,365 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 15:02:23,367 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:02:23,374 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 15:02:23,375 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:04:01,740 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:04:01,741 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:04:01,741 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:04:01,741 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 15:04:01,741 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 15:04:01,742 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 15:04:01,742 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 15:04:01,746 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-20 15:04:01,746 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-20 15:04:01,746 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 15:04:01,791 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:04:01,791 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:04:01,791 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:04:01,792 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 15:04:14,089 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:04:14,090 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:04:14,090 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:04:14,090 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 15:04:14,090 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 15:04:14,091 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 15:04:14,091 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 15:04:14,091 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 15:04:14,094 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 15:04:14,103 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:14,103 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:14,104 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:14,104 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:14,105 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:14,106 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:14,107 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:14,108 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:14,115 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:14,116 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:14,117 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:14,117 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:14,117 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:14,118 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:14,118 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:14,118 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:14,119 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 15:04:14,218 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 15:04:19,855 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 15:04:19,856 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:04:19,863 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 15:04:19,865 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:04:20,432 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 15:04:20,452 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_xxGDcGnkAG5S
2025-05-20 15:04:20,475 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:04:20,476 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:04:20,786 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_2UiYx6MUsMdV
2025-05-20 15:04:20,786 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 15:04:20,787 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-20 15:04:20,787 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-20 15:04:20,787 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-20 15:04:20,837 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-20 15:04:20,837 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-20 15:04:20,838 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-20 15:04:20,838 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 15:04:20,961 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 15:04:20,961 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 15:04:20,961 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 15:04:20,963 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-20 15:04:20,963 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 15:04:20,965 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 15:04:21,512 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,                   '
2025-05-20 15:04:21,512 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-20 15:04:21,513 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-20 15:04:21,514 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-20 15:04:21,514 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-20 15:04:21,515 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-20 15:04:21,516 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-20 15:04:21,517 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-20 15:04:21,517 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_xxGDcGnkAG5S.
2025-05-20 15:04:21,519 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-20 15:04:21,520 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-20 15:04:22,516 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 620, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/listen?model=nova-3&punctuate=true&smart_format=true&no_delay=true&interim_results=true&encoding=linear16&vad_events=true&sample_rate=16000&channels=1&endpointing=25&filler_words=true&profanity_filter=false&numerals=false&mip_opt_out=false&language=hi'
2025-05-20 15:04:22,521 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-20 15:08:11,126 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:08:11,127 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:08:11,127 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:08:11,127 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 15:08:11,127 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 15:08:11,128 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 15:08:11,128 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-20 15:08:11,886 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-20 15:08:11,937 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:08:11,937 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:08:11,937 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:08:11,937 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-20 15:08:25,293 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:08:25,294 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:08:25,294 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:08:25,294 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 15:08:25,294 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 15:08:25,295 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 15:08:25,295 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 15:08:25,295 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 15:08:25,299 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 15:08:25,310 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:08:25,311 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:08:25,312 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:08:25,313 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:08:25,314 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:08:25,314 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:08:25,314 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:08:25,315 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:08:25,323 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:08:25,323 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:08:25,324 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:08:25,324 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:08:25,324 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:08:25,324 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:08:25,325 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:08:25,325 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:08:25,326 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 15:08:25,420 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-20 15:09:03,122 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 15:09:03,124 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:09:03,132 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-20 15:09:03,133 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-20 15:09:04,627 - livekit.agents - INFO - [MainThread] - received job request
2025-05-20 15:09:04,642 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_9XsV3CMVXgjN
2025-05-20 15:09:04,687 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:09:04,688 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:09:04,957 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_RvFcSzs3pThD
2025-05-20 15:09:04,958 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-20 15:09:04,958 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-20 15:09:04,959 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-20 15:09:04,959 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-20 15:09:05,014 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-20 15:09:05,014 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-20 15:09:05,014 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-20 15:09:05,015 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-20 15:09:05,141 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-20 15:09:05,141 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-20 15:09:05,142 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-20 15:09:05,143 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-20 15:09:05,143 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-20 15:09:05,144 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-20 15:09:06,499 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,                  ?'
2025-05-20 15:09:06,500 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-20 15:09:06,500 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-20 15:09:06,500 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-20 15:09:06,502 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-20 15:09:06,502 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-20 15:09:06,504 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-20 15:09:06,504 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-20 15:09:06,504 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_9XsV3CMVXgjN.
2025-05-20 15:09:06,506 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-20 15:09:06,508 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-20 15:09:07,506 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 620, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/listen?model=nova-3&punctuate=true&smart_format=true&no_delay=true&interim_results=true&encoding=linear16&vad_events=true&sample_rate=16000&channels=1&endpointing=25&filler_words=true&profanity_filter=false&numerals=false&mip_opt_out=false&language=hi'
2025-05-20 15:09:07,519 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-20 15:10:34,645 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-20 15:10:34,648 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-20 15:10:34,648 - livekit.agents - DEBUG - [MainThread] - job exiting
2025-05-20 15:10:34,649 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-20 15:22:43,205 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-20 15:22:43,207 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-20 15:22:43,217 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited gracefully with SystemExit (code: 0).
2025-05-20 15:22:43,218 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-20 15:22:46,451 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-20 15:22:46,451 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-20 15:22:46,451 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-20 15:22:46,451 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-20 15:22:46,452 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-20 15:22:46,452 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-20 15:22:46,452 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-20 15:22:46,453 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-20 15:22:46,456 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-20 15:22:46,467 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:22:46,467 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:22:46,468 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:22:46,469 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:22:46,470 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:22:46,471 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:22:46,472 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:22:46,473 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-20 15:22:46,480 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:22:46,480 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:22:46,481 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:22:46,481 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:22:46,481 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:22:46,482 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:22:46,482 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:22:46,483 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-20 15:22:46,484 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-20 15:22:46,592 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 12:50:22,008 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 12:50:22,008 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 12:50:22,008 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 12:50:22,008 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 12:50:22,008 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 12:50:22,008 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 12:50:22,008 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 12:50:22,596 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 12:50:22,701 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 12:50:22,701 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 12:50:22,701 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 12:50:22,701 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 12:50:46,945 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 12:50:46,945 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 12:50:46,945 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 12:50:46,945 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 12:50:46,945 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 12:50:46,945 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 12:50:46,945 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 12:50:46,945 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 12:50:46,945 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 12:50:46,960 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:46,960 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:46,960 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:46,966 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:46,967 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:46,968 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:46,968 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:46,969 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:46,979 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:46,980 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:46,980 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:46,981 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:46,981 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:46,981 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:46,982 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:46,982 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:46,983 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 12:50:47,106 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 12:50:55,880 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 12:50:55,880 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 12:50:55,880 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 12:50:55,880 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 12:50:56,344 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 12:50:56,376 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_q4CC5v9EnsJv
2025-05-23 12:50:56,429 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 12:50:56,430 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 12:50:56,837 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_qFs3yZn8LhNG
2025-05-23 12:50:56,838 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 12:50:56,839 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 12:50:56,841 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 12:50:56,842 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 12:50:56,920 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 12:50:56,921 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 12:50:56,921 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 12:50:56,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 12:50:57,143 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 12:50:57,144 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 12:50:57,145 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 12:50:57,149 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 12:50:57,150 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 12:50:57,151 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 12:50:58,064 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ' ,       '
2025-05-23 12:50:58,065 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 12:50:58,065 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 12:50:58,066 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 12:50:58,066 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 12:50:58,067 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 12:50:58,072 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 12:50:58,072 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 12:50:58,073 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_q4CC5v9EnsJv.
2025-05-23 12:50:58,075 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 12:50:58,964 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 620, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/listen?model=nova-3&punctuate=true&smart_format=true&no_delay=true&interim_results=true&encoding=linear16&vad_events=true&sample_rate=16000&channels=1&endpointing=25&filler_words=true&profanity_filter=false&numerals=false&mip_opt_out=false&language=hi'
2025-05-23 12:51:43,533 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 12:51:43,533 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 12:51:43,537 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 12:51:43,537 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:02:14,396 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-23 13:02:14,581 - livekit.agents - WARNING - [MainThread] - exiting forcefully
2025-05-23 13:02:17,699 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:02:17,699 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:02:17,699 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:02:17,699 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:02:17,699 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:02:17,699 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:02:17,699 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:02:17,699 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:02:17,699 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:02:17,715 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:02:17,716 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:02:17,716 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:02:17,716 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:02:17,718 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:02:17,718 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:02:17,718 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:02:17,718 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:02:17,718 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:02:17,727 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:02:17,728 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:02:17,728 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:02:17,729 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:02:17,729 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:02:17,729 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:02:17,730 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:02:17,730 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:02:17,835 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:02:24,044 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:02:24,044 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:02:24,044 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:02:24,044 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:03:39,876 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:03:39,876 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:03:39,876 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:03:39,876 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:03:39,876 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:03:39,877 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:03:39,877 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:03:39,881 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:03:39,881 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:03:39,881 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:03:39,920 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:03:39,920 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:03:39,920 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:03:39,920 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:03:51,147 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:03:51,147 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:03:51,147 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:03:51,147 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:03:51,148 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:03:51,148 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:03:51,148 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:03:51,148 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:03:51,152 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:03:51,160 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:51,160 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:51,160 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:51,161 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:51,161 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:51,162 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:51,162 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:51,163 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:51,170 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:51,171 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:51,171 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:51,171 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:51,171 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:51,172 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:51,172 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:51,172 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:51,173 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:03:51,284 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:03:58,601 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:03:58,601 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:03:58,601 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:03:58,601 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:03:59,032 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:03:59,048 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_wgyeYV5J2oTU
2025-05-23 13:03:59,125 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:03:59,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:03:59,286 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_PVGEL4bQfDKq
2025-05-23 13:03:59,287 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:03:59,288 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:03:59,288 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 412, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:03:59,290 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 412, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 447, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:06:48,501 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-23 13:06:48,504 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-23 13:06:48,522 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited gracefully with SystemExit (code: 0).
2025-05-23 13:06:48,523 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-23 13:07:28,104 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:07:28,104 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:07:28,104 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:07:28,104 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:07:28,104 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:07:28,105 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:07:28,105 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:07:28,105 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:07:28,109 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:07:28,115 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:07:28,116 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:07:28,116 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:07:28,117 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:07:28,117 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:07:28,118 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:07:28,118 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:07:28,119 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:07:28,126 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:07:28,230 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:07:59,398 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:07:59,398 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:07:59,398 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:07:59,398 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:09:10,329 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:09:10,329 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:09:10,329 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:09:10,329 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:09:10,329 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:09:10,329 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:09:10,329 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:09:10,329 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:09:10,329 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:09:10,329 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:09:10,378 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:09:10,378 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:09:10,378 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:09:10,378 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:09:20,718 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:09:20,718 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:09:20,718 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:09:20,718 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:09:20,719 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:09:20,719 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:09:20,720 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:09:20,720 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:09:20,724 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:09:20,732 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:09:20,732 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:09:20,733 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:09:20,733 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:09:20,733 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:09:20,734 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:09:20,734 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:09:20,735 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:09:20,741 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:09:20,742 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:09:20,742 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:09:20,742 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:09:20,743 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:09:20,743 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:09:20,743 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:09:20,744 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:09:20,744 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:09:20,849 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:09:25,573 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:09:25,573 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:09:25,576 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:09:25,577 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:09:40,970 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:09:40,971 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:09:40,973 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:09:40,973 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:10:58,444 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:10:58,444 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:10:58,444 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:10:58,444 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:10:58,444 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:10:58,444 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:10:58,444 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:10:58,460 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:10:58,461 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:10:58,461 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:10:58,501 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:10:58,501 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:10:58,501 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:10:58,501 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:11:07,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:11:07,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:11:07,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:11:07,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:11:07,760 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:11:07,760 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:11:07,760 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:11:07,760 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:11:07,760 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:11:07,777 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:07,778 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:07,778 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:07,778 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:07,779 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:07,780 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:07,781 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:07,781 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:07,784 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:11:07,902 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:11:15,507 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:11:15,507 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:11:15,507 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:11:15,507 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:11:15,951 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:11:15,979 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_YG4PBRVXfTQH
2025-05-23 13:11:16,039 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:11:16,041 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:11:16,271 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_XyGWjQQdkjrs
2025-05-23 13:11:16,272 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:11:16,272 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:11:16,273 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 412, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:11:16,274 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 412, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 447, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:14:18,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:14:18,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:14:18,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:14:18,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:14:18,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:14:18,304 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:14:18,304 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:14:18,314 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:14:18,314 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:14:18,314 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:14:18,365 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:14:18,365 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:14:18,365 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:14:18,365 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:14:49,854 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:14:49,854 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:14:49,854 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:14:49,854 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:14:49,854 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:14:49,854 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:14:49,854 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:14:49,854 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:14:49,854 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:14:49,867 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:49,868 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:49,868 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:49,869 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:49,870 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:49,871 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:49,872 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:49,872 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:49,874 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:49,881 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:49,881 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:49,881 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:49,881 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:49,881 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:49,881 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:49,881 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:49,881 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:14:50,008 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:14:54,162 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:14:54,162 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:14:54,164 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:14:54,164 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:14:54,704 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:14:54,750 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_cuiUZhrjVxbQ
2025-05-23 13:14:54,780 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:14:54,781 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:14:54,981 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_ucyEbqXFCWFg
2025-05-23 13:14:54,982 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:14:54,982 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:14:54,983 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 13:14:54,983 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 13:14:55,033 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 13:14:55,034 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 13:14:55,034 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 13:14:55,035 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 13:14:55,164 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 13:14:55,164 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 13:14:55,165 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 13:14:55,167 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 13:14:55,168 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 13:14:55,169 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 13:14:55,754 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,        voc      ?'
2025-05-23 13:14:55,757 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 13:14:55,759 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 13:14:55,760 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 13:14:55,760 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 13:14:55,761 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 13:14:55,762 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 13:14:55,764 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 13:14:55,764 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_cuiUZhrjVxbQ.
2025-05-23 13:14:55,767 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 13:14:55,769 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 13:14:56,663 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 622, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/listen?model=nova-3&punctuate=true&smart_format=true&no_delay=true&interim_results=true&encoding=linear16&vad_events=true&sample_rate=16000&channels=1&endpointing=25&filler_words=true&profanity_filter=false&numerals=false&mip_opt_out=false&language=hi'
2025-05-23 13:14:56,667 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 13:18:38,400 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:18:38,400 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:18:38,400 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:18:38,400 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:18:38,400 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:18:38,400 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:18:38,400 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:18:39,033 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:18:39,084 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:18:39,084 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:18:39,084 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:18:39,084 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:18:49,328 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:18:49,328 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:18:49,328 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:18:49,328 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:18:49,328 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:18:49,328 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:18:49,328 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:18:49,328 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:18:49,328 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:18:49,346 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:49,347 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:49,348 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:49,348 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:49,349 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:49,349 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:49,350 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:49,351 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:49,358 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:18:49,455 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:18:54,925 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:18:54,925 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:18:54,925 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:18:54,925 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:18:55,484 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:18:55,507 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_P3wG5ngZjGH3
2025-05-23 13:18:55,540 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:18:55,541 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:18:55,800 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_aY9jZfqWrdP5
2025-05-23 13:18:55,801 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:18:55,801 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:18:55,802 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 13:18:55,802 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 13:18:55,851 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 13:18:55,852 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 13:18:55,852 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 13:18:55,852 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 13:18:55,981 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 13:18:55,981 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 13:18:55,982 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 13:18:55,983 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 13:18:55,984 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 13:18:55,984 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 13:18:56,556 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,             '
2025-05-23 13:18:56,557 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 13:18:56,557 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 13:18:56,558 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 13:18:56,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 13:18:56,558 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 13:18:56,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 13:18:56,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 13:18:56,560 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_P3wG5ngZjGH3.
2025-05-23 13:18:56,562 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 13:18:56,563 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 13:18:57,471 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 622, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/listen?model=nova-3&punctuate=true&smart_format=true&no_delay=true&interim_results=true&encoding=linear16&vad_events=true&sample_rate=16000&channels=1&endpointing=25&filler_words=true&profanity_filter=false&numerals=false&mip_opt_out=false&language=hi'
2025-05-23 13:18:57,477 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 13:20:48,046 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:20:48,046 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:20:48,046 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:20:48,046 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:20:48,046 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:20:48,047 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:20:48,047 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:20:48,050 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:20:48,051 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:20:48,051 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:20:48,095 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:20:48,096 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:20:48,096 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:20:48,096 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:20:56,118 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:20:56,119 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:20:56,119 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:20:56,119 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:20:56,119 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:20:56,119 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:20:56,119 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:20:56,119 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:20:56,123 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:20:56,130 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:20:56,131 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:20:56,131 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:20:56,132 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:20:56,132 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:20:56,133 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:20:56,133 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:20:56,134 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:20:56,140 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:20:56,141 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:20:56,141 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:20:56,141 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:20:56,142 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:20:56,142 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:20:56,142 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:20:56,142 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:20:56,143 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:20:56,249 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:21:11,423 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:21:11,424 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:21:11,430 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:21:11,432 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:21:11,866 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:21:11,884 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_fs42Nk3wgMez
2025-05-23 13:21:11,987 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:21:11,988 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:21:12,182 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_n5zujoe8FuYw
2025-05-23 13:21:12,183 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:21:12,184 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:21:12,184 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 412, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:21:12,186 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 412, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 444, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:21:52,070 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-23 13:23:06,253 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:23:06,254 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:23:06,254 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:23:06,254 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:23:06,254 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:23:06,255 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:23:06,255 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:23:06,258 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:23:06,260 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:23:06,260 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:23:06,305 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:23:06,305 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:23:06,305 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:23:06,306 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:23:19,115 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:23:19,115 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:23:19,116 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:23:19,116 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:23:19,116 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:23:19,116 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:23:19,117 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:23:19,117 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:23:19,120 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:23:19,127 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:19,128 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:19,128 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:19,130 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:19,130 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:19,131 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:19,131 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:19,132 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:19,139 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:19,140 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:19,140 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:19,140 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:19,141 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:19,141 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:19,142 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:19,142 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:19,143 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:23:19,249 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:23:28,835 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:23:28,836 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:23:28,844 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:23:28,846 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:23:29,294 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:23:29,310 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_Y74f9i98BBSC
2025-05-23 13:23:29,427 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:23:29,428 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:23:29,617 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_izL9qvS5bDwN
2025-05-23 13:23:29,617 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:23:29,617 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:23:29,618 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 13:23:29,619 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 13:23:29,669 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 13:23:29,670 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 13:23:29,670 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 13:23:29,670 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 13:23:29,791 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 13:23:29,791 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 13:23:29,791 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 13:23:29,793 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 13:23:29,793 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 13:23:29,793 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 13:23:30,336 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,              '
2025-05-23 13:23:30,337 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 13:23:30,338 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 13:23:30,339 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 13:23:30,339 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 13:23:30,340 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 13:23:30,342 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 13:23:30,342 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 13:23:30,342 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_Y74f9i98BBSC.
2025-05-23 13:23:30,345 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 13:23:30,346 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 13:23:31,233 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 622, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/listen?model=nova-3&punctuate=true&smart_format=true&no_delay=true&interim_results=true&encoding=linear16&vad_events=true&sample_rate=16000&channels=1&endpointing=25&filler_words=true&profanity_filter=false&numerals=false&mip_opt_out=false&language=hi'
2025-05-23 13:23:31,237 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 13:27:41,303 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:27:41,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:27:41,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:27:41,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:27:41,304 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:27:41,305 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:27:41,305 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:27:41,939 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:27:41,985 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:27:41,986 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:27:41,986 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:27:41,986 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:27:51,765 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:27:51,766 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:27:51,766 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:27:51,766 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:27:51,766 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:27:51,767 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:27:51,767 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:27:51,767 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:27:51,770 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:27:51,778 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:51,779 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:51,779 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:51,780 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:51,780 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:51,781 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:51,781 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:51,782 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:51,788 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:51,789 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:51,789 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:51,789 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:51,789 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:51,790 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:51,790 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:51,790 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:51,791 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:27:51,910 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:27:55,796 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:27:55,796 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:27:55,799 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:27:55,799 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:27:56,233 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:27:56,251 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_uBfCDYPRGL3X
2025-05-23 13:27:56,294 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:27:56,295 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:27:56,533 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_Bx3M5BXkqA72
2025-05-23 13:27:56,535 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:27:56,535 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:27:56,535 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 412, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:27:56,537 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 412, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 445, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:32:12,654 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-23 13:32:12,657 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-23 13:32:12,679 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited gracefully with SystemExit (code: 0).
2025-05-23 13:32:12,679 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-23 13:38:18,221 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:38:18,222 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:38:18,222 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:38:18,222 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:38:18,222 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:38:18,223 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:38:18,223 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:38:18,942 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:38:19,008 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:38:19,010 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:38:19,010 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:38:19,010 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:38:25,177 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:38:25,177 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:38:25,178 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:38:25,178 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:38:25,178 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:38:25,178 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:38:25,178 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:38:25,178 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:38:25,183 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:38:25,189 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:25,190 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:25,190 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:25,191 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:25,192 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:25,193 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:25,194 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:25,195 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:25,206 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:25,208 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:25,209 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:25,209 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:25,210 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:25,210 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:25,211 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:25,211 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:25,212 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:38:25,308 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:38:35,664 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:38:35,666 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:38:35,673 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:38:35,675 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:38:36,131 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:38:36,151 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_2snKp3eCy7Vv
2025-05-23 13:38:36,193 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:38:36,194 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:38:36,414 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_HT78VCJnskqY
2025-05-23 13:38:36,415 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:38:36,416 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:38:36,416 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 409, in entrypoint
    import livekit_plugins.deepgram # Import the module explicitly
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ModuleNotFoundError: No module named 'livekit_plugins'
2025-05-23 13:41:52,436 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:41:52,436 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:41:52,436 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:41:52,437 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:41:52,437 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:41:52,437 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:41:52,438 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:41:52,441 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:41:52,441 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:41:52,441 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:41:52,490 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:41:52,491 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:41:52,491 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:41:52,491 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:42:13,505 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:42:13,506 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:42:13,506 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:42:13,506 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:42:13,506 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:42:13,507 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:42:13,507 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:42:13,507 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:42:13,512 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:42:13,519 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:42:13,519 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:42:13,520 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:42:13,521 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:42:13,521 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:42:13,522 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:42:13,523 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:42:13,523 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:42:13,532 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:42:13,533 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:42:13,533 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:42:13,534 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:42:13,534 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:42:13,534 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:42:13,534 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:42:13,535 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:42:13,535 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:42:13,634 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:42:23,494 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:42:23,496 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:42:23,504 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:42:23,505 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:43:43,322 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:43:43,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:43:43,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:43:43,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:43:43,323 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:43:43,323 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:43:43,324 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:43:43,961 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:43:44,008 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:43:44,008 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:43:44,009 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:43:44,009 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:43:55,151 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:43:55,151 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:43:55,151 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:43:55,151 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:43:55,152 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:43:55,152 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:43:55,152 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:43:55,152 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:43:55,156 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:43:55,163 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:43:55,163 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:43:55,164 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:43:55,165 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:43:55,165 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:43:55,166 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:43:55,166 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:43:55,168 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:43:55,176 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:43:55,176 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:43:55,177 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:43:55,177 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:43:55,177 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:43:55,178 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:43:55,178 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:43:55,178 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:43:55,179 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:43:55,283 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:44:05,466 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:44:05,467 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:44:05,469 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:44:05,469 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:44:06,064 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:44:06,081 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_VdSC6zCys37L
2025-05-23 13:44:06,153 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:44:06,155 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:44:06,404 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_Z2mNdruFFdqu
2025-05-23 13:44:06,407 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:44:06,408 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:44:06,413 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:44:06,415 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 442, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:44:06,424 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 442, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 473, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:46:19,103 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:46:19,103 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:46:19,103 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:46:19,104 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:46:19,104 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:46:19,104 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:46:19,104 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:46:19,109 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:46:19,109 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:46:19,109 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:46:19,154 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:46:19,155 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:46:19,155 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:46:19,155 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:46:27,405 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:46:27,405 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:46:27,405 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:46:27,406 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:46:27,406 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:46:27,406 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:46:27,406 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:46:27,406 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:46:27,409 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:46:27,416 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:46:27,417 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:46:27,417 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:46:27,418 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:46:27,419 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:46:27,419 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:46:27,420 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:46:27,421 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:46:27,429 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:46:27,430 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:46:27,430 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:46:27,430 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:46:27,431 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:46:27,431 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:46:27,431 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:46:27,432 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:46:27,432 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:46:27,538 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:46:47,678 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:46:47,679 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:46:47,683 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:46:47,683 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:47:57,214 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:47:57,214 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:47:57,214 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:47:57,214 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:47:57,214 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:47:57,215 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:47:57,215 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:47:57,219 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 13:47:57,219 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 13:47:57,219 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:47:57,263 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:47:57,264 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:47:57,264 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:47:57,264 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:48:16,453 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:48:16,453 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:48:16,453 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:48:16,453 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:48:16,453 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:48:16,454 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:48:16,454 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:48:16,454 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:48:16,458 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:48:16,464 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:16,465 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:16,466 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:16,466 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:16,467 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:16,467 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:16,469 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:16,469 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:16,476 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:16,476 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:16,477 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:16,477 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:16,477 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:16,478 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:16,478 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:16,478 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:16,479 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:48:16,604 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:48:25,041 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:48:25,041 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:48:25,043 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:48:25,044 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:48:25,449 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:48:25,468 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_hbYeRDWfC4qv
2025-05-23 13:48:25,565 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:48:25,566 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:48:25,752 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_5etFttZuE49f
2025-05-23 13:48:25,755 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:48:25,755 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:48:25,757 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:48:25,758 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: STT.__init__() got an unexpected keyword argument 'endpointing'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 442, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'endpointing'
2025-05-23 13:48:25,759 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 442, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'endpointing'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 473, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: STT.__init__() got an unexpected keyword argument 'endpointing'
2025-05-23 13:49:54,380 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:49:54,381 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:49:54,381 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:49:54,381 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:49:54,381 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:49:54,382 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:49:54,382 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:49:55,030 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:49:55,072 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:49:55,073 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:49:55,073 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:49:55,073 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:50:28,030 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:50:28,031 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:50:28,032 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:50:28,032 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:50:28,032 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:50:28,033 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:50:28,033 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:50:28,033 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:50:28,036 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:50:28,043 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:28,044 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:28,044 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:28,045 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:28,046 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:28,047 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:28,048 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:28,049 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:28,060 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:28,061 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:28,062 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:28,062 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:28,063 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:28,063 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:28,064 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:28,064 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:28,065 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:50:28,194 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:50:37,943 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:50:37,943 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:50:37,946 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:50:37,947 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:50:38,472 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:50:38,501 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_kVp4t6UkiJA3
2025-05-23 13:50:38,546 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:50:38,548 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:50:38,803 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_Uk5mdBg7ytSe
2025-05-23 13:50:38,804 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:50:38,805 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:50:38,806 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:50:38,806 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 13:50:38,806 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 13:50:38,857 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 13:50:38,857 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 13:50:38,858 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 13:50:38,858 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 13:50:38,986 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 13:50:38,986 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 13:50:38,986 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 13:50:38,988 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 13:50:38,988 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 13:50:38,988 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 13:50:40,062 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,              '
2025-05-23 13:50:40,062 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 13:50:40,062 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 13:50:40,063 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 13:50:40,063 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 13:50:40,064 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 13:50:40,066 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 13:50:40,066 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 13:50:40,067 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_kVp4t6UkiJA3.
2025-05-23 13:50:40,069 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 13:50:40,070 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 13:50:40,955 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 622, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 479, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1409, in send
    return self._coro.send(arg)
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\aiohttp\client.py", line 1021, in _ws_connect
    raise WSServerHandshakeError(
aiohttp.client_exceptions.WSServerHandshakeError: 400, message='Invalid response status', url='wss://api.deepgram.com/v1/listen?model=nova-3&punctuate=true&smart_format=true&no_delay=true&interim_results=true&encoding=linear16&vad_events=true&sample_rate=16000&channels=1&endpointing=25&filler_words=true&profanity_filter=false&numerals=false&mip_opt_out=false&language=hi'
2025-05-23 13:50:40,959 - livekit.agents - ERROR - [job_thread_runner] - Error in _forward_input
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 436, in _forward_input
    stream.push_frame(frame)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 314, in push_frame
    self._check_not_closed()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 377, in _check_not_closed
    raise RuntimeError(f"{cls.__module__}.{cls.__name__} is closed")
RuntimeError: livekit.plugins.deepgram.stt.SpeechStream is closed
2025-05-23 13:50:40,984 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 13:57:38,694 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:57:38,695 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:57:38,695 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:57:38,695 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:57:38,695 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:57:38,695 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:57:38,695 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 13:57:39,343 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 13:57:39,393 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:57:39,393 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:57:39,394 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:57:39,394 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 13:57:52,850 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 13:57:52,850 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 13:57:52,850 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 13:57:52,850 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 13:57:52,850 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 13:57:52,851 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 13:57:52,851 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 13:57:52,851 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 13:57:52,855 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 13:57:52,863 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:57:52,863 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:57:52,864 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:57:52,864 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:57:52,865 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:57:52,866 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:57:52,867 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:57:52,867 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:57:52,876 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:57:52,876 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:57:52,876 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:57:52,877 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:57:52,877 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:57:52,877 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:57:52,878 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:57:52,878 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:57:52,879 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 13:57:53,041 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 13:58:00,737 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:58:00,738 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:58:00,741 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 13:58:00,742 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 13:58:01,171 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 13:58:01,187 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_Af9cCfDnPnJ9
2025-05-23 13:58:01,250 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 13:58:01,251 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 13:58:01,468 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_jm3fF3FB3ZbB
2025-05-23 13:58:01,469 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:58:01,469 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 13:58:01,471 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 13:58:01,471 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 442, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 13:58:01,472 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 442, in entrypoint
    stt_plugin = deepgram.STT(
                 ^^^^^^^^^^^^^
TypeError: STT.__init__() got an unexpected keyword argument 'vad_events'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 471, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: STT.__init__() got an unexpected keyword argument 'vad_events'
2025-05-23 14:00:36,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:00:36,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:00:36,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:00:36,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:00:36,881 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:00:36,882 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:00:36,882 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 14:00:36,887 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 14:00:36,887 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 14:00:36,887 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 14:00:36,931 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:00:36,931 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:00:36,932 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:00:36,932 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:00:45,836 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:00:45,836 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:00:45,836 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:00:45,836 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:00:45,837 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:00:45,837 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:00:45,837 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 14:00:45,838 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 14:00:45,841 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 14:00:45,848 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:45,848 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:45,849 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:45,850 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:45,850 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:45,851 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:45,852 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:45,853 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:45,861 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:45,862 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:45,862 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:45,862 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:45,862 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:45,862 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:45,864 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:45,864 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:45,864 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 14:00:45,976 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 14:00:54,939 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:00:54,940 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 14:00:54,943 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:00:54,943 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 14:00:55,566 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 14:00:55,583 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_9Vk8QGASBReR
2025-05-23 14:00:55,672 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:00:55,673 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:00:55,845 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_MP4ngN88nkoo
2025-05-23 14:00:55,846 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 14:00:55,846 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 14:00:55,847 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 14:00:55,848 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 14:00:55,848 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 14:00:55,899 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 14:00:55,900 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 14:00:55,900 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 14:00:55,900 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 14:00:56,019 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 14:00:56,021 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 14:00:56,021 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 14:00:56,022 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 14:00:56,024 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 14:00:56,024 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 14:00:56,733 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ' ,              ?'
2025-05-23 14:00:56,733 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 14:00:56,733 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 14:00:56,734 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 14:00:56,734 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 14:00:56,735 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 14:00:56,736 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 14:00:56,737 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 14:00:56,737 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_9Vk8QGASBReR.
2025-05-23 14:00:56,738 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 14:00:56,740 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 14:03:16,933 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:03:16,933 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:03:16,933 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:03:16,933 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:03:16,934 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:03:16,934 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:03:16,934 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 14:03:16,938 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 14:03:16,938 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 14:03:16,939 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 14:03:16,984 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:03:16,984 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:03:16,984 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:03:16,985 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:03:29,344 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:03:29,344 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:03:29,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:03:29,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:03:29,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:03:29,345 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:03:29,346 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 14:03:29,346 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 14:03:29,350 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 14:03:29,358 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:29,358 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:29,359 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:29,360 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:29,361 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:29,361 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:29,362 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:29,363 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:29,373 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:29,373 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:29,374 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:29,374 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:29,375 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:29,375 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:29,375 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:29,376 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:29,377 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 14:03:29,484 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 14:03:35,079 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:03:35,081 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 14:03:35,088 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:03:35,089 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 14:03:35,677 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 14:03:35,698 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_dT7TTjpmAafS
2025-05-23 14:03:35,746 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:03:35,747 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:03:35,990 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_n775gC4XQ93M
2025-05-23 14:03:35,991 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 14:03:35,991 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 14:03:35,993 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 14:03:35,993 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 14:03:35,994 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 14:03:36,046 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 14:03:36,046 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 14:03:36,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 14:03:36,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 14:03:36,170 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 14:03:36,171 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 14:03:36,171 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 14:03:36,173 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 14:03:36,173 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 14:03:36,173 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 14:03:37,861 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,               ?'
2025-05-23 14:03:37,861 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 14:03:37,862 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 14:03:37,862 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 14:03:37,863 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 14:03:37,863 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 14:03:37,865 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 14:03:37,866 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 14:03:37,866 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_dT7TTjpmAafS.
2025-05-23 14:03:37,867 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 14:03:37,869 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 14:04:04,171 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 14:04:04,254 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:04:04,254 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 14:04:04,257 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:04:04,257 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 14:04:04,573 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 14:38:32,126 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:38:32,126 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:38:32,127 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:38:32,127 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:38:32,127 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:38:32,128 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:38:32,128 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 14:38:32,128 - __main__ - CRITICAL - [MainThread] - !!! __main__: CRITICAL ERROR during cli.run_app (Agent Worker): name 'entrypoint' is not defined
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1137, in <module>
    entrypoint_fnc=entrypoint,
                   ^^^^^^^^^^
NameError: name 'entrypoint' is not defined
2025-05-23 14:46:39,671 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:46:39,671 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:46:39,672 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:46:39,672 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:46:39,672 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:46:39,672 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:46:39,672 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 14:46:39,672 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 14:46:39,676 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 14:46:39,685 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:46:39,686 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:46:39,686 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:46:39,687 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:46:39,687 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:46:39,687 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:46:39,687 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:46:39,688 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:46:39,696 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:46:39,697 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:46:39,697 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:46:39,697 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:46:39,697 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:46:39,698 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:46:39,698 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:46:39,698 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:46:39,699 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 14:46:39,806 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 14:47:39,950 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:47:39,950 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:47:39,950 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:47:39,950 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:47:39,951 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:47:39,951 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:47:39,951 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 14:47:40,592 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 14:47:40,642 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:47:40,642 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:47:40,642 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:47:40,643 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:47:40,643 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:49:36,261 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:49:36,261 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:49:36,261 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:49:36,261 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:49:36,262 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:49:36,262 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:49:36,262 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 14:49:36,863 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 14:49:36,913 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:49:36,914 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:49:36,914 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:49:36,914 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:49:36,914 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:49:50,917 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:49:50,917 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:49:50,917 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:49:50,918 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:49:50,918 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:49:50,918 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:49:50,919 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 14:49:50,919 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 14:49:50,922 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 14:49:50,929 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:49:50,930 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:49:50,931 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:49:50,931 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:49:50,932 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:49:50,932 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:49:50,933 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:49:50,934 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:49:50,942 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:49:50,942 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:49:50,942 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:49:50,943 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:49:50,943 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:49:50,943 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:49:50,943 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:49:50,944 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:49:50,944 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 14:49:51,040 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 14:50:00,129 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:50:00,131 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 14:50:00,139 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:50:00,141 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 14:50:00,574 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 14:50:00,597 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_iThMiNxK7qNs
2025-05-23 14:50:00,690 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:50:00,691 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:50:00,913 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_Kc9uPntR6Z2P
2025-05-23 14:50:00,914 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins... (Checking Environment Variables First)
2025-05-23 14:50:00,915 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required environment variables are set. Proceeding with plugin initialization.
2025-05-23 14:50:00,915 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-23 14:50:00,965 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-23 14:50:00,966 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 14:50:00,976 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 14:50:00,978 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 14:50:00,978 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 14:50:00,979 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 14:50:01,106 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 14:50:01,106 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 14:50:01,107 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 14:50:01,108 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 14:50:01,108 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 14:50:01,109 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 14:50:01,750 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,       '
2025-05-23 14:50:01,751 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 14:50:01,751 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Creating AgentSession...
2025-05-23 14:50:01,752 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 14:50:01,753 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 14:50:01,753 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 14:50:01,754 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 14:50:01,756 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 14:50:01,757 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 14:50:01,757 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_iThMiNxK7qNs.
2025-05-23 14:50:01,760 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 14:50:51,543 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 14:51:14,121 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-23 14:51:14,123 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-23 14:51:14,125 - livekit.agents - DEBUG - [MainThread] - job exiting
2025-05-23 14:51:14,127 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-23 14:51:14,159 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 14:54:31,053 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-23 14:54:31,055 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-23 14:54:31,064 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited gracefully with SystemExit (code: 0).
2025-05-23 14:54:31,065 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-23 14:54:37,198 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:54:37,198 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:54:37,198 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:54:37,199 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:54:37,199 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:54:37,199 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:54:37,200 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:54:37,200 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 14:54:37,200 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 14:54:37,204 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 14:54:37,212 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:54:37,212 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:54:37,213 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:54:37,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:54:37,214 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:54:37,215 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:54:37,216 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:54:37,217 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:54:37,224 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:54:37,225 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:54:37,225 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:54:37,225 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:54:37,226 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:54:37,226 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:54:37,226 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:54:37,227 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:54:37,267 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 14:54:37,379 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 14:54:43,983 - __main__ - INFO - [MainThread] - --- __main__: Uvicorn server has stopped. ---
2025-05-23 14:54:43,984 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Token Server mode). ---
2025-05-23 14:54:46,879 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:54:46,879 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:54:46,879 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:54:46,879 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:54:46,880 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:54:46,880 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:54:46,881 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:54:46,881 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 14:54:47,506 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 14:54:47,566 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:54:47,567 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:54:47,567 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:54:47,567 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:54:47,567 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:54:47,568 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:55:33,253 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:55:33,255 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 14:55:33,262 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:55:33,263 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 14:55:33,699 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 14:55:33,717 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_V9VBiyGhfrV5
2025-05-23 14:55:33,812 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:55:33,813 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:55:34,052 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_uT3x3c2XWg6h
2025-05-23 14:55:34,053 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins... (Checking Environment Variables First)
2025-05-23 14:55:34,053 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required environment variables are set. Proceeding with plugin initialization.
2025-05-23 14:55:34,054 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-23 14:55:34,104 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-23 14:55:34,105 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 14:55:34,113 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 14:55:34,114 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 14:55:34,114 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 14:55:34,115 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 14:55:34,242 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 14:55:34,242 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 14:55:34,243 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 14:55:34,244 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 14:55:34,245 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 14:55:34,245 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 14:55:35,210 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,                !'
2025-05-23 14:55:35,211 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 14:55:35,211 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Creating AgentSession...
2025-05-23 14:55:35,212 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 14:55:35,212 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 14:55:35,212 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 14:55:35,213 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 14:55:35,214 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 14:55:35,215 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 14:55:35,215 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_V9VBiyGhfrV5.
2025-05-23 14:55:35,217 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 14:56:35,602 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:56:35,603 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:56:35,603 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:56:35,603 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:56:35,603 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:56:35,604 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:56:35,604 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:56:35,604 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 14:56:35,608 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 14:56:35,609 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 14:56:35,609 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 14:56:35,654 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:56:35,654 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:56:35,654 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:56:35,654 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:56:35,654 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:56:35,654 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:56:48,027 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 14:56:48,027 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 14:56:48,028 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 14:56:48,028 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 14:56:48,028 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 14:56:48,028 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 14:56:48,029 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 14:56:48,029 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 14:56:48,029 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 14:56:48,033 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 14:56:48,040 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:48,041 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:48,041 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:48,042 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:48,042 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:48,043 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:48,043 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:48,043 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:48,050 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:48,051 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:48,051 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:48,051 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:48,051 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:48,052 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:48,052 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:48,052 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:48,053 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 14:56:48,165 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 14:56:56,356 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:56:56,357 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 14:56:56,361 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 14:56:56,362 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 14:56:57,851 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 14:56:57,869 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_FaMtCunQviTv
2025-05-23 14:56:57,948 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 14:56:57,949 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 14:56:58,299 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_xyTJrgaLVUEU
2025-05-23 14:56:58,300 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins... (Checking Environment Variables First)
2025-05-23 14:56:58,301 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required environment variables are set. Proceeding with plugin initialization.
2025-05-23 14:56:58,302 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-23 14:56:58,351 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-23 14:56:58,352 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 14:56:58,362 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 14:56:58,362 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 14:56:58,363 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 14:56:58,363 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 14:56:58,482 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 14:56:58,482 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 14:56:58,482 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 14:56:58,484 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 14:56:58,484 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 14:56:58,485 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 14:56:59,107 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,               ?'
2025-05-23 14:56:59,107 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 14:56:59,108 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Creating AgentSession...
2025-05-23 14:56:59,109 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 14:56:59,109 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 14:56:59,110 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 14:56:59,110 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 14:56:59,111 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 14:56:59,112 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 14:56:59,112 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_FaMtCunQviTv.
2025-05-23 14:56:59,115 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 15:06:51,911 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:06:51,911 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:06:51,911 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:06:51,911 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:06:51,911 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:06:51,911 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:06:51,911 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:06:51,911 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:06:52,559 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:06:52,615 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:06:52,615 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:06:52,616 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:06:52,616 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:06:52,616 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:06:52,616 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:07:11,192 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:07:11,208 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:07:11,208 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:07:11,209 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:07:11,209 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:07:11,209 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:07:11,210 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:07:11,210 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:07:11,210 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:07:11,214 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:07:11,221 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:07:11,222 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:07:11,222 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:07:11,223 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:07:11,224 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:07:11,224 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:07:11,224 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:07:11,225 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:07:11,228 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:07:11,346 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:07:18,375 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:07:18,375 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:07:18,375 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:07:18,375 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:10:25,421 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:10:25,421 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:10:25,421 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:10:25,421 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:10:25,421 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:10:25,421 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:10:25,421 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:10:25,421 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:10:26,002 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:10:26,060 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:10:26,060 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:10:26,060 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:10:26,060 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:10:26,060 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:10:26,060 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:10:42,359 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:10:42,359 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:10:42,376 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:42,377 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:42,377 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:42,378 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:42,378 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:42,379 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:42,380 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:42,380 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:42,390 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:42,390 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:42,391 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:42,391 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:42,391 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:42,391 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:42,391 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:42,391 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:42,391 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:10:42,508 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:10:57,452 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:10:57,455 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:10:57,462 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:10:57,463 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:10:57,899 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:10:57,919 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_6Qmr2o8yBMqT
2025-05-23 15:10:57,953 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:10:57,953 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:10:58,222 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_BGa79yMUwWPd
2025-05-23 15:10:58,223 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins... (Checking Environment Variables First)
2025-05-23 15:10:58,223 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required environment variables are set. Proceeding with plugin initialization.
2025-05-23 15:10:58,224 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-23 15:10:58,274 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-23 15:10:58,275 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 15:10:58,284 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 15:10:58,285 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 15:10:58,285 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 15:10:58,285 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 15:10:58,411 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 15:10:58,411 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 15:10:58,412 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 15:10:58,413 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 15:10:58,413 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 15:10:58,414 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 15:10:59,152 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,              '
2025-05-23 15:10:59,153 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 15:10:59,153 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Creating AgentSession...
2025-05-23 15:10:59,154 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 15:10:59,154 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 15:10:59,154 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 15:10:59,154 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 15:10:59,156 - livekit.agents - WARNING - [job_thread_runner] - VAD is not set. Enabling VAD is recommended when using LLM and STT for more responsive interruption handling.
2025-05-23 15:10:59,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 15:10:59,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 15:10:59,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_6Qmr2o8yBMqT.
2025-05-23 15:10:59,162 - livekit.agents - ERROR - [job_thread_runner] - Error in _stt_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\audio_recognition.py", line 353, in _stt_task
    async for ev in node:
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 424, in stt_node
    raise RuntimeError(
RuntimeError: The STT (livekit.plugins.openai.stt.STT) does not support streaming, add a VAD to the AgentTask/VoiceAgent to enable streamingOr manually wrap your STT in a stt.StreamAdapter
2025-05-23 15:10:59,175 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 15:15:05,343 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:15:05,343 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:15:05,343 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:15:05,343 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:15:05,343 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:15:05,343 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:15:05,343 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:15:05,343 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:15:05,932 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:15:05,995 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:15:05,995 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:15:05,995 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:15:05,996 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:15:05,996 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:15:05,996 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:15:16,716 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:15:16,716 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:15:16,738 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:16,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:16,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:16,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:16,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:16,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:16,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:16,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:16,749 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:15:16,848 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:15:29,968 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:15:29,968 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:15:29,968 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:15:29,968 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:15:30,469 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:15:30,488 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_nG8aGPZ5Eotj
2025-05-23 15:15:30,525 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:15:30,527 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:15:30,824 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_CYUdZ5Nuwqce
2025-05-23 15:15:30,828 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins... (Checking Environment Variables First)
2025-05-23 15:15:30,830 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required environment variables are set. Proceeding with plugin initialization.
2025-05-23 15:15:30,832 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-23 15:15:30,925 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-23 15:15:30,926 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Wrapping OpenAI STT plugin with StreamAdapter for streaming...
2025-05-23 15:15:30,926 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: StreamAdapter.__init__() takes 1 positional argument but 2 were given
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1160, in entrypoint
    stt_plugin = StreamAdapter(stt_plugin_raw)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: StreamAdapter.__init__() takes 1 positional argument but 2 were given
2025-05-23 15:15:30,928 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1160, in entrypoint
    stt_plugin = StreamAdapter(stt_plugin_raw)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: StreamAdapter.__init__() takes 1 positional argument but 2 were given

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1180, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: StreamAdapter.__init__() takes 1 positional argument but 2 were given
2025-05-23 15:17:16,965 - livekit.agents - INFO - [MainThread] - draining worker
2025-05-23 15:17:16,966 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-05-23 15:17:16,976 - __main__ - INFO - [MainThread] - --- __main__: cli.run_app exited gracefully with SystemExit (code: 0).
2025-05-23 15:17:16,976 - __main__ - INFO - [MainThread] - --- __main__: Script execution finished (Agent Worker mode). ---
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:17:20,234 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:17:20,234 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:17:20,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:17:20,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:17:20,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:17:20,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:17:20,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:17:20,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:17:20,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:17:20,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:17:20,260 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:17:20,260 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:17:20,261 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:17:20,261 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:17:20,261 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:17:20,261 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:17:20,261 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:17:20,261 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:17:20,261 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:17:20,374 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:19:00,177 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:19:00,177 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:19:00,177 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:19:00,177 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:19:00,177 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:19:00,177 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:19:00,177 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:19:00,177 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:19:00,827 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:19:00,877 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:19:00,878 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:19:00,878 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:19:00,878 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:19:00,878 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:19:00,879 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:19:07,745 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:19:07,745 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:19:07,745 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:19:07,745 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:19:07,745 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:19:07,745 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:19:07,745 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:19:07,745 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:19:08,107 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 4036 (python.exe). Attempting to terminate.
2025-05-23 15:19:08,123 - __main__ - INFO - [MainThread] - Successfully handled potential process on port 8000 (PID 4036).
2025-05-23 15:19:08,123 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:19:08,191 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:19:08,191 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:19:08,192 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:19:08,192 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:19:08,192 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:19:08,192 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:19:30,976 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:19:30,976 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:19:30,976 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:19:30,977 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:19:30,977 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:19:30,977 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:19:30,978 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:19:30,978 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:19:30,978 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:19:30,982 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:19:30,989 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:19:30,990 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:19:30,990 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:19:30,991 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:19:30,991 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:19:30,992 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:19:30,992 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:19:30,993 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:19:30,999 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:19:31,001 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:19:31,001 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:19:31,001 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:19:31,001 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:19:31,001 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:19:31,002 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:19:31,003 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:19:31,004 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:19:31,110 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:19:57,497 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:19:57,497 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:19:57,497 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:19:57,497 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:19:57,497 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:19:57,497 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:19:57,497 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:19:57,497 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:19:58,126 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:19:58,184 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:19:58,184 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:19:58,184 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:19:58,184 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:19:58,185 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:19:58,185 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:20:04,470 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:20:04,471 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:20:04,474 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:20:04,474 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:20:05,878 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:20:05,893 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_o9JYXV5a9YJb
2025-05-23 15:20:05,999 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:20:06,000 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:20:06,137 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_cMgEZKGcmqxu
2025-05-23 15:20:06,141 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins... (Checking Environment Variables First)
2025-05-23 15:20:06,143 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required environment variables are set. Proceeding with plugin initialization.
2025-05-23 15:20:06,147 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-23 15:20:06,235 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-23 15:20:06,235 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 15:20:06,360 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 15:20:06,361 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Wrapping OpenAI STT plugin with StreamAdapter for streaming...
2025-05-23 15:20:06,362 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: StreamAdapter.__init__() takes 1 positional argument but 3 were given
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1166, in entrypoint
    stt_plugin = StreamAdapter(stt_plugin_raw, vad_plugin) # Pass both args
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: StreamAdapter.__init__() takes 1 positional argument but 3 were given
2025-05-23 15:20:06,365 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1166, in entrypoint
    stt_plugin = StreamAdapter(stt_plugin_raw, vad_plugin) # Pass both args
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: StreamAdapter.__init__() takes 1 positional argument but 3 were given

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1181, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: StreamAdapter.__init__() takes 1 positional argument but 3 were given
2025-05-23 15:24:14,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:24:14,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:24:14,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:24:14,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:24:14,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:24:14,656 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:24:14,656 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:24:14,656 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:24:15,294 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:24:15,395 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:24:15,395 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:24:15,396 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:24:15,396 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:24:15,396 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:24:15,396 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:24:27,676 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:24:27,691 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:24:27,691 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:24:27,691 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:24:27,691 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:24:27,691 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:24:27,691 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:24:27,691 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:24:27,691 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:24:27,691 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:24:27,691 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:27,691 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:27,705 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:27,705 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:27,706 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:27,707 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:27,707 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:27,707 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:27,710 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:27,710 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:27,717 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:27,717 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:27,717 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:27,718 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:27,718 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:27,718 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:27,719 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:24:27,819 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:24:35,382 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:24:35,382 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:24:35,382 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:24:35,382 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:24:35,876 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:24:35,896 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_Sk6GewETfV9d
2025-05-23 15:24:35,979 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:24:35,981 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:24:36,186 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_YJokoLJe2hHr
2025-05-23 15:24:36,187 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins... (Checking Environment Variables First)
2025-05-23 15:24:36,188 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required environment variables are set. Proceeding with plugin initialization.
2025-05-23 15:24:36,188 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-23 15:24:36,239 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-23 15:24:36,240 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 15:24:36,362 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 15:24:36,362 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Wrapping OpenAI STT plugin with StreamAdapter for streaming...
2025-05-23 15:24:36,362 - __main__ - CRITICAL - [job_thread_runner] - !!! [AgentEntry] CRITICAL - Error initializing one or more plugins: StreamAdapter.__init__() takes 1 positional argument but 3 were given
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1180, in entrypoint
    stt_plugin = StreamAdapter(stt_plugin_raw, vad_plugin) # Pass both args
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: StreamAdapter.__init__() takes 1 positional argument but 3 were given
2025-05-23 15:24:36,364 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1180, in entrypoint
    stt_plugin = StreamAdapter(stt_plugin_raw, vad_plugin) # Pass both args
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: StreamAdapter.__init__() takes 1 positional argument but 3 were given

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\ipc\proc_client.py", line 86, in run
    loop.run_until_complete(self._task)
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 640, in run_until_complete
    self.run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 607, in run_forever
    self._run_once()
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1922, in _run_once
    handle._run()
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\aio\debug.py", line 16, in instrumented
    val = _run(self)
          ^^^^^^^^^^
  [Previous line repeated 7 more times]
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1195, in entrypoint
    sys.exit(f"Error initializing plugins: {e_plugins}")
SystemExit: Error initializing plugins: StreamAdapter.__init__() takes 1 positional argument but 3 were given
2025-05-23 15:28:14,488 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:28:14,488 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:28:14,488 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:28:14,488 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:28:14,488 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:28:14,488 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:28:14,503 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:28:14,503 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:28:15,312 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:28:15,366 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:28:15,367 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:28:15,367 - groq - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:28:15,368 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:28:15,368 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:28:15,368 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:28:30,383 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:28:30,383 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:28:30,383 - __main__ - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:28:30,383 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:28:30,383 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:28:30,383 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:28:30,398 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:28:30,398 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:28:30,398 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:28:30,398 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:28:30,398 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:30,398 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:30,412 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:30,412 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:30,413 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:30,413 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:30,414 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:30,415 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:30,419 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:28:30,519 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:28:38,480 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:28:38,480 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:28:38,480 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:28:38,480 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 15:28:38,937 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:28:38,953 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_naXFkJzoneDs
2025-05-23 15:28:39,000 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:28:39,002 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:28:39,177 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_qZJrewjBWh62
2025-05-23 15:28:39,178 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins... (Checking Environment Variables First)
2025-05-23 15:28:39,178 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required environment variables are set. Proceeding with plugin initialization.
2025-05-23 15:28:39,179 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing OpenAI STT plugin...
2025-05-23 15:28:39,230 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin initialized.
2025-05-23 15:28:39,230 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 15:28:39,354 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 15:28:39,355 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Wrapping OpenAI STT plugin with StreamAdapter for streaming...
2025-05-23 15:28:39,355 - __main__ - INFO - [job_thread_runner] - [AgentEntry] OpenAI STT plugin successfully wrapped for streaming.
2025-05-23 15:28:39,355 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 15:28:39,365 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 15:28:39,366 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 15:28:39,366 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 15:28:39,367 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 15:28:39,367 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 15:28:39,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 15:28:39,370 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 15:28:39,370 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 15:28:40,379 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,              ?'
2025-05-23 15:28:40,379 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 15:28:40,380 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Creating AgentSession...
2025-05-23 15:28:40,380 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with OpenAI STT (wrapped with VAD), Groq LLM, and ElevenLabs TTS.
2025-05-23 15:28:40,381 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 15:28:40,382 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 15:28:40,382 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 15:28:40,383 - livekit.agents - WARNING - [job_thread_runner] - VAD is not set. Enabling VAD is recommended when using LLM and STT for more responsive interruption handling.
2025-05-23 15:28:40,384 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 15:28:40,384 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 15:28:40,385 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_naXFkJzoneDs.
2025-05-23 15:28:40,388 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 15:31:59,254 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************E-IA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}} (status_code=401, request_id=req_ddb5289c3331dae732dc582325bba736, body={'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************E-IA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'})
2025-05-23 15:31:59,935 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************E-IA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}} (status_code=401, request_id=req_7cc2b5bbaecac77020fd43e9b76f8e84, body={'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************E-IA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'})
2025-05-23 15:32:02,310 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************E-IA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}} (status_code=401, request_id=req_797406e9cd613a0868b9919da3dcc2ac, body={'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************E-IA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'})
2025-05-23 15:32:04,687 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 117, in recognize
    event = await self._recognize_impl(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\stt.py", line 400, in _recognize_impl
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************E-IA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}} (status_code=401, request_id=req_42fc5039130724f3dba0df052aece8df, body={'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************E-IA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stream_adapter.py", line 124, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stream_adapter.py", line 101, in _recognize
    t_event = await self._wrapped_stt.recognize(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 139, in recognize
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to recognize speech after 4 attempts
2025-05-23 15:32:04,718 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 15:33:22,922 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:33:22,923 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:33:22,923 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:33:22,923 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:33:22,923 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:33:22,924 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:33:22,924 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:33:23,683 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:33:23,779 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:33:23,779 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:33:23,779 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:33:23,779 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:33:33,793 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:33:33,793 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:33:33,793 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:33:33,793 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:33:33,793 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:33:33,793 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:33:33,793 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:33:33,793 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:33:33,793 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:33:33,809 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:33:33,809 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:33:33,814 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:33:33,814 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:33:33,815 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:33:33,815 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:33:33,816 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:33:33,817 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:33:33,820 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:33:33,951 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:33:42,482 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:33:42,483 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:33:42,483 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:33:42,483 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:34:26,645 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:34:26,645 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:34:26,645 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:34:26,645 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:34:26,645 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:34:26,645 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:34:26,645 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:34:27,264 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:34:27,301 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:34:27,301 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:34:27,301 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:34:27,301 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:34:37,287 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:34:37,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:34:37,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:34:37,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:34:37,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:34:37,288 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:34:37,289 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:34:37,289 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:34:37,292 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:34:37,300 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:37,300 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:37,301 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:37,301 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:37,302 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:37,302 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:37,303 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:37,303 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:37,309 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:37,310 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:37,310 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:37,312 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:37,312 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:37,312 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:37,312 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:37,313 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:37,313 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:34:37,400 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:34:42,342 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:34:42,342 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:34:42,342 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:34:42,342 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:34:42,727 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:34:42,745 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_zVPdABSvvbwZ
2025-05-23 15:34:42,846 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:34:42,847 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:34:42,984 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_GNFtxqP59Qwr
2025-05-23 15:34:42,985 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 15:34:42,986 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 15:34:42,987 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 15:34:42,987 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 15:34:42,988 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 15:34:43,037 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 15:34:43,037 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 15:34:43,038 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 15:34:43,038 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 15:34:43,163 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 15:34:43,163 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 15:34:43,165 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 15:34:43,167 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 15:34:43,167 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 15:34:43,168 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 15:34:43,770 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ' ,       '
2025-05-23 15:34:43,770 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 15:34:43,771 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 15:34:43,772 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 15:34:43,773 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 15:34:43,773 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 15:34:43,780 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 15:34:43,780 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 15:34:43,781 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_zVPdABSvvbwZ.
2025-05-23 15:34:43,783 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 15:34:43,785 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 15:34:47,744 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:35:04,019 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:35:05,637 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:35:18,243 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:35:19,326 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=322f4cef1103, body=None)
2025-05-23 15:35:19,666 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=322f4cef1103, body=None)
2025-05-23 15:35:19,673 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=322f4cef1103, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 15:35:23,617 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:35:24,851 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c3cb9957859d, body=None)
2025-05-23 15:35:25,143 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c3cb9957859d, body=None)
2025-05-23 15:35:25,147 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c3cb9957859d, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 15:36:29,156 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:36:29,156 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:36:29,156 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:36:29,156 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:36:29,156 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:36:29,156 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:36:29,156 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:36:29,156 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 15:36:29,172 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 15:36:29,172 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:36:29,210 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:36:29,210 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:36:29,210 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:36:29,210 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:36:36,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:36:36,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:36:36,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:36:36,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:36:36,480 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:36:36,480 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:36:36,480 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:36:36,480 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:36:36,495 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:36:36,506 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:36:36,507 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:36:36,507 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:36:36,508 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:36:36,509 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:36:36,509 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:36:36,510 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:36:36,510 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:36:36,518 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:36:36,519 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:36:36,519 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:36:36,519 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:36:36,520 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:36:36,520 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:36:36,520 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:36:36,521 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:36:36,522 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:36:36,623 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:36:46,657 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:36:46,658 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:36:46,660 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:36:46,661 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:40:17,906 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:40:17,907 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:40:17,907 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:40:17,907 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:40:17,907 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:40:17,908 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:40:17,908 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:40:18,511 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:40:18,552 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:40:18,552 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:40:18,552 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:40:18,552 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:40:48,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:40:48,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:40:48,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:40:48,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:40:48,288 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:40:48,288 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:40:48,288 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:40:48,288 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:40:48,304 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:40:48,304 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:48,304 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:48,314 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:48,314 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:48,315 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:48,315 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:48,316 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:48,317 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:48,320 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:40:48,439 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:40:54,432 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:40:54,432 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:40:54,432 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:40:54,432 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:40:55,001 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:40:55,029 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_vcxxLfD7vaKY
2025-05-23 15:40:55,079 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:40:55,079 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:40:55,309 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_hNQ2vr7UVWwk
2025-05-23 15:40:55,310 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 15:40:55,310 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 15:40:55,312 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 15:40:55,313 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 15:40:55,313 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 15:40:55,364 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 15:40:55,365 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 15:40:55,365 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 15:40:55,365 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 15:40:55,503 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 15:40:55,504 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 15:40:55,504 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 15:40:55,505 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 15:40:55,506 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 15:40:55,506 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 15:40:56,261 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,       '
2025-05-23 15:40:56,261 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 15:40:56,262 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 15:40:56,263 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 15:40:56,263 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 15:40:56,264 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 15:40:56,265 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 15:40:56,266 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 15:40:56,266 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_vcxxLfD7vaKY.
2025-05-23 15:40:56,268 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 15:40:56,270 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 15:40:59,751 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:41:12,062 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:41:39,385 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:43:48,222 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:43:58,661 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:45:29,299 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:45:29,300 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:45:29,300 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:45:29,300 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:45:29,300 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:45:29,301 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:45:29,301 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:45:29,962 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:45:29,997 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:45:29,997 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:45:29,997 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:45:29,997 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:45:43,267 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:45:43,267 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:45:43,267 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:45:43,267 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:45:43,267 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:45:43,283 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 15:45:43,283 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:45:43,283 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:45:43,283 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:45:43,283 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:43,283 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:43,296 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:43,297 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:43,297 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:43,299 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:43,299 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:43,300 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:43,302 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:45:43,402 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:45:52,299 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:45:52,299 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:45:52,299 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:45:52,299 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:45:53,834 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:45:53,851 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_rcFsUTr4uURQ
2025-05-23 15:45:53,905 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:45:53,906 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:45:54,108 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_H4vNsab7EwyT
2025-05-23 15:45:54,108 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 15:45:54,109 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 15:45:54,111 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 15:45:54,111 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 15:45:54,111 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 15:45:54,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 15:45:54,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 15:45:54,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 15:45:54,157 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 15:45:54,276 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 15:45:54,277 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 15:45:54,277 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 15:45:54,280 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 15:45:54,280 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 15:45:54,281 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 15:45:54,895 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,                '
2025-05-23 15:45:54,895 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 15:45:54,895 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 15:45:54,896 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 15:45:54,896 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 15:45:54,896 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 15:45:54,898 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 15:45:54,898 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 15:45:54,898 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_rcFsUTr4uURQ.
2025-05-23 15:45:54,900 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 15:45:54,901 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 15:45:58,957 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:46:09,070 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:46:40,311 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:47:02,425 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:47:07,732 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:47:15,869 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:47:19,081 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:54:10,120 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:54:17,428 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:54:34,799 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:54:46,575 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:54:58,142 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 15:59:40,633 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:59:40,633 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:59:40,633 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:59:40,633 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:59:40,633 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:59:40,633 - __main__ - INFO - [MainThread] - --- main: main.py script execution started ---
2025-05-23 15:59:40,633 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 15:59:40,633 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 15:59:40,689 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:59:40,689 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:59:40,689 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:59:40,689 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 15:59:52,412 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 15:59:52,412 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 15:59:52,412 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 15:59:52,412 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 15:59:52,412 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 15:59:52,412 - __main__ - INFO - [MainThread] - --- main: main.py script execution started ---
2025-05-23 15:59:52,412 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 15:59:52,412 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 15:59:52,427 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 15:59:52,427 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:52,427 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:52,438 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:52,438 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:52,439 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:52,439 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:52,440 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:52,441 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:52,449 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 15:59:52,559 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 15:59:58,957 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:59:58,957 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:59:58,965 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 15:59:58,965 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 15:59:59,377 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 15:59:59,404 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_8f59EGjRopgv
2025-05-23 15:59:59,499 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 15:59:59,500 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 15:59:59,689 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_Fm5s6S2bRL3V
2025-05-23 15:59:59,689 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 15:59:59,690 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 15:59:59,691 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 15:59:59,691 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 15:59:59,692 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-8b-8192')...
2025-05-23 15:59:59,741 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 15:59:59,742 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 15:59:59,742 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 15:59:59,742 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 15:59:59,867 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 15:59:59,868 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 15:59:59,868 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 15:59:59,870 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 15:59:59,871 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 15:59:59,871 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 16:00:00,496 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,                      '
2025-05-23 16:00:00,497 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 16:00:00,497 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 16:00:00,498 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1293, in entrypoint
    assistant_agent_instance = GUIFocusedAssistant()
                               ^^^^^^^^^^^^^^^^^^^^^
TypeError: Agent.__init__() missing 1 required keyword-only argument: 'instructions'
2025-05-23 16:11:57,740 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:11:57,740 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:11:57,740 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:11:57,740 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:11:57,740 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:11:57,740 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:11:57,740 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 16:11:58,387 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 16:11:58,442 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:11:58,442 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:11:58,442 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:11:58,442 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 16:12:10,795 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:12:10,795 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:12:10,795 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:12:10,795 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:12:10,796 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:12:10,796 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:12:10,797 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 16:12:10,797 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:10,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:10,820 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:10,821 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:10,821 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:10,821 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:10,821 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:10,821 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:10,821 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:10,821 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:10,821 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 16:12:10,918 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 16:12:21,400 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:12:21,400 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 16:12:21,400 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:12:21,400 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 16:12:21,998 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 16:12:22,019 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_3aVuWwT67FCX
2025-05-23 16:12:22,115 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:12:22,116 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:12:22,805 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_48rMrZXFDAjE
2025-05-23 16:12:22,805 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:12:22,806 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:12:22,807 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 16:12:22,808 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 16:12:22,808 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-23 16:12:22,856 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 16:12:22,856 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 16:12:22,856 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 16:12:22,857 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 16:12:22,981 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 16:12:22,982 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 16:12:22,982 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 16:12:22,984 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 16:12:22,985 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 16:12:22,985 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 16:12:23,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ',        !'
2025-05-23 16:12:23,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 16:12:23,370 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 16:12:23,370 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 16:12:23,370 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 16:12:23,370 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 16:12:23,372 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 16:12:23,372 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 16:12:23,373 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_3aVuWwT67FCX.
2025-05-23 16:12:23,374 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 16:12:23,375 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 16:12:25,756 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:12:54,680 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:13:03,178 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:16:15,881 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:16:28,034 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:16:29,909 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:16:39,358 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:17:10,683 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:17:12,784 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:17:15,482 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:17:17,113 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:17:29,443 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:17:29,930 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:18:37,555 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:18:43,861 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:18:54,508 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:01,332 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:07,171 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:11,940 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:24,800 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:25,566 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:26,238 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:27,080 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:29,186 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:33,365 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:37,877 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:19:54,978 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:20:03,220 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:20:20,446 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:20:39,635 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:20:40,724 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:20:42,753 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:20:58,716 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:21:03,967 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:21:07,816 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:21:10,848 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:21:12,865 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:21:14,940 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:21:14,991 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama3-70b-8192` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 4945, Requested 1093. Please try again in 380ms. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01jvyc9decfpsaqwkvv493h5m7, body={'message': 'Rate limit reached for model `llama3-70b-8192` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 4945, Requested 1093. Please try again in 380ms. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-05-23 16:21:18,212 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:21:32,360 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:25:29,063 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:30:55,102 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:30:55,103 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:30:55,103 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:30:55,103 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:30:55,103 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:30:55,103 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:30:55,103 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 16:30:55,786 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 16:30:55,853 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:30:55,854 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:30:55,854 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:30:55,854 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 16:31:15,385 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:31:15,385 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:31:15,385 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:31:15,385 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:31:15,385 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:31:15,385 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:31:15,385 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 16:31:15,385 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 16:31:15,385 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 16:31:15,385 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:31:15,385 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:31:15,398 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:31:15,398 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:31:15,399 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:31:15,400 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:31:15,401 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:31:15,401 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:31:15,405 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 16:31:15,528 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 16:31:26,106 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:31:26,106 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 16:31:26,106 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:31:26,106 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 16:32:32,355 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:32:32,355 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:32:32,355 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:32:32,355 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:32:32,356 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:32:32,356 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:32:32,356 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 16:32:32,360 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 16:32:32,360 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 16:32:32,361 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 16:32:32,399 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:32:32,399 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:32:32,399 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:32:32,399 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-23 16:32:51,430 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:32:51,430 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:32:51,430 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:32:51,430 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:32:51,430 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:32:51,432 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:32:51,432 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 16:32:51,432 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 16:32:51,435 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 16:32:51,442 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:51,443 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:51,443 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:51,444 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:51,444 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:51,444 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:51,445 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:51,445 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:51,454 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:51,454 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:51,455 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:51,455 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:51,456 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:51,456 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:51,456 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:51,457 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:51,457 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 16:32:51,551 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 16:32:55,806 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:32:55,806 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 16:32:55,806 - main - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:32:55,806 - main - INFO - [MainThread] - [TokenSvc] Generated token for frontend_user to join 'voice-assistant-room'
2025-05-23 16:32:56,396 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 16:32:56,415 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_ugJD2Vriveqf
2025-05-23 16:32:56,492 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:32:56,494 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:32:56,736 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_2JyVjZs7spnX
2025-05-23 16:32:56,739 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:32:56,741 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:32:56,748 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 16:32:56,750 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 16:32:56,752 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-23 16:32:56,815 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 16:32:56,816 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 16:32:56,816 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 16:32:56,816 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 16:32:56,943 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 16:32:56,944 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 16:32:56,944 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 16:32:56,946 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 16:32:56,946 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 16:32:56,946 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 16:32:57,336 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ' ,       '
2025-05-23 16:32:57,337 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 16:32:57,338 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 16:32:57,339 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 16:32:57,340 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 16:32:57,340 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 16:32:57,344 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 16:32:57,345 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 16:32:57,345 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_ugJD2Vriveqf.
2025-05-23 16:32:57,347 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 16:32:57,349 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 16:33:03,907 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:33:20,348 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:33:32,424 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:40:30,027 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:40:30,027 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:40:30,027 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:40:30,027 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:40:30,027 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:40:30,027 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:40:30,027 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 16:40:30,665 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 16:40:30,722 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:40:30,723 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:40:30,724 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:40:30,724 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:40:30,724 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:40:44,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:40:44,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:40:44,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:40:44,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:40:44,345 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:40:44,345 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:40:44,345 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 16:40:44,345 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 16:40:44,345 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 16:40:44,364 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:40:44,365 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:40:44,365 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:40:44,366 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:40:44,366 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:40:44,367 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:40:44,378 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:40:44,378 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 16:40:44,482 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 16:40:50,036 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:40:50,036 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 16:40:50,036 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:40:50,051 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 16:42:38,407 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:42:38,407 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:42:38,407 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:42:38,407 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:42:38,407 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:42:38,407 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:42:38,407 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 16:42:38,407 - __main__ - WARNING - [MainThread] - Port 8000 is in use by PID 0 (System Idle Process). Attempting to terminate.
2025-05-23 16:42:38,407 - __main__ - ERROR - [MainThread] - Failed to terminate process 0 on port 8000: (pid=0, name='System Idle Process')
2025-05-23 16:42:38,407 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 16:42:38,475 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:42:38,475 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:42:38,475 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:42:38,475 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:42:38,475 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:42:58,137 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 16:42:58,137 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 16:42:58,137 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 16:42:58,137 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 16:42:58,137 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 16:42:58,137 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-23 16:42:58,137 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-23 16:42:58,137 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-23 16:42:58,137 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-23 16:42:58,152 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:42:58,152 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:42:58,159 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:42:58,159 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:42:58,160 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:42:58,161 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:42:58,162 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:42:58,162 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:42:58,170 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:42:58,171 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:42:58,171 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:42:58,171 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:42:58,172 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:42:58,172 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:42:58,172 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:42:58,173 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:42:58,173 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-23 16:42:58,277 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-23 16:43:36,411 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:43:36,411 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 16:43:36,411 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-23 16:43:36,411 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-23 16:43:37,853 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 16:43:37,876 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_jBewxiRVXL9R
2025-05-23 16:43:37,985 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:43:37,986 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:43:38,188 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_kRUc44u44oC9
2025-05-23 16:43:38,189 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:43:38,189 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:43:38,191 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 16:43:38,191 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 16:43:38,191 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-23 16:43:38,240 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 16:43:38,240 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 16:43:38,241 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 16:43:38,241 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 16:43:38,364 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 16:43:38,364 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 16:43:38,365 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 16:43:38,367 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 16:43:38,368 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 16:43:38,369 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 16:43:38,797 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ',              !'
2025-05-23 16:43:38,798 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 16:43:38,798 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 16:43:38,798 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 16:43:38,800 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 16:43:38,800 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 16:43:38,803 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 16:43:38,803 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 16:43:38,803 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_jBewxiRVXL9R.
2025-05-23 16:43:38,805 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 16:43:38,807 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 16:43:42,283 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:44:04,145 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:44:16,091 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:44:32,253 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:44:44,721 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:44:52,144 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:45:09,162 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:45:11,100 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:45:32,301 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:45:33,077 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: detected_unusual_activity (status_code=500, request_id=e4575047bd13, body=None)
2025-05-23 16:45:33,371 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: detected_unusual_activity (status_code=500, request_id=e4575047bd13, body=None)
2025-05-23 16:45:33,374 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: detected_unusual_activity (status_code=500, request_id=e4575047bd13, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:45:37,329 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:45:51,092 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:45:53,860 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:45:54,653 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9a48843045f2, body=None)
2025-05-23 16:45:54,947 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9a48843045f2, body=None)
2025-05-23 16:45:54,949 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9a48843045f2, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:46:01,201 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:46:02,020 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9f660a897708, body=None)
2025-05-23 16:46:02,308 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9f660a897708, body=None)
2025-05-23 16:46:02,313 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9f660a897708, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:47:19,076 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:47:19,948 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=06be41354cb6, body=None)
2025-05-23 16:47:20,228 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=06be41354cb6, body=None)
2025-05-23 16:47:20,230 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=06be41354cb6, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:47:51,388 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 16:47:51,411 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: playground-vsl6-4wvC, Job: AJ_GFLfNjBY8QSe
2025-05-23 16:47:51,487 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:47:51,489 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:47:51,675 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'playground-vsl6-4wvC'. Local Participant SID: PA_gTNZp8szjPt3
2025-05-23 16:47:51,676 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:47:51,677 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:47:51,678 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 16:47:51,679 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 16:47:51,679 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-23 16:47:51,689 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 16:47:51,690 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 16:47:51,690 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 16:47:51,692 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 16:47:51,831 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 16:47:51,833 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 16:47:51,835 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 16:47:51,836 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 16:47:51,837 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 16:47:51,838 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 16:47:52,042 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ',       '
2025-05-23 16:47:52,043 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 16:47:52,043 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 16:47:52,044 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 16:47:52,044 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 16:47:52,045 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 16:47:52,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 16:47:52,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 16:47:52,047 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_GFLfNjBY8QSe.
2025-05-23 16:47:52,049 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 16:47:52,050 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 16:47:58,026 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:47:58,177 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:47:58,809 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6f701a4d96bc, body=None)
2025-05-23 16:47:58,968 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=1e1915099d8f, body=None)
2025-05-23 16:47:59,097 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6f701a4d96bc, body=None)
2025-05-23 16:47:59,100 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6f701a4d96bc, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:47:59,257 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=1e1915099d8f, body=None)
2025-05-23 16:47:59,260 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=1e1915099d8f, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:48:04,054 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:48:04,191 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:48:04,845 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=ecd5a591fa83, body=None)
2025-05-23 16:48:04,964 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=7fce5f768128, body=None)
2025-05-23 16:48:05,129 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=ecd5a591fa83, body=None)
2025-05-23 16:48:05,131 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=ecd5a591fa83, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:48:05,247 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=7fce5f768128, body=None)
2025-05-23 16:48:05,250 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=7fce5f768128, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:48:05,736 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 16:48:08,852 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:48:09,636 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=8f89b9a6d2a6, body=None)
2025-05-23 16:48:09,919 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=8f89b9a6d2a6, body=None)
2025-05-23 16:48:09,923 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=8f89b9a6d2a6, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:48:15,183 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:48:16,055 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4bba470f6edc, body=None)
2025-05-23 16:48:16,351 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4bba470f6edc, body=None)
2025-05-23 16:48:16,353 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4bba470f6edc, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:48:20,501 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:48:21,233 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=e4aa87218c2b, body=None)
2025-05-23 16:48:21,516 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=e4aa87218c2b, body=None)
2025-05-23 16:48:21,525 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=e4aa87218c2b, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:48:27,176 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-23 16:48:27,178 - livekit.agents - DEBUG - [MainThread] - job exiting
2025-05-23 16:48:27,179 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-23 16:48:27,180 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-23 16:49:10,160 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:49:11,185 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=35a71cdfad9c, body=None)
2025-05-23 16:49:11,464 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=35a71cdfad9c, body=None)
2025-05-23 16:49:11,466 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=35a71cdfad9c, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:49:15,144 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:49:15,918 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c821f2444cb1, body=None)
2025-05-23 16:49:16,206 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c821f2444cb1, body=None)
2025-05-23 16:49:16,208 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c821f2444cb1, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:49:17,874 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:49:18,695 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f5fe715813f5, body=None)
2025-05-23 16:49:18,986 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f5fe715813f5, body=None)
2025-05-23 16:49:18,989 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f5fe715813f5, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:49:35,204 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 16:49:45,488 - livekit.agents - INFO - [MainThread] - received job request
2025-05-23 16:49:45,506 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: playground-jDMM-bok2, Job: AJ_KpYZyL4yGqBr
2025-05-23 16:49:45,574 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-23 16:49:45,576 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-23 16:49:45,780 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'playground-jDMM-bok2'. Local Participant SID: PA_UnJpXKR9kDYv
2025-05-23 16:49:45,780 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:49:45,781 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-23 16:49:45,782 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-23 16:49:45,784 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi'.
2025-05-23 16:49:45,784 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-23 16:49:45,794 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-23 16:49:45,794 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-23 16:49:45,796 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized (using default voice for key).
2025-05-23 16:49:45,797 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-23 16:49:45,921 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-23 16:49:45,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-23 16:49:45,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-23 16:49:45,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Created chat_message_list for tests (count: 3).
2025-05-23 16:49:45,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: ChatContext created.
2025-05-23 16:49:45,922 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Attempting llm_plugin.chat(...)
2025-05-23 16:49:46,170 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ',        '
2025-05-23 16:49:46,170 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-23 16:49:46,171 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-23 16:49:46,171 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-23 16:49:46,172 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-23 16:49:46,172 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-23 16:49:46,174 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-23 16:49:46,174 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-23 16:49:46,175 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_KpYZyL4yGqBr.
2025-05-23 16:49:46,176 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-23 16:49:46,177 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-23 16:49:48,056 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:49:48,868 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=1c07005e72af, body=None)
2025-05-23 16:49:49,156 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=1c07005e72af, body=None)
2025-05-23 16:49:49,164 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=1c07005e72af, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:49:57,509 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-23 16:49:57,511 - livekit.agents - DEBUG - [MainThread] - job exiting
2025-05-23 16:49:57,512 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-23 16:49:57,513 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-23 16:49:57,726 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-23 16:49:58,520 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=b208a05e2bee, body=None)
2025-05-23 16:49:58,804 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=b208a05e2bee, body=None)
2025-05-23 16:49:58,807 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=b208a05e2bee, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-23 16:50:01,963 - livekit.agents - DEBUG - [job_thread_runner] - stream closed
2025-05-23 16:50:23,086 - livekit.agents - DEBUG - [job_thread_runner] - shutting down job task
2025-05-23 16:50:23,093 - livekit.agents - DEBUG - [MainThread] - job exiting
2025-05-23 16:50:23,097 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): closing the httpclient ctx
2025-05-23 16:50:23,099 - livekit - WARNING - [Dummy-4] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-05-23 19:13:21,194 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 19:13:21,194 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 19:13:21,194 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 19:13:21,194 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-23 19:13:21,194 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-23 19:13:21,194 - __main__ - INFO - [MainThread] - --- main: main.py script execution started ---
2025-05-23 19:13:21,194 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-23 19:13:21,194 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-23 19:13:21,244 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-23 19:13:21,244 - main - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-23 19:13:21,244 - main - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-23 19:13:21,244 - main - INFO - [MainThread] - MODULE LEVEL: OPENAI_API_KEY IS SET: True
2025-05-24 11:24:59 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:24:59 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:24:59 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:24:59 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:24:59 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:24:59 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:24:59 - __main__ - INFO - [MainThread] - --- __main__: No agent command line argument detected. Starting FastAPI server (Token Server mode). ---
2025-05-24 11:24:59 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-24 11:25:41 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:25:41 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:25:41 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:25:41 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:25:41 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:25:41 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:25:41 - __main__ - INFO - [MainThread] - --- __main__: Agent Worker mode likely detected (args: ['groq.py', 'start']). Running cli.run_app directly. ---
2025-05-24 11:25:41 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-24 11:25:41 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-24 11:25:49 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:25:49 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:25:49 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:25:49 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:25:49 - livekit.agents - INFO - [MainThread] - received job request
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_mFWUhjaE5VPg
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi' and model='nova-2-general'.
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-24 11:25:49 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:25:49 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized.
2025-05-24 11:25:49 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-24 11:25:50 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-24 11:25:50 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-24 11:25:50 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-24 11:25:50 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Calling llm_plugin.chat(...) with test messages.
2025-05-24 11:25:50 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1027, in entrypoint
    llm_test_stream = await llm_plugin.chat(chat_ctx=test_chat_ctx)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-24 11:25:50 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent will not function correctly. No or insufficient text was received from the LLM stream. !!!
2025-05-24 11:25:50 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] Final collected response was: ''
2025-05-24 11:27:50 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:27:50 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:27:50 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:27:50 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:27:50 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:27:50 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:27:50 - __main__ - INFO - [MainThread] - --- __main__: Agent Worker mode likely detected (args: ['groq.py', 'start']). Running cli.run_app directly. ---
2025-05-24 11:27:50 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-24 11:27:50 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-24 11:28:01 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:28:01 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:28:01 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:28:01 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:28:02 - livekit.agents - INFO - [MainThread] - received job request
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_SgjjNHvfBQbj
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi' and model='nova-2-general'.
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized.
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-24 11:28:02 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:28:02 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Calling llm_plugin.chat(...) with test messages.
2025-05-24 11:28:02 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:28:03 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,       '
2025-05-24 11:28:03 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-24 11:28:03 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-24 11:28:03 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistantConfig] __init__ CALLED --- Agent configuration initialized.
2025-05-24 11:28:03 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistantConfig instance created.
2025-05-24 11:28:03 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1127, in entrypoint
    @session.on("user_input_transcribed")
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 172, in decorator
    self.on(event, callback)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 161, in on
    raise ValueError(
ValueError: Cannot register an async callback with `.on()`. Use `asyncio.create_task` within your synchronous callback instead.
2025-05-24 11:30:08 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:30:08 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:30:08 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:30:08 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:30:08 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:30:08 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:30:08 - __main__ - INFO - [MainThread] - --- __main__: No agent command line argument detected. Starting FastAPI server (Token Server mode). ---
2025-05-24 11:30:08 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-24 11:30:19 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:30:19 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:30:19 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:30:19 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:30:19 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:30:19 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:30:19 - __main__ - INFO - [MainThread] - --- __main__: Agent Worker mode likely detected (args: ['groq.py', 'start']). Running cli.run_app directly. ---
2025-05-24 11:30:19 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-24 11:30:19 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-24 11:30:30 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:30:30 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:30:30 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:30:30 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:30:31 - livekit.agents - INFO - [MainThread] - received job request
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_sP9TyUPdaV4N
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi' and model='nova-2-general'.
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-24 11:30:31 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:30:31 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized.
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Calling llm_plugin.chat(...) with test messages.
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: '! ,       '
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistantConfig] __init__ CALLED --- Agent configuration initialized.
2025-05-24 11:30:31 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistantConfig instance created.
2025-05-24 11:30:31 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1127, in entrypoint
    @session.on("user_input_transcribed")
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 172, in decorator
    self.on(event, callback)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 161, in on
    raise ValueError(
ValueError: Cannot register an async callback with `.on()`. Use `asyncio.create_task` within your synchronous callback instead.
2025-05-24 11:32:00 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:32:00 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:32:00 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:32:00 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:32:00 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:32:00 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:32:00 - __main__ - INFO - [MainThread] - --- __main__: Agent Worker mode likely detected (args: ['groq.py', 'start']). Running cli.run_app directly. ---
2025-05-24 11:32:00 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:32:00 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-24 11:32:01 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-24 11:32:06 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:32:06 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:32:06 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:32:06 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:32:30 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:32:30 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:32:30 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:32:30 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:33:34 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:33:34 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:33:34 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:33:34 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:33:34 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:33:34 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:33:34 - __main__ - INFO - [MainThread] - --- __main__: No agent command line argument detected. Starting FastAPI server (Token Server mode). ---
2025-05-24 11:33:34 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-24 11:33:45 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:33:45 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:33:45 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:33:45 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:33:45 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:33:45 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:33:45 - __main__ - INFO - [MainThread] - --- __main__: Agent Worker mode likely detected (args: ['groq.py', 'start']). Running cli.run_app directly. ---
2025-05-24 11:33:45 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:45 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:46 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:46 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:46 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:46 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:46 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:46 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:46 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-24 11:33:46 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-24 11:33:52 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:33:52 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:33:52 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:33:52 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:33:52 - livekit.agents - INFO - [MainThread] - received job request
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_WZyJP8Jv836t
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi' and model='nova-2-general'.
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-24 11:33:52 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:33:52 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized.
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-24 11:33:52 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Calling llm_plugin.chat(...) with test messages.
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test] Final collected response: ',       '
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistantConfig] __init__ CALLED --- Agent configuration initialized.
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistantConfig instance created.
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Connecting to room 'voice-assistant-room'...
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_jhC6QsQWu5XN
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistantConfig...
2025-05-24 11:33:53 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-24 11:33:53 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_WZyJP8Jv836t.
2025-05-24 11:33:53 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-24 11:33:53 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-24 11:33:54 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:55 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:33:55 - __main__ - INFO - [job_thread_runner] - [UserTranscript] Final: True, Text: 'Hello.'
2025-05-24 11:33:55 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:33:55 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 11:33:55 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:55 - __main__ - INFO - [job_thread_runner] - [AgentSpeech] Speech created. Source: generate_reply, User initiated: True
2025-05-24 11:33:55 - livekit - ERROR - [job_thread_runner] - failed to emit event speech_created
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1244, in on_speech_created
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:33:55 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:55 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:56 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=90497131f79d, body=None)
2025-05-24 11:33:57 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=90497131f79d, body=None)
2025-05-24 11:33:57 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=90497131f79d, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-24 11:33:57 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:57 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:58 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:58 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:33:59 - __main__ - INFO - [job_thread_runner] - [UserTranscript] Final: True, Text: 'Hello'
2025-05-24 11:33:59 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:33:59 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 11:33:59 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:59 - __main__ - INFO - [job_thread_runner] - [AgentSpeech] Speech created. Source: generate_reply, User initiated: True
2025-05-24 11:33:59 - livekit - ERROR - [job_thread_runner] - failed to emit event speech_created
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1244, in on_speech_created
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:33:59 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:59 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:33:59 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=5d84352ad438, body=None)
2025-05-24 11:34:00 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=5d84352ad438, body=None)
2025-05-24 11:34:00 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=5d84352ad438, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-24 11:34:00 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:00 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:01 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:02 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:02 - __main__ - INFO - [job_thread_runner] - [UserTranscript] Final: True, Text: 'hello'
2025-05-24 11:34:02 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:02 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 11:34:02 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:02 - __main__ - INFO - [job_thread_runner] - [AgentSpeech] Speech created. Source: generate_reply, User initiated: True
2025-05-24 11:34:02 - livekit - ERROR - [job_thread_runner] - failed to emit event speech_created
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1244, in on_speech_created
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:02 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:02 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:03 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=340ede72a63a, body=None)
2025-05-24 11:34:03 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=340ede72a63a, body=None)
2025-05-24 11:34:03 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=340ede72a63a, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-24 11:34:03 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:03 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:06 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:07 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:07 - __main__ - INFO - [job_thread_runner] - [UserTranscript] Final: True, Text: 'Hello'
2025-05-24 11:34:07 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:07 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 11:34:07 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:07 - __main__ - INFO - [job_thread_runner] - [AgentSpeech] Speech created. Source: generate_reply, User initiated: True
2025-05-24 11:34:07 - livekit - ERROR - [job_thread_runner] - failed to emit event speech_created
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1244, in on_speech_created
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:07 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:07 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:08 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=66f814e6e686, body=None)
2025-05-24 11:34:08 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=66f814e6e686, body=None)
2025-05-24 11:34:08 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=66f814e6e686, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-24 11:34:08 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:08 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:12 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:13 - __main__ - INFO - [job_thread_runner] - [UserTranscript] Final: True, Text: 'hello'
2025-05-24 11:34:13 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:13 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 11:34:13 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:13 - __main__ - INFO - [job_thread_runner] - [AgentSpeech] Speech created. Source: generate_reply, User initiated: True
2025-05-24 11:34:13 - livekit - ERROR - [job_thread_runner] - failed to emit event speech_created
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1244, in on_speech_created
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:13 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:13 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:13 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=295af178d3f9, body=None)
2025-05-24 11:34:14 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=295af178d3f9, body=None)
2025-05-24 11:34:14 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=295af178d3f9, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-24 11:34:14 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:14 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:14 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:15 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:16 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:16 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:17 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:17 - __main__ - INFO - [job_thread_runner] - [UserTranscript] Final: True, Text: 'ok ok ok.'
2025-05-24 11:34:17 - livekit - ERROR - [job_thread_runner] - failed to emit event user_input_transcribed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1210, in on_user_input_transcribed
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:17 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 11:34:17 - __main__ - INFO - [job_thread_runner] - [AgentSpeech] Speech created. Source: generate_reply, User initiated: True
2025-05-24 11:34:17 - livekit - ERROR - [job_thread_runner] - failed to emit event speech_created
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1244, in on_speech_created
    if session.room and session.room.local_participant:
       ^^^^^^^^^^^^
AttributeError: 'AgentSession' object has no attribute 'room'
2025-05-24 11:34:17 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:17 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:17 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=87c26d35238d, body=None)
2025-05-24 11:34:17 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=87c26d35238d, body=None)
2025-05-24 11:34:17 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: voice_id_does_not_exist (status_code=500, request_id=87c26d35238d, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-05-24 11:34:18 - livekit - ERROR - [job_thread_runner] - failed to emit event agent_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1259, in on_agent_state_changed
    logger.info(f"[AgentState] State changed: {event.old_state.name} -> {event.new_state.name}")
                                               ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:34:18 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1185, in on_conversation_item_added
    logger.debug(f"{log_prefix} Received item (Role: {item.role.name}) with no text content.")
                                                      ^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:35:00 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:35:01 - livekit - ERROR - [job_thread_runner] - failed to emit event user_state_changed
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1291, in on_user_state_changed
    logger.info(f"[UserState] User state changed: {event.old_state.name} -> {event.new_state.name}")
                                                   ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'name'
2025-05-24 11:40:18 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:40:18 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:40:18 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:40:18 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:40:18 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:41:57 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:41:57 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:41:57 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:41:57 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:41:57 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:41:57 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:41:57 - __main__ - INFO - [MainThread] - --- __main__: No agent command line argument detected. Starting FastAPI server (Token Server mode). ---
2025-05-24 11:41:57 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-24 11:42:12 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:42:12 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:42:12 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:42:12 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:42:12 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:42:12 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:42:12 - __main__ - INFO - [MainThread] - --- __main__: Agent Worker mode likely detected (args: ['groq.py', 'start']). Running cli.run_app directly. ---
2025-05-24 11:42:12 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-24 11:42:12 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-24 11:42:33 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:42:33 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:42:33 - __main__ - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 11:42:33 - __main__ - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 11:42:33 - livekit.agents - INFO - [MainThread] - received job request
2025-05-24 11:42:33 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_aLyWq4M25buY
2025-05-24 11:42:33 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-24 11:42:33 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin (language='hi')...
2025-05-24 11:42:33 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized with language='hi' and model='nova-2-general'.
2025-05-24 11:42:33 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin with voice_id='yoZ0L0aRdZ6n1JqiCipN'...
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized with voice_id='yoZ0L0aRdZ6n1JqiCipN'.
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-24 11:42:34 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Direct Test: Calling llm_plugin.chat(...) with test messages.
2025-05-24 11:42:34 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 11:42:34 - __main__ - ERROR - [job_thread_runner] - [AgentEntry] LLM plugin direct test FAILED during chat call or stream processing: object LLMStream can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1368, in entrypoint
    llm_test_stream = await llm_plugin.chat(chat_ctx=test_chat_ctx)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object LLMStream can't be used in 'await' expression
2025-05-24 11:42:34 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 11:42:34 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] !!! LLM direct test FAILED. Agent will not function correctly. No or insufficient text was received from the LLM stream. !!!
2025-05-24 11:42:34 - __main__ - CRITICAL - [job_thread_runner] - [AgentEntry] Final collected response was: ''
2025-05-24 11:45:42 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:45:42 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:45:42 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:45:42 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:45:42 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:45:42 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:45:42 - __main__ - INFO - [MainThread] - --- __main__: No agent command line argument detected. Starting FastAPI server (Token Server mode). ---
2025-05-24 11:45:42 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-24 11:45:56 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 11:45:56 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 11:45:56 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 11:45:56 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 11:45:56 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 11:45:56 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 11:45:56 - __main__ - INFO - [MainThread] - --- __main__: Agent Worker mode likely detected (args: ['groq.py', 'start']). Running cli.run_app directly. ---
2025-05-24 11:45:56 - __main__ - CRITICAL - [MainThread] - !!! __main__: CRITICAL ERROR during cli.run_app (Agent Worker): name 'entrypoint' is not defined
Traceback (most recent call last):
  File "C:\Users\vgh\Desktop\voice assistant\backend\groq.py", line 1304, in <module>
    entrypoint_fnc=entrypoint,
                   ^^^^^^^^^^
NameError: name 'entrypoint' is not defined
2025-05-24 12:05:54,583 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 12:05:54,583 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 12:05:54,583 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 12:05:54,583 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 12:05:54,583 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 12:05:54,584 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 12:05:54,585 - __main__ - INFO - [MainThread] - --- __main__: No specific command line argument. Starting FastAPI server (Token Server mode). ---
2025-05-24 12:05:55,212 - __main__ - INFO - [MainThread] - --- __main__: Starting Uvicorn server for FastAPI app ---
2025-05-24 12:05:55,267 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 12:05:55,268 - groq - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 12:05:55,268 - groq - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 12:05:55,268 - groq - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 12:05:55,268 - groq - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 12:06:11,253 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_URL: wss://voice-assistant-ap2c6rap.livekit.cloud
2025-05-24 12:06:11,253 - __main__ - INFO - [MainThread] - MODULE LEVEL: LIVEKIT_API_KEY IS SET: True
2025-05-24 12:06:11,253 - __main__ - INFO - [MainThread] - MODULE LEVEL: DEEPGRAM_API_KEY IS SET: True
2025-05-24 12:06:11,253 - __main__ - INFO - [MainThread] - MODULE LEVEL: GROQ_API_KEY IS SET: True
2025-05-24 12:06:11,253 - __main__ - INFO - [MainThread] - MODULE LEVEL: ELEVENLABS_API_KEY IS SET: True
2025-05-24 12:06:11,254 - __main__ - INFO - [MainThread] - --- __main__: main.py script execution started ---
2025-05-24 12:06:11,254 - __main__ - INFO - [MainThread] - --- __main__: Command line argument 'start' detected. Running cli.run_app directly (Agent Worker mode). ---
2025-05-24 12:06:11,254 - __main__ - INFO - [MainThread] - --- __main__: Calling cli.run_app(worker_options)...
2025-05-24 12:06:11,258 - livekit.agents - INFO - [MainThread] - starting worker
2025-05-24 12:06:11,264 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:11,265 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:11,266 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:11,266 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:11,267 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:11,268 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:11,268 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:11,269 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:11,277 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:11,278 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:11,278 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:11,279 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:11,279 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:11,279 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:11,280 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:11,280 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:11,281 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-05-24 12:06:11,376 - livekit.agents - INFO - [MainThread] - registered worker
2025-05-24 12:06:20,919 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 12:06:20,925 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 12:06:20,931 - groq - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-05-24 12:06:20,933 - groq - INFO - [MainThread] - [TokenSvc] Generated token for identity 'frontend_user' to join room 'voice-assistant-room'
2025-05-24 12:06:21,377 - livekit.agents - INFO - [MainThread] - received job request
2025-05-24 12:06:21,393 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT LOGIC ENTRYPOINT CALLED --- Room: voice-assistant-room, Job: AJ_tpVbHnsp4A8j
2025-05-24 12:06:21,424 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-05-24 12:06:21,425 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-05-24 12:06:21,701 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Successfully connected to room 'voice-assistant-room'. Local Participant SID: PA_sRBc2r35Lp6k
2025-05-24 12:06:21,703 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing plugins...
2025-05-24 12:06:21,703 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Deepgram STT plugin...
2025-05-24 12:06:21,703 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Deepgram STT plugin initialized.
2025-05-24 12:06:21,703 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Groq LLM plugin (model='llama3-70b-8192')...
2025-05-24 12:06:21,754 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Groq LLM plugin initialized.
2025-05-24 12:06:21,755 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing ElevenLabs TTS plugin...
2025-05-24 12:06:21,755 - __main__ - INFO - [job_thread_runner] - [AgentEntry] ElevenLabs TTS plugin initialized.
2025-05-24 12:06:21,756 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Initializing Silero VAD plugin...
2025-05-24 12:06:21,880 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Silero VAD plugin initialized.
2025-05-24 12:06:21,880 - __main__ - INFO - [job_thread_runner] - [AgentEntry] All required plugins initialized successfully.
2025-05-24 12:06:21,880 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly START ---
2025-05-24 12:06:22,257 - __main__ - INFO - [job_thread_runner] - [AgentEntry] LLM Test Final collected response: ',       _OK'
2025-05-24 12:06:22,257 - __main__ - INFO - [job_thread_runner] - [AgentEntry] --- Testing LLM plugin directly END (Successful) ---
2025-05-24 12:06:22,258 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession created with Deepgram STT, Groq LLM, ElevenLabs TTS, and Silero VAD.
2025-05-24 12:06:22,258 - __main__ - INFO - [job_thread_runner] - --- [GUIFocusedAssistant] __init__ CALLED --- Agent initialized.
2025-05-24 12:06:22,259 - __main__ - INFO - [job_thread_runner] - [AgentEntry] GUIFocusedAssistant instance created.
2025-05-24 12:06:22,259 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Starting AgentSession with GUIFocusedAssistant...
2025-05-24 12:06:22,262 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed normally.
2025-05-24 12:06:22,262 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() block exited.
2025-05-24 12:06:22,262 - __main__ - INFO - [job_thread_runner] - [AgentEntry] Agent logic finished/terminated for job AJ_tpVbHnsp4A8j.
2025-05-24 12:06:22,264 - livekit.agents - DEBUG - [job_thread_runner] - http_session(): creating a new httpclient ctx
2025-05-24 12:06:22,265 - livekit.agents - DEBUG - [job_thread_runner] - start reading stream
2025-05-24 12:06:28,113 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:06:28,220 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Hello?'
2025-05-24 12:06:48,761 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='!  ushi ,           ?'
2025-05-24 12:06:48,762 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- '!  ushi ,           ?'
2025-05-24 12:06:53,499 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:06:53,558 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Hello? How can you help me?'
2025-05-24 12:07:09,038 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='Hello! I'm Khushi, your friendly voice assistant. I can help you with a wide range of tasks, such as answering general knowledge questions, providing language translation, and more. What's on your mind, and how can I assist you today?'
2025-05-24 12:07:09,040 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'Hello! I'm Khushi, your friendly voice assistant. I can help you with a wide range of tasks, such as answering general knowledge questions, providing language translation, and more. What's on your mind, and how can I assist you today?'
2025-05-24 12:07:13,852 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:07:13,853 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Yes.'
2025-05-24 12:07:24,147 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='It seems like you're confirming something. Can you please provide more context or clarify what you're confirming? That way, I can better understand and assist you.'
2025-05-24 12:07:24,148 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'It seems like you're confirming something. Can you please provide more context or clarify what you're confirming? That way, I can better understand and assist you.'
2025-05-24 12:07:27,246 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:07:27,937 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:07:28,760 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='You uh,'
2025-05-24 12:07:28,860 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:07:28,871 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='working.'
2025-05-24 12:07:28,896 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:07:28,896 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:07:38,229 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='It seems like you were checking if I'm working or not. Yes, I'm fully functional and ready to assist you with any questions or tasks you may have!'
2025-05-24 12:07:38,232 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'It seems like you were checking if I'm working or not. Yes, I'm fully functional and ready to assist you with any questions or tasks you may have!'
2025-05-24 12:07:40,906 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:07:40,911 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Yes.'
2025-05-24 12:07:41,882 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:07:41,883 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:07:43,150 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:07:43,155 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Yes. You are working. Yes.'
2025-05-24 12:07:56,539 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=',     !  '
2025-05-24 12:07:56,539 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ',     !  '
2025-05-24 12:07:57,922 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:07:57,927 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Wait. Wait. What are you doing?'
2025-05-24 12:08:07,487 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='Sorry about that! I got a bit excited. It seems like we got stuck in a "yes" loop. Let's start fresh! What would you like to talk about or ask? I'm here to help.'
2025-05-24 12:08:07,487 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'Sorry about that! I got a bit excited. It seems like we got stuck in a "yes" loop. Let's start fresh! What would you like to talk about or ask? I'm here to help.'
2025-05-24 12:11:34,714 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:11:34,814 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Hello?'
2025-05-24 12:11:39,992 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text='Hello again! We're starting fresh. What's on your mind? Do you have a'
2025-05-24 12:11:39,993 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'Hello again! We're starting fresh. What's on your mind? Do you have a'
2025-05-24 12:11:40,273 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:11:40,275 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Yes.'
2025-05-24 12:11:41,313 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:11:41,314 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:11:44,119 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:11:44,189 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Yes. We get stuck in a yes loop, but, yeah, now it's fine.'
2025-05-24 12:11:44,954 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:11:44,956 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:11:45,925 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:11:48,990 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:11:49,018 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Now you can continue your uh, uh, we can continue our conversation. Okay?'
2025-05-24 12:12:00,233 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='I'm glad we're past the "yes" loop! Now, let's start fresh. What would you like to talk about or ask? Do you have a specific topic in mind, or would you like some suggestions?'
2025-05-24 12:12:00,234 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'I'm glad we're past the "yes" loop! Now, let's start fresh. What would you like to talk about or ask? Do you have a specific topic in mind, or would you like some suggestions?'
2025-05-24 12:12:05,557 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:12:07,002 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Yes, sir. I have a topic. Uh, please consider'
2025-05-24 12:12:07,190 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:12:07,194 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='a thing called'
2025-05-24 12:12:07,206 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:12:07,207 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:12:08,451 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:12:08,451 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:12:09,517 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:12:10,149 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:12:10,199 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='cricket. K? Cricket.'
2025-05-24 12:12:21,272 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text='Cricket!      '
2025-05-24 12:12:21,272 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'Cricket!      '
2025-05-24 12:12:24,205 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:12:24,248 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Wait a minute. Wait a minute. Wait a minute. Yeah. Do you trying to speak in in the right'
2025-05-24 12:12:32,917 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='I think I got a bit carried away with the Hindi response! I'll stick to English from now on. So, you wanted to talk about cricket?'
2025-05-24 12:12:32,919 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'I think I got a bit carried away with the Hindi response! I'll stick to English from now on. So, you wanted to talk about cricket?'
2025-05-24 12:12:42,767 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:12:42,772 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Everything is fine. Everything is fine. Everything is fine.'
2025-05-24 12:12:53,707 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='I'm glad to hear that everything is fine! It seems like we had a few hiccups in our conversation, but we're back on track now. So, about cricket... what would you like to know or discuss?'
2025-05-24 12:12:53,709 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'I'm glad to hear that everything is fine! It seems like we had a few hiccups in our conversation, but we're back on track now. So, about cricket... what would you like to know or discuss?'
2025-05-24 12:13:39,810 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:13:39,898 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Okay. Uh, do one thing.'
2025-05-24 12:13:43,039 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='What's the one thing you'd like me to do?'
2025-05-24 12:13:43,039 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'What's the one thing you'd like me to do?'
2025-05-24 12:13:45,198 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:13:45,202 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Uh, don't spell'
2025-05-24 12:13:45,692 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:13:45,694 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:13:46,411 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:13:47,896 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:13:47,994 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='the Hindi work. Okay. Don't spell Hindi.'
2025-05-24 12:13:56,730 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='Got it! I'll refrain from writing Hindi words in the Devanagari script. Instead, I'll transliterate them into Roman English. Let's move forward!'
2025-05-24 12:13:56,731 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'Got it! I'll refrain from writing Hindi words in the Devanagari script. Instead, I'll transliterate them into Roman English. Let's move forward!'
2025-05-24 12:13:58,096 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:13:58,102 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Hello?'
2025-05-24 12:14:00,993 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text='Hello again! We're good to go.'
2025-05-24 12:14:00,995 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'Hello again! We're good to go.'
2025-05-24 12:20:22,603 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:20:22,608 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Hello again.'
2025-05-24 12:20:28,210 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='We're having a nice chat! What's next? Want to talk about cricket or something else?'
2025-05-24 12:20:28,211 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'We're having a nice chat! What's next? Want to talk about cricket or something else?'
2025-05-24 12:20:31,123 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:20:31,125 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Who is the prime minister of India?'
2025-05-24 12:20:35,462 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='The current Prime Minister of India is Narendra Modi.'
2025-05-24 12:20:35,463 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'The current Prime Minister of India is Narendra Modi.'
2025-05-24 12:20:41,685 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:20:42,314 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:20:42,429 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Narendra Modi? Uh, you know Narendra Modi? What is the current'
2025-05-24 12:20:42,942 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:20:42,943 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:20:44,915 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:20:44,921 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='some office?'
2025-05-24 12:20:45,372 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:20:45,374 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:20:45,896 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:20:45,902 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Sarwin?'
2025-05-24 12:20:53,071 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='You're asking about the current President of India? Currently, the President of India is Draupadi Murmu.'
2025-05-24 12:20:53,072 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'You're asking about the current President of India? Currently, the President of India is Draupadi Murmu.'
2025-05-24 12:20:56,677 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:20:56,679 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='No. No. No. No. No. No. I'm asking you to'
2025-05-24 12:20:57,215 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:20:57,216 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:20:59,460 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:20:59,478 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='which term Narendra Modi is serving?'
2025-05-24 12:21:04,929 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='Narendra Modi is currently serving his second term as the Prime Minister of India.'
2025-05-24 12:21:04,930 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'Narendra Modi is currently serving his second term as the Prime Minister of India.'
2025-05-24 12:21:08,604 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:21:08,608 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Okay.'
2025-05-24 12:21:16,978 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='It seems like we've cleared up any confusion! If you have any more questions or topics you'd like to discuss, feel free to ask.'
2025-05-24 12:21:16,979 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'It seems like we've cleared up any confusion! If you have any more questions or topics you'd like to discuss, feel free to ask.'
2025-05-24 12:21:54,049 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:21:54,052 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='It seems like'
2025-05-24 12:21:54,784 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:21:54,785 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:21:54,912 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:21:55,597 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:21:55,638 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='uh, you'
2025-05-24 12:21:56,602 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:21:56,603 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:21:58,751 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:21:58,755 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='have some confusion related to politics.'
2025-05-24 12:21:59,481 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:21:59,482 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:22:00,292 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:22:00,298 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Is it correct?'
2025-05-24 12:22:08,822 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='You're right! I may have had some slight confusion related to politics earlier. Thank you for correcting me and helping me improve!'
2025-05-24 12:22:08,823 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'You're right! I may have had some slight confusion related to politics earlier. Thank you for correcting me and helping me improve!'
2025-05-24 12:22:14,021 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:22:14,022 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='And don't worry. You just relax and'
2025-05-24 12:22:15,265 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text='Thank'
2025-05-24 12:22:15,265 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'Thank'
2025-05-24 12:22:16,157 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:22:16,220 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='answer my question.'
2025-05-24 12:22:22,589 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='I'll do my best to answer your questions accurately and helpfully. Go ahead and ask away!'
2025-05-24 12:22:22,590 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'I'll do my best to answer your questions accurately and helpfully. Go ahead and ask away!'
2025-05-24 12:22:28,462 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:22:28,463 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='K. What is the, uh, working of a sync?'
2025-05-24 12:22:28,928 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text=''
2025-05-24 12:22:28,929 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- ''
2025-05-24 12:22:30,516 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:22:30,629 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Synchronous in Python programming?'
2025-05-24 12:22:32,950 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='True', Text='In Python, synchronous'
2025-05-24 12:22:32,950 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'In Python, synchronous'
2025-05-24 12:22:42,113 - livekit.agents - DEBUG - [job_thread_runner] - received user transcript
2025-05-24 12:22:42,169 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='user', Interrupted='False', Text='Hello?'
2025-05-24 12:22:58,149 - __main__ - INFO - [job_thread_runner] - [AgentSession Event] Conversation Item: Role='assistant', Interrupted='False', Text='I think I got stuck again! To answer your question, in Python, synchronous programming refers to a style of coding where tasks are executed one at a time, in a sequential manner. This means that each task must complete before the next one can start.'
2025-05-24 12:22:58,150 - __main__ - INFO - [job_thread_runner] - --- AGENT'S RESPONSE (logged via conversation_item_added event) --- 'I think I got stuck again! To answer your question, in Python, synchronous programming refers to a style of coding where tasks are executed one at a time, in a sequential manner. This means that each task must complete before the next one can start.'
