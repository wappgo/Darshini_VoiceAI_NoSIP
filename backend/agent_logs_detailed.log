2025-09-01 17:23:59,248 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-01 17:27:24,642 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 17:27:24,647 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 17:27:24,653 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:24,654 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:24,654 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:24,654 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:24,655 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:24,657 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:24,657 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:24,658 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:24,665 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:24,665 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:24,666 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:24,666 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:24,666 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:24,666 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:24,667 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:24,667 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:24,667 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 17:27:24,817 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 17:27:31,437 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:27:31,441 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:27:32,084 - livekit.agents - INFO - [MainThread] - received job request
2025-09-01 17:27:32,104 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-01 17:27:32,173 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:27:32,174 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:27:32,499 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-01 17:27:32,503 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-01 17:27:34,366 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-01 17:27:34,366 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:27:34,675 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42j7855e3fsc78rwsf74rdn, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 17:27:36,712 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42j7a4te6napm2daq0v55wd, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 17:27:38,728 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42j7c3vext9jgqhj34ee1yt, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 17:27:40,092 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:27:41,256 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Why not tell it any'
2025-09-01 17:27:41,257 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:27:41,310 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42j7emge3y9dj7p19pcnafn, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 17:27:43,366 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42j7gmne41td70ycex0cjv5, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 17:27:45,390 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42j7jkte73taheyarwcq7y8, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 17:27:47,450 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42j7mmaeyfre54xj3kw7h7f, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 17:27:47,452 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42j7mmaeyfre54xj3kw7h7f, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 84, in _inference_task
    async for chunk in llm_node:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 465, in llm_node
    async for chunk in stream:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-09-01 17:28:13,570 - livekit.agents - INFO - [MainThread] - draining worker
2025-09-01 17:28:17,452 - livekit.agents - WARNING - [MainThread] - exiting forcefully
2025-09-01 17:28:20,359 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 17:28:20,364 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 17:28:20,370 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:20,371 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:20,371 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:20,371 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:20,372 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:20,372 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:20,373 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:20,373 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:20,381 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:20,382 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:20,382 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:20,383 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:20,383 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:20,383 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:20,384 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:20,384 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:20,385 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 17:28:20,509 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 17:28:25,536 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:28:25,538 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:28:33,302 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-01 17:28:33,307 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-01 17:28:36,079 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:28:36,086 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:28:46,282 - livekit.agents - INFO - [MainThread] - draining worker
2025-09-01 17:28:46,282 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-09-01 17:28:49,683 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 17:28:49,687 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 17:28:49,695 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:49,696 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:49,696 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:49,697 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:49,697 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:49,697 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:49,699 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:49,699 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:28:49,706 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:49,706 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:49,706 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:49,707 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:49,707 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:49,707 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:49,707 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:49,708 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:28:49,709 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 17:28:49,804 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 17:28:52,960 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:28:52,961 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:29:46,314 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-01 17:29:46,319 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-01 17:29:54,697 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 17:29:54,701 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 17:29:54,710 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:29:54,711 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:29:54,711 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:29:54,712 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:29:54,712 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:29:54,713 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:29:54,713 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:29:54,714 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:29:54,721 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:29:54,722 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:29:54,722 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:29:54,722 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:29:54,723 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:29:54,723 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:29:54,723 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:29:54,724 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:29:54,725 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 17:29:54,842 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 17:30:02,238 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:30:02,242 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 17:30:02,881 - livekit.agents - INFO - [MainThread] - received job request
2025-09-01 17:30:02,902 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-01 17:30:02,933 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 17:30:02,934 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 17:30:03,362 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-01 17:30:03,365 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-01 17:30:05,632 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-01 17:30:05,633 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:12,126 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello. How can I help you today? Is there something I can assist you with or would you like to chat?'
2025-09-01 17:30:12,127 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:23,117 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Oh, can you help me?'
2025-09-01 17:30:23,117 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:30,795 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'd be happy to help you with anything I can. What's going on? Do you have a problem or question about something specific?'
2025-09-01 17:30:30,796 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:34,425 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Of course.'
2025-09-01 17:30:34,426 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:42,027 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems like you're a bit hesitant to share what's on your mind. Don't worry, I'm all ears and here to listen. Please feel free to'
2025-09-01 17:30:42,027 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:44,267 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Do you do you hear what I just said?'
2025-09-01 17:30:44,267 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:44,378 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'To you?'
2025-09-01 17:30:44,378 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:44,387 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:51,467 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I think I see what's going on here. You're testing my listening skills, and I'm happy to report that I did hear what you just'
2025-09-01 17:30:51,467 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:53,356 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I'll just say'
2025-09-01 17:30:53,357 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:53,967 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:54,225 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'fuck.'
2025-09-01 17:30:54,226 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:54,809 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Off.'
2025-09-01 17:30:54,809 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:54,821 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:30:59,283 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems like you're expressing a bit of frustration. Is everything okay?'
2025-09-01 17:30:59,284 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:02,287 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'No. No. No. No. No. Just tell me what I'm just saying to you.'
2025-09-01 17:31:02,288 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:05,357 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'You just said "fuck" and then "off".'
2025-09-01 17:31:05,357 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:19,087 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Just just, uh, just say it again.'
2025-09-01 17:31:19,087 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:22,046 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'You said "fuck" and then "off".'
2025-09-01 17:31:22,046 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:28,464 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Just say it again.'
2025-09-01 17:31:28,464 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:31,407 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'You said "fuck" and then "off".'
2025-09-01 17:31:31,407 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:35,017 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. Say it and at least'
2025-09-01 17:31:35,017 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:37,845 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'You said "fuck" and then "off".'
2025-09-01 17:31:37,845 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:31:40,325 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'What does it mean in Hindi?'
2025-09-01 17:31:40,325 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:03,276 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'The word "fuck" is considered a profanity in many languages, including English. In Hindi, a similar profanity is "gaali" or more specifically, "chutiya" or "lund", but please note that these words are also considered offensive and should be used with caution. The word "off" in Hindi can be translated to "band" (बंद). However, I'
2025-09-01 17:32:03,277 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:05,803 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Can you please repeat?'
2025-09-01 17:32:05,804 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:07,223 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'The'
2025-09-01 17:32:07,224 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:13,226 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-01 17:32:13,227 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:16,876 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again. I think we got a bit sidetracked'
2025-09-01 17:32:16,876 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:18,286 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Can you please repeat what you just said?'
2025-09-01 17:32:18,286 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:41,406 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I said the word "fuck" is considered a profanity in many languages, including English, and in Hindi, a similar profanity is "gaali" or more specifically, "chutiya" or "lund", but please note that these words are also considered offensive. The word "off" in Hindi can be translated to "band" (बंद).'
2025-09-01 17:32:41,406 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:44,820 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. So can you'
2025-09-01 17:32:44,820 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:45,392 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'uh,'
2025-09-01 17:32:45,393 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:45,407 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:46,833 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It'
2025-09-01 17:32:46,833 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:48,411 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'tell me a bit more about this?'
2025-09-01 17:32:48,412 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:32:53,936 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I think we were discussing the translation of certain words in Hindi. If you'd like to know'
2025-09-01 17:32:53,937 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:02,955 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hey. It's continue. Continue.'
2025-09-01 17:33:02,956 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:16,956 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems like you want me to continue with our conversation. I'm happy to chat with you, but I want to make sure we're on the same page. What would you like to talk about? Would you like to discuss something in particular or just have a casual conversation?'
2025-09-01 17:33:16,956 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:29,782 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. So now come to the point.'
2025-09-01 17:33:29,784 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:31,094 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'
2025-09-01 17:33:31,095 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:31,769 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-01 17:33:31,771 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:45,936 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. Can you please tell me more about it? What kind of watch was it? What brand, color, or any other distinctive features did it have? This will help me try to assist you in finding it.'
2025-09-01 17:33:45,939 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:51,466 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'So the brand name'
2025-09-01 17:33:51,466 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:53,015 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'That's a'
2025-09-01 17:33:53,015 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:53,455 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'of that watch is Apple, and the color is silver color.'
2025-09-01 17:33:53,456 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:33:53,708 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-01 17:33:53,889 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT brand, model, color, product_type
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-01 17:33:53,890 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-01 17:33:53,938 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: 'I found 2 matching items. Here are the top results: a silver apple Gen 6, a Black Apple Watch Series X.'
2025-09-01 17:34:14,335 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I've searched the database, and it found a few matching items. The top results are: a silver Apple Gen 6 watch,  and a Black Apple Watch Series X. If either of these sound like your watch, I can try to provide more information or help you with the next steps to retrieve it. Would you like me to look into this further?'
2025-09-01 17:34:14,335 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:17,139 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Uh, I want'
2025-09-01 17:34:17,140 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:17,749 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'the image to to'
2025-09-01 17:34:17,749 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:17,768 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:18,902 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'to confirm'
2025-09-01 17:34:18,902 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:18,930 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:19,676 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'that'
2025-09-01 17:34:19,677 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:19,712 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:20,498 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:21,109 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'this is my watch or not.'
2025-09-01 17:34:21,110 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:21,390 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-01 17:34:21,524 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT brand, model, color, product_type
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-01 17:34:21,525 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-01 17:34:21,565 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: 'I found 2 matching items. Here are the top results: a silver apple Gen 6, a Black Apple Watch Series X.'
2025-09-01 17:34:27,087 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I've searched the database again, and it found the same matching items. The top results are: a'
2025-09-01 17:34:27,087 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:28,206 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'No. No. No. No. Yeah.'
2025-09-01 17:34:28,206 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:28,977 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:29,113 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The'
2025-09-01 17:34:29,114 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:29,711 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'but'
2025-09-01 17:34:29,711 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:29,730 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:30,740 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:31,452 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'the item'
2025-09-01 17:34:31,453 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:33,171 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I think'
2025-09-01 17:34:33,172 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:36,690 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'the watch I want The the what'
2025-09-01 17:34:36,691 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:36,782 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11211, Requested 1273. Please try again in 2.417s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jm4brft3tdy18730te17t, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11211, Requested 1273. Please try again in 2.417s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:34:36,809 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'the watch I've lost it.'
2025-09-01 17:34:36,809 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:36,829 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:36,870 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11193, Requested 1283. Please try again in 2.378s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jm4ehft3s58bj6vacvdvt, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11193, Requested 1283. Please try again in 2.378s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:34:38,317 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:38,987 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I now I find that'
2025-09-01 17:34:38,987 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:39,050 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 10757, Requested 1302. Please try again in 293.999999ms. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jm6jnfkc86c8zfvxz27cs, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 10757, Requested 1302. Please try again in 293.999999ms. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:34:39,538 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:43,240 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'but I want I also want to see the image too.'
2025-09-01 17:34:43,242 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:49,226 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm a large language model, I don't have the capability to display images. However, I can'
2025-09-01 17:34:49,227 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:49,570 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'No. No. No. No.'
2025-09-01 17:34:49,570 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:50,377 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:54,376 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The the data you are'
2025-09-01 17:34:54,376 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:54,443 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11052, Requested 1373. Please try again in 2.122s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jmnknerev6htp3k5xtkdf, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11052, Requested 1373. Please try again in 2.122s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:34:54,926 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:56,267 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'fetched from the database'
2025-09-01 17:34:56,267 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:34:56,325 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 10675, Requested 1389. Please try again in 318.999999ms. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jmqegfv8t3hqbdcr6q074, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 10675, Requested 1389. Please try again in 318.999999ms. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:34:57,038 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:35:01,168 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'there, uh, you you also find there a image too.'
2025-09-01 17:35:01,169 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:35:01,556 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-01 17:35:01,644 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'So you just give me a URL of that image.'
2025-09-01 17:35:01,644 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:35:01,725 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT brand, model, color, product_type
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-01 17:35:01,725 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-01 17:35:01,730 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11315, Requested 1425. Please try again in 3.7s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jmwqafvktsgqd6eh42e1m, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11315, Requested 1425. Please try again in 3.7s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:35:01,773 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: 'I found 2 matching items. Here are the top results: a silver apple Gen 6, a Black Apple Watch Series X.'
2025-09-01 17:35:01,843 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11292, Requested 1445. Please try again in 3.685s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jmwtyfnaa4c5qeffsfrfc, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 11292, Requested 1445. Please try again in 3.685s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:35:03,792 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 10903, Requested 1425. Please try again in 1.638999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jmyqrfvqbbhsbmphk69xr, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 10903, Requested 1425. Please try again in 1.638999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:35:03,901 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 10881, Requested 1445. Please try again in 1.627999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k42jmyv7fvqvx9py0ysns409, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 12000, Used 10881, Requested 1445. Please try again in 1.627999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-01 17:35:23,536 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I can't provide you with a URL of the image. If you're looking for a visual confirmation of your lost watch, I suggest trying to contact the person or organization that may have found it, or checking with local lost and found services. Is there anything else I can help you with?'
2025-09-01 17:35:23,536 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 17:35:51,282 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I've searched the database again, and it found the same matching items. The top results are: a silver Apple Gen 6 watch and a Black Apple Watch Series X. Unfortunately, I'm a large language model, I don't have the capability to display images. However, I can try to provide you with more information about the watch, such as its description, features, or any other relevant details that might help you confirm if it's the one you lost. Would you like me to try that?'
2025-09-01 17:35:51,284 - livekit - ERROR - [job_thread_runner] - failed to emit event conversation_item_added
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\rtc\event_emitter.py", line 58, in emit
    callback(*callback_args)
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1208, in log_conversation_item
    if item.tool_calls:
       ^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\pydantic\main.py", line 989, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatMessage' object has no attribute 'tool_calls'
2025-09-01 18:08:15,954 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-01 18:08:32,232 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 18:08:32,235 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 18:08:32,242 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:32,242 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:32,243 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:32,244 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:32,244 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:32,244 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:32,245 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:32,245 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:32,253 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:32,253 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:32,254 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:32,254 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:32,254 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:32,254 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:32,255 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:32,255 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:32,256 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 18:08:32,354 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 18:08:45,733 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:08:45,736 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:08:46,189 - livekit.agents - INFO - [MainThread] - received job request
2025-09-01 18:08:46,204 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-01 18:08:46,305 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:08:46,306 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:08:46,693 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-01 18:08:46,695 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-01 18:08:49,690 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-01 18:08:49,956 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42mjscwep6s7y69n18ndxrh, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 18:08:51,990 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42mjvcge60rez000ggfmrb2, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 18:08:54,033 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42mjxcfe24821w4nv1x2m0w, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 18:08:56,070 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42mjzc3e2b8yva5qnes40ca, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})
2025-09-01 18:08:56,072 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 400 - {'error': {'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'}} (status_code=400, request_id=req_01k42mjzc3e2b8yva5qnes40ca, body={'message': 'The model `llama-3.1-70b-versatile` has been decommissioned and is no longer supported. Please refer to https://console.groq.com/docs/deprecations for a recommendation on which model to use instead.', 'type': 'invalid_request_error', 'code': 'model_decommissioned'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 84, in _inference_task
    async for chunk in llm_node:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 465, in llm_node
    async for chunk in stream:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-09-01 18:09:31,999 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 18:09:32,003 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 18:09:32,010 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:09:32,010 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:09:32,011 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:09:32,011 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:09:32,011 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:09:32,012 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:09:32,012 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:09:32,013 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:09:32,021 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:09:32,021 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:09:32,021 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:09:32,021 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:09:32,022 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:09:32,022 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:09:32,022 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:09:32,022 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:09:32,023 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 18:09:32,131 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 18:09:33,111 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:09:33,116 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:10:07,849 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-01 18:10:07,854 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-01 18:10:25,282 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 18:10:25,286 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 18:10:25,291 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:25,292 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:25,292 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:25,292 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:25,293 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:25,293 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:25,294 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:25,294 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:25,301 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:25,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:25,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:25,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:25,303 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:25,303 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:25,303 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:25,304 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:25,305 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 18:10:25,417 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 18:10:36,077 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:10:36,082 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:10:36,514 - livekit.agents - INFO - [MainThread] - received job request
2025-09-01 18:10:36,531 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-01 18:10:36,575 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:10:36,575 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:10:37,041 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-01 18:10:37,044 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-01 18:10:38,793 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-01 18:10:40,168 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: detected_unusual_activity (status_code=500, request_id=852d34736bbd, body=None)
2025-09-01 18:10:40,466 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: detected_unusual_activity (status_code=500, request_id=852d34736bbd, body=None)
2025-09-01 18:10:40,472 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: detected_unusual_activity (status_code=500, request_id=852d34736bbd, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-01 18:10:40,597 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-01 18:10:55,436 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-01 18:11:09,316 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again. It seems like we're having a bit of a slow start to our conversation. Is everything okay? Would you like to talk about something in particular or is there something on your mind that you'd like to discuss? I'm all ears!'
2025-09-01 18:11:12,757 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. Uh, so'
2025-09-01 18:11:13,403 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'uh,'
2025-09-01 18:11:14,935 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my'
2025-09-01 18:11:16,161 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'watch.'
2025-09-01 18:11:27,265 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Oh no, that's frustrating! Can you tell me a bit more about your watch? What brand is it, and what color is the strap or the face? That might help me try to assist you in finding it.'
2025-09-01 18:11:31,115 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. So the brand name is Apple, and the color is silver.'
2025-09-01 18:11:31,318 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-01 18:11:31,458 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT brand, model, color, product_type
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-01 18:11:31,459 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-01 18:11:31,498 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: 'I found 2 matching items. Here are the top results: a silver apple Gen 6, a Black Apple Watch Series X.'
2025-09-01 18:11:48,447 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I've searched the database for lost items matching your description. There are a couple of possible matches: a silver Apple Gen 6 watch and a black Apple Watch Series X. Does either of those sound like it could be your watch? Or would you like me to try to gather more information to narrow down'
2025-09-01 18:11:50,010 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. Okay. Okay. Let's stop.'
2025-09-01 18:11:52,666 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Let's take a break from trying to find your'
2025-09-01 18:11:53,011 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay.'
2025-09-01 18:11:57,856 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Don't say anything. Nothing'
2025-09-01 18:12:00,797 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: '<|python_tag|><|start_header_id|>assistant<|end_header_id|>'
2025-09-01 18:12:01,694 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Don't say anything.'
2025-09-01 18:12:04,236 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: '*I remain silent*'
2025-09-01 18:12:29,201 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'To Nadiqa'
2025-09-01 18:12:39,718 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems like you're trying to address someone or something else. If you're ready to continue our conversation, I'm here to help. Otherwise, I'll remain quiet as you requested earlier.'
2025-09-01 18:12:43,029 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Sing a song.'
2025-09-01 18:12:44,720 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'In English.'
2025-09-01 18:13:12,508 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: '(singing)
"Imagine all the people, living life in peace
You may say I'm a dreamer, but I'm not the only one
I hope someday you'll join us, and the world will be as one

Imagine all the people, living life in peace
You may say I'm a dreamer, but I'm not the only one
I hope someday you'll join us, and the world will live as one"

(I hope you enjoyed that little rendition of John Lennon's "Imagine")'
2025-09-01 18:14:56,927 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Say some'
2025-09-01 18:15:00,477 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'share some abuse. In Hindi.'
2025-09-01 18:15:01,480 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=23e49ef99a4f, body=None)
2025-09-01 18:15:01,773 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=23e49ef99a4f, body=None)
2025-09-01 18:15:01,778 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=23e49ef99a4f, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-01 18:15:01,879 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm not going to share any abusive language. As a friendly and helpful assistant, my purpose is to provide useful and respectful interactions. If you're looking for help with something else or just want to chat, I'm here to assist you.'
2025-09-01 18:15:04,854 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Wait.'
2025-09-01 18:15:05,959 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=34b1e892aae0, body=None)
2025-09-01 18:15:06,238 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=34b1e892aae0, body=None)
2025-09-01 18:15:06,240 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=34b1e892aae0, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-01 18:15:08,176 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm here when you're ready to continue our conversation.'
2025-09-01 18:17:58,576 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:17:58,578 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:42:43,269 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-01 18:44:42,763 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 18:44:42,767 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 18:44:42,775 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:44:42,775 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:44:42,776 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:44:42,776 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:44:42,776 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:44:42,777 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:44:42,777 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:44:42,778 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:44:42,785 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:44:42,786 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:44:42,786 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:44:42,786 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:44:42,787 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:44:42,787 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:44:42,788 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:44:42,788 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:44:42,789 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 18:44:43,745 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 18:44:59,646 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:44:59,654 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 18:45:01,965 - livekit.agents - INFO - [MainThread] - received job request
2025-09-01 18:45:01,987 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-01 18:45:02,039 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 18:45:02,040 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 18:45:03,192 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-01 18:45:03,195 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-01 18:45:09,157 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-01 18:45:09,158 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-01 18:45:10,179 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=d6ea3cd69895, body=None)
2025-09-01 18:45:10,467 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=d6ea3cd69895, body=None)
2025-09-01 18:45:10,469 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=d6ea3cd69895, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-01 18:45:10,565 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello. How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-01 18:45:10,566 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello. How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-01 18:45:25,271 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hi.'
2025-09-01 18:45:25,272 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hi.'
2025-09-01 18:45:26,106 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c384446f6137, body=None)
2025-09-01 18:45:26,391 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c384446f6137, body=None)
2025-09-01 18:45:26,392 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c384446f6137, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-01 18:45:26,485 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It's nice to meet you. Is everything okay? You seem a bit quiet. Would you like to talk about something in particular or just have some company? I'm all ears!'
2025-09-01 18:45:26,486 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It's nice to meet you. Is everything okay? You seem a bit quiet. Would you like to talk about something in particular or just have some company? I'm all ears!'
2025-09-01 18:45:34,335 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yeah. My my watch is lost.'
2025-09-01 18:45:34,337 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yeah. My my watch is lost.'
2025-09-01 18:45:35,174 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=181f53ad8199, body=None)
2025-09-01 18:45:35,455 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=181f53ad8199, body=None)
2025-09-01 18:45:35,457 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=181f53ad8199, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-01 18:45:35,545 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. That can be really frustrating. To help you find it, I'll need to know a bit more information. What was the brand or color of your watch?'
2025-09-01 18:45:35,546 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. That can be really frustrating. To help you find it, I'll need to know a bit more information. What was the brand or color of your watch?'
2025-09-01 18:45:43,935 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The brand name is Apple, and the color is silver.'
2025-09-01 18:45:43,936 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The brand name is Apple, and the color is silver.'
2025-09-01 18:45:46,366 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: '<function=find>'
2025-09-01 18:45:46,366 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:<function=find>'
2025-09-01 19:00:29,243 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-09-01 19:01:11,479 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-01 19:01:23,745 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 19:01:23,749 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 19:01:23,757 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:23,757 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:23,758 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:23,758 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:23,758 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:23,759 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:23,759 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:23,760 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:23,766 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:23,766 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:23,767 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:23,767 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:23,768 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:23,768 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:23,768 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:23,769 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:23,770 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 19:01:24,592 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 19:01:49,282 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 19:01:49,286 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 19:01:53,413 - livekit.agents - INFO - [MainThread] - received job request
2025-09-01 19:01:53,432 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-01 19:01:53,518 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:01:53,519 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:01:54,944 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-01 19:01:54,947 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-01 19:01:56,630 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello.'
2025-09-01 19:01:56,631 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello.'
2025-09-01 19:01:57,991 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=84932e23d9a9, body=None)
2025-09-01 19:01:58,278 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=84932e23d9a9, body=None)
2025-09-01 19:01:58,280 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=84932e23d9a9, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-01 19:01:58,378 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-01 19:01:58,379 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-01 19:08:26,874 - livekit.agents - INFO - [MainThread] - draining worker
2025-09-01 19:08:27,935 - livekit.agents - WARNING - [MainThread] - exiting forcefully
2025-09-01 19:08:32,902 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 19:08:32,906 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 19:08:32,914 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:08:32,915 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:08:32,916 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:08:32,917 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:08:32,917 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:08:32,918 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:08:32,918 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:08:32,918 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:08:32,926 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:08:32,927 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:08:32,927 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:08:32,927 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:08:32,928 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:08:32,928 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:08:32,928 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:08:32,929 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:08:32,929 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 19:08:33,062 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 19:08:54,758 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 19:08:54,761 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 19:09:09,697 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-01 19:09:11,476 - livekit.agents - INFO - [MainThread] - draining worker
2025-09-01 19:09:11,479 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-09-01 19:09:14,469 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-01 19:09:14,473 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-01 19:09:14,483 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:14,483 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:14,484 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:14,484 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:14,485 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:14,485 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:14,486 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:14,486 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:14,496 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:14,497 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:14,498 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:14,499 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:14,499 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:14,500 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:14,500 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:14,500 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:14,501 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-01 19:09:14,625 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-01 19:09:16,063 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 19:09:16,066 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-01 19:09:16,462 - livekit.agents - INFO - [MainThread] - received job request
2025-09-01 19:09:16,484 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-01 19:09:16,519 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-01 19:09:16,520 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-01 19:09:16,993 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-01 19:09:16,997 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-01 19:09:19,191 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello.'
2025-09-01 19:09:19,192 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello.'
2025-09-01 19:09:25,693 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-01 19:09:25,694 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-01 19:09:27,965 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Uh, I lost my watch.'
2025-09-01 19:09:27,966 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Uh, I lost my watch.'
2025-09-01 19:09:39,692 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. That can be really frustrating. Can you tell me a bit more about your watch? What brand is it, and what color is it? That might help me try to find it for you.'
2025-09-01 19:09:39,693 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. That can be really frustrating. Can you tell me a bit more about your watch? What brand is it, and what color is it? That might help me try to find it for you.'
2025-09-01 19:09:45,392 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Um, the color of my watch is silver, and the brand is Apple.'
2025-09-01 19:09:45,393 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Um, the color of my watch is silver, and the brand is Apple.'
2025-09-01 19:09:45,614 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-01 19:09:45,757 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT brand, model, color, product_type
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-01 19:09:45,759 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-01 19:09:45,797 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: 'I found 2 matching items. Here are the top results: a silver apple Gen 6, a Black Apple Watch Series X.'
2025-09-01 19:10:09,374 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I've searched the database, and it looks like there are a couple of possible matches for your lost watch. However, one of them is a black Apple Watch Series X, which doesn't match the silver color you mentioned. The other one is a silver Apple Gen 6, which could be a possible match. Can you tell me more about your watch, like the model or any distinctive features it might have? That might help me narrow down the search.'
2025-09-01 19:10:09,378 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I've searched the database, and it looks like there are a couple of possible matches for your lost watch. However, one of them is a black Apple Watch Series X, which doesn't match the silver color you mentioned. The other one is a silver Apple Gen 6, which could be a possible match. Can you tell me more about your watch, like the model or any distinctive features it might have? That might help me narrow down the search.'
2025-09-02 10:58:23,379 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 10:58:44,387 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 10:58:44,392 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 10:58:44,398 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:44,398 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:44,399 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:44,399 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:44,399 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:44,400 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:44,400 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:44,401 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:44,407 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:44,408 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:44,408 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:44,408 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:44,409 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:44,409 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:44,409 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:44,410 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:44,411 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 10:58:44,551 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 10:58:52,095 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 10:58:52,098 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 10:58:52,535 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 10:58:52,555 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 10:58:52,628 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 10:58:52,629 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 10:58:53,297 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 10:58:53,300 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 10:59:42,350 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello? Hello?'
2025-09-02 10:59:42,351 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello? Hello?'
2025-09-02 10:59:50,129 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! I'm Khushi, your friendly voice assistant. Is there something I can help you with or would you like to chat?'
2025-09-02 10:59:50,130 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! I'm Khushi, your friendly voice assistant. Is there something I can help you with or would you like to chat?'
2025-09-02 10:59:59,412 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'So'
2025-09-02 10:59:59,413 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:So'
2025-09-02 11:00:00,697 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It'
2025-09-02 11:00:00,698 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It'
2025-09-02 11:00:01,875 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'how is the morning today?'
2025-09-02 11:00:01,877 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:how is the morning today?'
2025-09-02 11:00:14,458 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It's lovely to talk about the morning. Although I don't have a physical presence, I'm always ready to chat and help with any questions or topics you'd like to discuss. How about you, how's your morning going so far?'
2025-09-02 11:00:14,459 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It's lovely to talk about the morning. Although I don't have a physical presence, I'm always ready to chat and help with any questions or topics you'd like to discuss. How about you, how's your morning going so far?'
2025-09-02 11:05:38,893 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:05:38,894 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:06:08,302 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:10:53,873 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 11:14:15,804 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 11:14:15,807 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 11:14:15,814 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:14:15,814 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:14:15,815 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:14:15,815 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:14:15,815 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:14:15,816 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:14:15,816 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:14:15,817 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:14:15,823 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:14:15,824 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:14:15,824 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:14:15,824 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:14:15,825 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:14:15,825 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:14:15,825 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:14:15,826 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:14:15,827 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 11:14:15,958 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 11:14:28,412 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:14:28,414 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:14:39,199 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:14:39,201 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:16:29,974 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 11:16:29,978 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 11:17:03,838 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 11:17:03,841 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 11:17:03,849 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:17:03,849 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:17:03,850 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:17:03,850 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:17:03,850 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:17:03,851 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:17:03,852 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:17:03,852 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:17:03,859 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:17:03,859 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:17:03,859 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:17:03,860 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:17:03,860 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:17:03,861 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:17:03,861 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:17:03,862 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:17:03,862 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 11:17:04,026 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 11:17:24,600 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:17:24,604 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:24:02,597 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:24:02,600 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:25:57,687 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 11:26:08,048 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 11:26:08,051 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 11:26:08,058 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:26:08,058 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:26:08,058 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:26:08,059 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:26:08,059 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:26:08,060 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:26:08,060 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:26:08,060 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:26:08,067 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:26:08,067 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:26:08,068 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:26:08,068 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:26:08,068 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:26:08,069 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:26:08,069 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:26:08,069 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:26:08,070 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 11:26:08,207 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 11:26:14,495 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:26:14,497 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:00,630 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:00,633 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:04,537 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:04,539 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:05,421 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:05,424 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:05,963 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:05,965 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:06,107 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:06,109 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:06,298 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:06,300 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:07,062 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:07,064 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:15,865 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:15,866 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:16,582 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:16,583 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:16,912 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:16,913 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:17,097 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:17,100 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:17,468 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:17,470 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:18,164 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:18,166 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:18,394 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:18,396 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:18,628 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:18,630 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:18,822 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:18,824 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:19,099 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:19,101 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:20,046 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:20,048 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:20,323 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:20,324 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:20,558 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:20,560 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:20,802 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:20,803 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:21,051 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:21,053 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:29,951 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 11:31:29,955 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 11:31:32,082 - livekit.agents - INFO - [MainThread] - draining worker
2025-09-02 11:31:32,083 - livekit.agents - INFO - [MainThread] - shutting down worker
2025-09-02 11:31:35,091 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 11:31:35,095 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 11:31:35,103 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:31:35,104 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:31:35,105 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:31:35,105 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:31:35,106 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:31:35,106 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:31:35,106 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:31:35,107 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:31:35,113 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:31:35,114 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:31:35,114 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:31:35,114 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:31:35,115 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:31:35,115 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:31:35,115 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:31:35,116 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:31:35,116 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 11:31:35,261 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 11:31:38,095 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:38,103 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:56,356 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:31:56,359 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:41:33,946 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:41:33,948 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:41:35,403 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 11:41:35,428 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 11:41:35,520 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:41:35,521 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:41:35,922 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 11:41:35,925 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 11:41:41,924 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 11:41:41,925 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 11:41:48,992 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-02 11:41:48,992 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-02 11:41:53,853 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yeah. I lost my phone.'
2025-09-02 11:41:53,854 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yeah. I lost my phone.'
2025-09-02 11:42:04,765 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your phone. That can be really frustrating. To try and help you locate it, can you please provide some more details? What was the brand and color of your phone?'
2025-09-02 11:42:04,768 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your phone. That can be really frustrating. To try and help you locate it, can you please provide some more details? What was the brand and color of your phone?'
2025-09-02 11:42:09,852 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I just know the'
2025-09-02 11:42:09,853 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I just know the'
2025-09-02 11:42:12,692 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'brand of the phone. I don't remember the color. Okay. The brand brand is Xiaomi.'
2025-09-02 11:42:12,692 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:brand of the phone. I don't remember the color. Okay. The brand brand is Xiaomi.'
2025-09-02 11:42:29,382 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Having the brand is a great start. Unfortunately, I need at least two details to search for your lost phone in the database. Can you remember any other details about your phone, such as its color or type (e.g. model number)? That way, I can try to help you find it.'
2025-09-02 11:42:29,382 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Having the brand is a great start. Unfortunately, I need at least two details to search for your lost phone in the database. Can you remember any other details about your phone, such as its color or type (e.g. model number)? That way, I can try to help you find it.'
2025-09-02 11:42:30,972 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay.'
2025-09-02 11:42:30,973 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay.'
2025-09-02 11:42:33,121 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The color'
2025-09-02 11:42:33,121 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The color'
2025-09-02 11:42:35,352 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'is black.'
2025-09-02 11:42:35,352 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:is black.'
2025-09-02 11:42:43,601 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: '<function(find_lost_item {"product_type": "phone", "brand": "Xiaomi", "color": "black"}</function>'
2025-09-02 11:42:43,602 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:<function(find_lost_item {"product_type": "phone", "brand": "Xiaomi", "color": "black"}</function>'
2025-09-02 11:44:13,918 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Did you know information in'
2025-09-02 11:44:13,920 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Did you know information in'
2025-09-02 11:44:13,973 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'database?'
2025-09-02 11:44:13,974 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:database?'
2025-09-02 11:44:15,862 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I've searched the'
2025-09-02 11:44:15,862 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I've searched the'
2025-09-02 11:44:20,987 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Please continue.'
2025-09-02 11:44:20,988 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Please continue.'
2025-09-02 11:44:46,428 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I've searched the database, but it seems I don't have real-time access to external information, including the database. My previous response was an attempt to use the available function to search for the lost item. If you're still having trouble finding your phone, you might want to try contacting Xiaomi support or visiting their website for more information on how to locate a lost device. Is there anything else I can help you with?'
2025-09-02 11:44:46,432 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I've searched the database, but it seems I don't have real-time access to external information, including the database. My previous response was an attempt to use the available function to search for the lost item. If you're still having trouble finding your phone, you might want to try contacting Xiaomi support or visiting their website for more information on how to locate a lost device. Is there anything else I can help you with?'
2025-09-02 11:50:02,053 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 11:50:02,054 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 11:50:15,002 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'That's a bummer! Losing a watch can be really frustrating. To try and help you find it, can you tell me a bit more about your watch? What's the brand, and do you remember the color or any other distinctive features it had?'
2025-09-02 11:50:15,003 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:That's a bummer! Losing a watch can be really frustrating. To try and help you find it, can you tell me a bit more about your watch? What's the brand, and do you remember the color or any other distinctive features it had?'
2025-09-02 11:50:18,344 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The color is'
2025-09-02 11:50:18,346 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The color is'
2025-09-02 11:50:20,811 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'silver and the brand name is'
2025-09-02 11:50:20,814 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:silver and the brand name is'
2025-09-02 11:50:27,912 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'With the brand name and color, I can try to help you find your watch. What's the brand name of your silver watch?'
2025-09-02 11:50:27,916 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:With the brand name and color, I can try to help you find your watch. What's the brand name of your silver watch?'
2025-09-02 11:50:31,827 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Apple.'
2025-09-02 11:50:31,829 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Apple.'
2025-09-02 11:50:34,302 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: '<function=find>'
2025-09-02 11:50:34,303 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:<function=find>'
2025-09-02 11:50:52,352 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'What does it mean function find?'
2025-09-02 11:50:52,353 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:What does it mean function find?'
2025-09-02 11:51:08,254 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I made a mistake earlier. I should have used the "find_lost_item" function instead of "function find". Since you provided the brand (Apple) and color (silver) of your watch, I can try to help you find it. Here's the correct function call:

<function=find>'
2025-09-02 11:51:08,256 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I made a mistake earlier. I should have used the "find_lost_item" function instead of "function find". Since you provided the brand (Apple) and color (silver) of your watch, I can try to help you find it. Here's the correct function call:

<function=find>'
2025-09-02 11:52:22,604 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 11:52:35,729 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 11:52:35,732 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 11:52:35,738 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:35,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:35,739 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:35,740 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:35,740 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:35,740 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:35,741 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:35,741 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:35,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:35,749 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:35,750 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:35,750 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:35,750 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:35,751 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:35,751 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:35,752 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:35,753 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 11:52:35,865 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 11:52:39,533 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:52:39,540 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 11:52:40,201 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 11:52:40,218 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 11:52:40,317 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 11:52:40,321 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 11:52:40,686 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 11:52:40,688 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 11:52:42,814 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 11:52:42,814 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 11:52:49,093 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello. How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-02 11:52:49,094 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello. How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-02 11:52:51,335 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 11:52:51,337 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 11:53:01,581 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. That can be really frustrating. To help you find it, can you please tell me a bit more about the watch? What brand is it, and what color is it?'
2025-09-02 11:53:01,582 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. That can be really frustrating. To help you find it, can you please tell me a bit more about the watch? What brand is it, and what color is it?'
2025-09-02 11:53:05,884 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The brand name is Apple, and the color silver.'
2025-09-02 11:53:05,886 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The brand name is Apple, and the color silver.'
2025-09-02 11:53:06,081 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 11:53:06,275 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT brand, model, color, product_type
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 11:53:06,275 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 11:53:06,313 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: 'I found 2 matching items. Here are the top results: a silver apple Gen 6, a Black Apple Watch Series X.'
2025-09-02 11:53:21,302 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It looks like the search results showed a few possibilities, but one of them is a different color. Let me try to help you narrow it down a bit more. Since your watch is a silver Apple watch, I'll try to search again with a bit more specificity. 

<function=find>'
2025-09-02 11:53:21,303 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It looks like the search results showed a few possibilities, but one of them is a different color. Let me try to help you narrow it down a bit more. Since your watch is a silver Apple watch, I'll try to search again with a bit more specificity. 

<function=find>'
2025-09-02 11:56:25,437 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"ping timeout\"" UnknownReason Resume
2025-09-02 11:56:25,439 - livekit - ERROR - [Dummy-1] - livekit::rtc_engine:716:livekit::rtc_engine - resuming connection... attempt: 0
2025-09-02 11:56:31,008 - livekit - ERROR - [Dummy-2] - livekit::rtc_engine::rtc_session:735:livekit::rtc_engine::rtc_session - Subscriber pc state failed
2025-09-02 11:56:31,009 - livekit - WARNING - [Dummy-2] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2025-09-02 11:56:31,266 - livekit - ERROR - [Dummy-3] - livekit::rtc_engine::rtc_session:735:livekit::rtc_engine::rtc_session - Publisher pc state failed
2025-09-02 11:56:31,267 - livekit - WARNING - [Dummy-3] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2025-09-02 11:56:34,092 - livekit.plugins.deepgram - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 547, in recv_task
    raise APIStatusError(message="deepgram connection closed unexpectedly")
livekit.agents._exceptions.APIStatusError: deepgram connection closed unexpectedly (status_code=-1, request_id=None, body=None)
2025-09-02 11:56:34,131 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 587, in _run
    await tasks_group
livekit.agents._exceptions.APIStatusError: deepgram connection closed unexpectedly (status_code=-1, request_id=None, body=None)
2025-09-02 11:56:34,563 - livekit - ERROR - [Dummy-2] - livekit_api::signal_client::signal_stream:413:livekit_api::signal_client::signal_stream - unhandled websocket message Err(Io(Os { code: 10054, kind: ConnectionReset, message: "An existing connection was forcibly closed by the remote host." }))
2025-09-02 11:56:35,029 - livekit.agents - WARNING - [MainThread] - failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\worker.py", line 680, in _connection_task
    await self._run_ws(ws)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\worker.py", line 761, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\worker.py", line 733, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
2025-09-02 11:56:40,811 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 11:56:40,886 - livekit - ERROR - [Dummy-2] - livekit::rtc_engine::rtc_session:735:livekit::rtc_engine::rtc_session - Publisher pc state failed
2025-09-02 11:56:40,886 - livekit - WARNING - [Dummy-2] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2025-09-02 12:11:55,885 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"ping timeout\"" UnknownReason Resume
2025-09-02 12:11:55,888 - livekit - ERROR - [Dummy-1] - livekit::rtc_engine:716:livekit::rtc_engine - resuming connection... attempt: 0
2025-09-02 12:12:00,218 - livekit - ERROR - [Dummy-4] - livekit::rtc_engine::rtc_session:735:livekit::rtc_engine::rtc_session - Publisher pc state failed
2025-09-02 12:12:00,220 - livekit - WARNING - [Dummy-4] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2025-09-02 12:12:00,458 - livekit - ERROR - [Dummy-4] - livekit::rtc_engine::rtc_session:735:livekit::rtc_engine::rtc_session - Subscriber pc state failed
2025-09-02 12:12:00,458 - livekit - WARNING - [Dummy-4] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "pc_state failed" UnknownReason Resume
2025-09-02 12:12:02,983 - livekit.plugins.deepgram - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 547, in recv_task
    raise APIStatusError(message="deepgram connection closed unexpectedly")
livekit.agents._exceptions.APIStatusError: deepgram connection closed unexpectedly (status_code=-1, request_id=None, body=None)
2025-09-02 12:12:02,984 - livekit.agents - WARNING - [job_thread_runner] - failed to recognize speech, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 587, in _run
    await tasks_group
livekit.agents._exceptions.APIStatusError: deepgram connection closed unexpectedly (status_code=-1, request_id=None, body=None)
2025-09-02 12:12:05,077 - livekit - ERROR - [Dummy-1] - livekit_api::signal_client::signal_stream:413:livekit_api::signal_client::signal_stream - unhandled websocket message Err(Io(Os { code: 10054, kind: ConnectionReset, message: "An existing connection was forcibly closed by the remote host." }))
2025-09-02 12:12:05,153 - livekit.agents - WARNING - [MainThread] - failed to connect to livekit, retrying in 0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\worker.py", line 680, in _connection_task
    await self._run_ws(ws)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\worker.py", line 761, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\worker.py", line 733, in _recv_task
    raise Exception("worker connection closed unexpectedly")
Exception: worker connection closed unexpectedly
2025-09-02 12:12:14,973 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 490, in wait_for
    return fut.result()
           ^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\client.py", line 1412, in throw
    return self._coro.throw(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\client.py", line 1004, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\client.py", line 703, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 548, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 1056, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 1357, in _create_direct_connection
    hosts = await self._resolve_host(host, port, traces=traces)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 995, in _resolve_host
    return await asyncio.shield(resolved_host_task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\stt\stt.py", line 246, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 562, in _run
    ws = await self._connect_ws()
         ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\deepgram\stt.py", line 622, in _connect_ws
    ws = await asyncio.wait_for(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\tasks.py", line 492, in wait_for
    raise exceptions.TimeoutError() from exc
TimeoutError
2025-09-02 12:12:15,701 - livekit.agents - WARNING - [MainThread] - failed to connect to livekit, retrying in 2s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 1357, in _create_direct_connection
    hosts = await self._resolve_host(host, port, traces=traces)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 995, in _resolve_host
    return await asyncio.shield(resolved_host_task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 1026, in _resolve_host_with_throttle
    addrs = await self._resolver.resolve(host, port, family=self._family)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\resolver.py", line 39, in resolve
    infos = await self._loop.getaddrinfo(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 867, in getaddrinfo
    return await self.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\vgh\AppData\Local\Programs\Python\Python311\Lib\socket.py", line 962, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\worker.py", line 645, in _connection_task
    ws = await self._http_session.ws_connect(
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\client.py", line 1004, in _ws_connect
    resp = await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\client.py", line 703, in _request
    conn = await self._connector.connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 548, in connect
    proto = await self._create_connection(req, traces, timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 1056, in _create_connection
    _, proto = await self._create_direct_connection(req, traces, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\aiohttp\connector.py", line 1363, in _create_direct_connection
    raise ClientConnectorDNSError(req.connection_key, exc) from exc
aiohttp.client_exceptions.ClientConnectorDNSError: Cannot connect to host voice-assistant-ap2c6rap.livekit.cloud:443 ssl:default [getaddrinfo failed]
2025-09-02 12:12:15,702 - livekit - ERROR - [Dummy-4] - livekit::rtc_engine:718:livekit::rtc_engine - resuming connection failed: signal failure: ws failure: IO error: No such host is known. (os error 11001)
2025-09-02 12:12:15,751 - livekit - ERROR - [Dummy-4] - livekit::rtc_engine:716:livekit::rtc_engine - resuming connection... attempt: 1
2025-09-02 12:12:18,886 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 12:12:45,343 - livekit - WARNING - [Dummy-2] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-09-02 12:43:15,503 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 12:43:30,059 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 12:43:30,063 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 12:43:30,069 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:30,070 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:30,070 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:30,071 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:30,071 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:30,071 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:30,072 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:30,072 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:30,079 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:30,080 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:30,080 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:30,080 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:30,081 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:30,081 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:30,081 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:30,082 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:30,082 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 12:43:30,266 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 12:43:36,456 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:36,459 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:36,984 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 12:43:37,004 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 12:43:37,064 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:43:37,065 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:43:37,541 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 12:43:37,544 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 12:43:54,298 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:54,300 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:55,149 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:55,151 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:55,723 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:55,725 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:56,280 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:43:56,283 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:48:07,871 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 12:48:21,159 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 12:48:21,163 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 12:48:21,170 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:48:21,170 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:48:21,171 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:48:21,171 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:48:21,171 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:48:21,172 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:48:21,172 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:48:21,173 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:48:21,180 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:48:21,180 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:48:21,181 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:48:21,181 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:48:21,182 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:48:21,182 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:48:21,182 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:48:21,183 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:48:21,183 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 12:48:21,344 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 12:49:29,114 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:49:29,117 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:49:30,655 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 12:49:30,677 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 12:49:30,762 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 12:49:30,763 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 12:49:31,181 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 12:49:31,185 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 12:49:39,256 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:49:51,596 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:49:54,848 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:49:54,850 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:02,011 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:02,014 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:18,274 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:18,277 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:33,494 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:33,497 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:49,094 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:49,099 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:54:59,511 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:55:04,807 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 12:55:04,809 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:02:27,208 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:03:50,052 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:03:58,767 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 13:03:58,771 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 13:03:58,777 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:03:58,778 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:03:58,778 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:03:58,778 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:03:58,779 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:03:58,779 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:03:58,781 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:03:58,781 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:03:58,788 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:03:58,789 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:03:58,789 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:03:58,789 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:03:58,789 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:03:58,791 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:03:58,791 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:03:58,791 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:03:58,792 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 13:03:58,921 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 13:05:25,584 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:05:25,586 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:05:26,104 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 13:05:26,123 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 13:05:26,203 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:05:26,204 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:05:26,616 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 13:05:26,620 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 13:05:34,019 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello. Hello. I'm'
2025-09-02 13:05:34,019 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello. Hello. I'm'
2025-09-02 13:05:35,973 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 13:05:35,976 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 13:05:48,131 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! It seems like we got off to a bit of a rocky start. How can I assist you today? Is there something on your mind that you'd like to talk about or perhaps a question you have? I'm all ears!'
2025-09-02 13:05:48,133 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! It seems like we got off to a bit of a rocky start. How can I assist you today? Is there something on your mind that you'd like to talk about or perhaps a question you have? I'm all ears!'
2025-09-02 13:05:54,230 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay.'
2025-09-02 13:05:54,231 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay.'
2025-09-02 13:05:55,961 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems'
2025-09-02 13:05:55,962 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It seems'
2025-09-02 13:05:57,982 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my book. I lost my watch.'
2025-09-02 13:05:57,984 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my book. I lost my watch.'
2025-09-02 13:06:04,029 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Oh no, I'm so sorry to hear that you lost your book and your watch! That can be really frustrating. To help you find'
2025-09-02 13:06:04,029 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Oh no, I'm so sorry to hear that you lost your book and your watch! That can be really frustrating. To help you find'
2025-09-02 13:06:05,251 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'No. No. No. No. No.'
2025-09-02 13:06:05,253 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:No. No. No. No. No.'
2025-09-02 13:06:06,982 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Don't get me don't don't get me wrong. I just lost my watch.'
2025-09-02 13:06:06,982 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Don't get me don't don't get me wrong. I just lost my watch.'
2025-09-02 13:06:18,648 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Don't worry, I understand now. You've lost your watch. Can you tell me a bit more about it? What brand is it, and what color is the watch or the strap? That might help me try to assist you further.'
2025-09-02 13:06:18,649 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Don't worry, I understand now. You've lost your watch. Can you tell me a bit more about it? What brand is it, and what color is the watch or the strap? That might help me try to assist you further.'
2025-09-02 13:06:22,636 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. The brand name is Apple, and the color is silver.'
2025-09-02 13:06:22,638 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. The brand name is Apple, and the color is silver.'
2025-09-02 13:06:23,287 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:06:23,489 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: name 'score_calculation' is not defined
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1154, in _find_matching_items_sync
    WHERE ({score_calculation}) >= 2
            ^^^^^^^^^^^^^^^^^
NameError: name 'score_calculation' is not defined
2025-09-02 13:06:23,490 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I encountered an unexpected error while searching for the item."}'
2025-09-02 13:06:28,032 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I encountered an unexpected error while searching for the item.'
2025-09-02 13:06:28,034 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I encountered an unexpected error while searching for the item.'
2025-09-02 13:06:48,930 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. Try that.'
2025-09-02 13:06:48,932 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. Try that.'
2025-09-02 13:06:49,132 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:06:49,323 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: name 'score_calculation' is not defined
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1154, in _find_matching_items_sync
    WHERE ({score_calculation}) >= 2
            ^^^^^^^^^^^^^^^^^
NameError: name 'score_calculation' is not defined
2025-09-02 13:06:49,324 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I encountered an unexpected error while searching for the item."}'
2025-09-02 13:06:53,769 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I encountered an unexpected error while searching for the item.'
2025-09-02 13:06:53,772 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I encountered an unexpected error while searching for the item.'
2025-09-02 13:06:55,267 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Try again.'
2025-09-02 13:06:55,268 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Try again.'
2025-09-02 13:06:55,479 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:06:55,675 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: name 'score_calculation' is not defined
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1154, in _find_matching_items_sync
    WHERE ({score_calculation}) >= 2
            ^^^^^^^^^^^^^^^^^
NameError: name 'score_calculation' is not defined
2025-09-02 13:06:55,677 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I encountered an unexpected error while searching for the item."}'
2025-09-02 13:07:00,157 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I encountered an unexpected error while searching for the item.'
2025-09-02 13:07:00,159 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I encountered an unexpected error while searching for the item.'
2025-09-02 13:10:28,178 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:10:37,641 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 13:10:37,645 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 13:10:37,652 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:10:37,652 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:10:37,653 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:10:37,653 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:10:37,653 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:10:37,654 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:10:37,654 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:10:37,655 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:10:37,662 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:10:37,663 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:10:37,663 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:10:37,663 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:10:37,663 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:10:37,664 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:10:37,664 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:10:37,664 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:10:37,665 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 13:10:37,806 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 13:10:45,021 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:10:45,023 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:13:16,299 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:14:33,094 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 13:14:33,098 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 13:14:33,105 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:33,105 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:33,106 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:33,106 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:33,106 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:33,107 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:33,107 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:33,108 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:33,114 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:33,115 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:33,115 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:33,115 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:33,116 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:33,116 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:33,117 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:33,117 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:33,118 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 13:14:33,254 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 13:14:38,654 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:14:38,657 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:14:39,203 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 13:14:39,226 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 13:14:39,323 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:14:39,324 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:14:39,699 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 13:14:39,702 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 13:14:45,900 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 13:14:45,901 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 13:14:51,831 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! I'm Khushi, your friendly voice assistant. How can I help you today?'
2025-09-02 13:14:51,832 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! I'm Khushi, your friendly voice assistant. How can I help you today?'
2025-09-02 13:14:53,976 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Lost my watch.'
2025-09-02 13:14:53,977 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Lost my watch.'
2025-09-02 13:15:06,140 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. To help you find it, I'll need more information. Can you please tell me the brand and color of your watch? That way, I can try to assist you in locating it.'
2025-09-02 13:15:06,141 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. To help you find it, I'll need more information. Can you please tell me the brand and color of your watch? That way, I can try to assist you in locating it.'
2025-09-02 13:15:12,242 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Color is silver.'
2025-09-02 13:15:12,243 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Color is silver.'
2025-09-02 13:15:15,422 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'That's a good start. We have the color, which is'
2025-09-02 13:15:15,422 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:That's a good start. We have the color, which is'
2025-09-02 13:15:18,445 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'And the brand brand name is.'
2025-09-02 13:15:18,446 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:And the brand brand name is.'
2025-09-02 13:15:22,077 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'So we have the color, which is silver, but you haven't told me'
2025-09-02 13:15:22,079 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:So we have the color, which is silver, but you haven't told me'
2025-09-02 13:15:24,088 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Brand name is Apple.'
2025-09-02 13:15:24,089 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Brand name is Apple.'
2025-09-02 13:15:24,294 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:15:24,459 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 13:15:24,460 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 13:15:24,507 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}]}'
2025-09-02 13:15:35,103 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I found 2 matching items for you. Here they are. 

1. Apple Watch (Gen 6) - silver
2. Apple Watch Series X - Black'
2025-09-02 13:15:35,105 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I found 2 matching items for you. Here they are. 

1. Apple Watch (Gen 6) - silver
2. Apple Watch Series X - Black'
2025-09-02 13:15:44,001 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay.'
2025-09-02 13:15:44,002 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay.'
2025-09-02 13:15:55,251 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems like one of the results isn't an exact match since it's black instead of silver. If you'd like to try searching again or need help with anything else, feel free to ask!'
2025-09-02 13:15:55,252 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It seems like one of the results isn't an exact match since it's black instead of silver. If you'd like to try searching again or need help with anything else, feel free to ask!'
2025-09-02 13:18:55,405 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:18:55,407 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:18:55,409 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:18:55,477 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:18:55,645 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:19:02,950 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:19:02,953 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:19:16,007 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:19:16,010 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:19:49,587 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:19:49,589 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:19:57,774 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 13:19:57,774 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 13:20:05,500 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again! Is there something else I can help you with or would you like to try searching for your lost Apple watch again?'
2025-09-02 13:20:05,501 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again! Is there something else I can help you with or would you like to try searching for your lost Apple watch again?'
2025-09-02 13:20:36,902 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I I lost my watch.'
2025-09-02 13:20:36,904 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I I lost my watch.'
2025-09-02 13:20:48,943 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'You've mentioned that before. To try and find your lost watch, I'll need to know the brand, color, and product type. You previously told me it was an Apple watch and the color is silver. Is that correct?'
2025-09-02 13:20:48,946 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:You've mentioned that before. To try and find your lost watch, I'll need to know the brand, color, and product type. You previously told me it was an Apple watch and the color is silver. Is that correct?'
2025-09-02 13:20:50,190 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello? Yes.'
2025-09-02 13:20:50,191 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello? Yes.'
2025-09-02 13:20:50,470 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:20:50,602 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 13:20:50,602 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 13:20:50,642 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}]}'
2025-09-02 13:21:04,271 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I found 2 matching items for you. Here they are. 

1. Apple Watch (Gen 6) - silver
2. Apple Watch Series X - Black'
2025-09-02 13:21:04,272 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I found 2 matching items for you. Here they are. 

1. Apple Watch (Gen 6) - silver
2. Apple Watch Series X - Black'
2025-09-02 13:21:31,722 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hey. Hey, guys.'
2025-09-02 13:21:31,724 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hey. Hey, guys.'
2025-09-02 13:21:45,679 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Uh,'
2025-09-02 13:21:45,681 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Uh,'
2025-09-02 13:39:40,601 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:40:39,818 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:40:39,823 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 13:40:55,891 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 13:40:55,894 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 13:40:55,900 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:40:55,902 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:40:55,902 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:40:55,902 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:40:55,903 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:40:55,903 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:40:55,904 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:40:55,904 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:40:55,911 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:40:55,912 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:40:55,912 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:40:55,912 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:40:55,913 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:40:55,913 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:40:55,913 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:40:55,914 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:40:55,914 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 13:40:56,031 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 13:41:09,334 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:41:09,336 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:41:22,092 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:41:22,094 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:41:25,896 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:41:25,897 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:43:18,778 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:43:18,782 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 13:43:31,780 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 13:43:31,783 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 13:43:31,792 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:31,792 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:31,792 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:31,793 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:31,793 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:31,794 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:31,794 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:31,795 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:31,801 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:31,801 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:31,802 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:31,802 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:31,803 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:31,803 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:31,804 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:31,804 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:31,805 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 13:43:31,935 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 13:43:48,451 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:43:48,453 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:43:48,904 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 13:43:48,924 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 13:43:48,984 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:43:48,985 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:43:49,368 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 13:43:49,372 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 13:43:51,001 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 13:43:51,003 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 13:43:57,578 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello. How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-02 13:43:57,579 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello. How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-02 13:44:01,834 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 13:44:01,836 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 13:44:15,376 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. That can be really frustrating. To help you find it, I'll need some more information. Can you please tell me the brand and color of your watch? That way, I can try to locate it in the database.'
2025-09-02 13:44:15,377 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. That can be really frustrating. To help you find it, I'll need some more information. Can you please tell me the brand and color of your watch? That way, I can try to locate it in the database.'
2025-09-02 13:44:19,268 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The brand name is Apple and the color is silver.'
2025-09-02 13:44:19,268 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The brand name is Apple and the color is silver.'
2025-09-02 13:44:19,480 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:44:19,619 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: name 'score_parts' is not defined
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1176, in _find_matching_items_sync
    score_calculation = " + ".join(score_parts)
                                   ^^^^^^^^^^^
NameError: name 'score_parts' is not defined
2025-09-02 13:44:19,621 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Returning summary to LLM: 'I encountered an unexpected error while searching for the item.'
2025-09-02 13:44:19,970 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:44:20,109 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: name 'score_parts' is not defined
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1176, in _find_matching_items_sync
    score_calculation = " + ".join(score_parts)
                                   ^^^^^^^^^^^
NameError: name 'score_parts' is not defined
2025-09-02 13:44:20,109 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Returning summary to LLM: 'I encountered an unexpected error while searching for the item.'
2025-09-02 13:44:29,686 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry, but it seems like I encountered an error while searching for your lost Apple watch. Let me try again to see if I can find any information about it.

'
2025-09-02 13:44:29,687 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry, but it seems like I encountered an error while searching for your lost Apple watch. Let me try again to see if I can find any information about it.

'
2025-09-02 13:44:30,094 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:44:30,229 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: name 'score_parts' is not defined
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1176, in _find_matching_items_sync
    score_calculation = " + ".join(score_parts)
                                   ^^^^^^^^^^^
NameError: name 'score_parts' is not defined
2025-09-02 13:44:30,230 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Returning summary to LLM: 'I encountered an unexpected error while searching for the item.'
2025-09-02 13:44:37,126 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm sorry, but I'm having some technical difficulties. Let me try again to help you find your Apple watch.

'
2025-09-02 13:44:37,130 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm sorry, but I'm having some technical difficulties. Let me try again to help you find your Apple watch.

'
2025-09-02 13:44:43,359 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems like the tool is not working properly. Let me try again. 
<function=find>'
2025-09-02 13:44:43,363 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It seems like the tool is not working properly. Let me try again. 
<function=find>'
2025-09-02 13:44:44,314 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:45:06,862 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 13:45:06,862 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 13:45:21,928 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again. I was trying to help you locate your lost Apple watch, but it seems the tool I was using is not working properly. If you could provide more details or context about where you last had your watch, I'd be happy to try and assist you further.'
2025-09-02 13:45:21,930 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again. I was trying to help you locate your lost Apple watch, but it seems the tool I was using is not working properly. If you could provide more details or context about where you last had your watch, I'd be happy to try and assist you further.'
2025-09-02 13:45:28,511 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Dragon.'
2025-09-02 13:45:28,511 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Dragon.'
2025-09-02 13:45:32,837 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'That's an interesting word. Are you thinking about a mythical dragon,'
2025-09-02 13:45:32,838 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:That's an interesting word. Are you thinking about a mythical dragon,'
2025-09-02 13:45:35,588 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'No. No. No. I I've I've said to you try again.'
2025-09-02 13:45:35,588 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:No. No. No. I I've I've said to you try again.'
2025-09-02 13:45:50,969 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Let's start fresh. You were looking for your lost Apple watch, and I was trying to use the tool to help you find it. Since the tool didn't work, can you please remind me of the details you provided earlier? You said it was an Apple watch and the color was silver, right?'
2025-09-02 13:45:50,972 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Let's start fresh. You were looking for your lost Apple watch, and I was trying to use the tool to help you find it. Since the tool didn't work, can you please remind me of the details you provided earlier? You said it was an Apple watch and the color was silver, right?'
2025-09-02 13:45:54,903 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yes.'
2025-09-02 13:45:54,904 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yes.'
2025-09-02 13:45:55,125 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:45:55,258 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: name 'score_parts' is not defined
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1176, in _find_matching_items_sync
NameError: name 'score_parts' is not defined
2025-09-02 13:45:55,269 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Returning summary to LLM: 'I encountered an unexpected error while searching for the item.'
2025-09-02 13:48:33,465 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:48:44,952 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 13:48:44,955 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 13:48:44,962 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:48:44,962 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:48:44,964 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:48:44,964 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:48:44,965 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:48:44,965 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:48:44,966 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:48:44,966 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:48:44,973 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:48:44,973 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:48:44,973 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:48:44,974 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:48:44,974 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:48:44,974 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:48:44,975 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:48:44,975 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:48:44,975 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 13:48:45,091 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 13:48:47,167 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:48:47,175 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:48:57,922 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:48:57,924 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:49:05,442 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:49:05,446 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 13:49:12,771 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:49:12,773 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:52:57,357 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:53:44,247 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:53:44,865 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 9652 (python.exe). Terminating.
2025-09-02 13:53:59,963 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 13:53:59,967 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 13:53:59,974 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:53:59,974 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:53:59,975 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:53:59,975 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:53:59,976 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:53:59,976 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:53:59,977 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:53:59,977 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:53:59,986 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:53:59,986 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:53:59,986 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:53:59,987 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:53:59,987 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:53:59,987 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:53:59,988 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:53:59,988 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:53:59,989 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 13:54:00,097 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 13:54:32,029 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 13:54:35,326 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:54:35,330 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 13:54:36,752 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 13:54:36,768 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 13:54:36,820 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 13:54:36,821 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 13:54:37,257 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 13:54:37,260 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 13:54:39,830 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 13:54:39,831 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 13:54:41,441 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello!'
2025-09-02 13:54:41,441 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello!'
2025-09-02 13:54:47,117 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my words.'
2025-09-02 13:54:47,118 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my words.'
2025-09-02 13:54:53,754 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Don't worry, it can be frustrating when we can't find the right words to express ourselves. Take a deep breath and'
2025-09-02 13:54:53,754 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Don't worry, it can be frustrating when we can't find the right words to express ourselves. Take a deep breath and'
2025-09-02 13:54:58,574 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my botch.'
2025-09-02 13:54:58,575 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my botch.'
2025-09-02 13:55:00,692 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm not sure what you'
2025-09-02 13:55:00,693 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm not sure what you'
2025-09-02 13:55:01,217 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Watch.'
2025-09-02 13:55:01,221 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Watch.'
2025-09-02 13:55:09,142 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'You lost your watch. To help you find it, I'll need more information. Can you please tell me the brand or color of your watch?'
2025-09-02 13:55:09,144 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:You lost your watch. To help you find it, I'll need more information. Can you please tell me the brand or color of your watch?'
2025-09-02 13:55:14,459 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'A friend of mine, what she said'
2025-09-02 13:55:14,461 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:A friend of mine, what she said'
2025-09-02 13:55:18,072 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It sounds like you're sharing something your friend said, but'
2025-09-02 13:55:18,074 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It sounds like you're sharing something your friend said, but'
2025-09-02 13:55:22,428 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'No. No. No. No. No. No. The brand is Apple.'
2025-09-02 13:55:22,429 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:No. No. No. No. No. No. The brand is Apple.'
2025-09-02 13:55:22,526 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'And the color is silver.'
2025-09-02 13:55:22,527 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:And the color is silver.'
2025-09-02 13:55:22,865 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 13:55:23,008 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 13:55:23,009 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 13:55:23,049 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}]}'
2025-09-02 13:55:33,421 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I found 2 matching items for you. Here they are. 

1. Apple Gen 6 Silver Watch 
2. Apple Watch Series X Black'
2025-09-02 13:55:33,422 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I found 2 matching items for you. Here they are. 

1. Apple Gen 6 Silver Watch 
2. Apple Watch Series X Black'
2025-09-02 15:18:28,904 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 15:18:39,477 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 15:18:39,481 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 15:18:39,488 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:39,489 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:39,490 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:39,490 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:39,491 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:39,491 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:39,492 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:39,492 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:39,499 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:39,500 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:39,500 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:39,500 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:39,501 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:39,501 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:39,501 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:39,502 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:39,502 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 15:18:39,600 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 15:18:46,716 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 15:18:46,720 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 15:18:48,213 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 15:18:48,231 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 15:18:48,282 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:18:48,283 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:18:48,712 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 15:18:48,714 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 15:18:51,020 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 15:18:51,021 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 15:18:57,109 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! I'm Khushi, your friendly voice assistant. How can I help you today?'
2025-09-02 15:18:57,109 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! I'm Khushi, your friendly voice assistant. How can I help you today?'
2025-09-02 15:18:59,284 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'No. I lost my watch.'
2025-09-02 15:18:59,285 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:No. I lost my watch.'
2025-09-02 15:19:07,877 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. To help you find it, I'll need more information. Can you please tell me the brand and color of your watch?'
2025-09-02 15:19:07,878 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. To help you find it, I'll need more information. Can you please tell me the brand and color of your watch?'
2025-09-02 15:19:12,087 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'So'
2025-09-02 15:19:12,088 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:So'
2025-09-02 15:19:12,397 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yeah. The brand name is Ehaba, then the color is silver.'
2025-09-02 15:19:12,400 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yeah. The brand name is Ehaba, then the color is silver.'
2025-09-02 15:19:12,677 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Ehaba', color='silver'
2025-09-02 15:19:12,829 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:19:12,829 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Ehaba%', '%silver%', '%watch%', '%Ehaba%', '%silver%')
2025-09-02 15:19:12,870 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 1 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}]}'
2025-09-02 15:19:15,637 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: '{"summary": "I'
2025-09-02 15:19:15,639 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:{"summary": "I'
2025-09-02 15:19:19,158 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Sorry. Sorry. Sorry. The brand name is Apple, and the color is silver.'
2025-09-02 15:19:19,158 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Sorry. Sorry. Sorry. The brand name is Apple, and the color is silver.'
2025-09-02 15:19:19,327 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 15:19:19,457 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:19:19,458 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:19:19,498 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}]}'
2025-09-02 15:21:56,932 - livekit.agents - INFO - [MainThread] - draining worker
2025-09-02 15:36:46,157 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 15:36:55,794 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 15:36:55,797 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 15:36:55,806 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:36:55,806 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:36:55,807 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:36:55,807 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:36:55,807 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:36:55,808 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:36:55,808 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:36:55,809 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:36:55,816 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:36:55,816 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:36:55,816 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:36:55,817 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:36:55,817 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:36:55,817 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:36:55,818 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:36:55,818 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:36:55,818 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 15:36:55,946 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 15:37:04,299 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 15:37:04,304 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 15:37:04,872 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 15:37:04,886 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 15:37:04,988 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:37:04,989 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:37:05,288 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 15:37:05,293 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 15:37:08,158 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 15:37:08,160 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 15:37:14,602 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-02 15:37:14,603 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! How can I assist you today? Is there something I can help you with or would you like to chat?'
2025-09-02 15:37:16,579 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 15:37:16,581 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 15:37:29,831 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. That can be really frustrating. To help you find it, I'll need some more information. Can you please tell me the brand and color of your watch? That way, I can try to assist you in locating it.'
2025-09-02 15:37:29,832 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. That can be really frustrating. To help you find it, I'll need some more information. Can you please tell me the brand and color of your watch? That way, I can try to assist you in locating it.'
2025-09-02 15:37:34,401 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yeah. Sure. My the brand name is Apple, and the color is silver.'
2025-09-02 15:37:34,403 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yeah. Sure. My the brand name is Apple, and the color is silver.'
2025-09-02 15:37:34,640 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:37:34,780 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:37:34,781 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:37:34,814 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:37:34,814 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.job.room.local_participant.publish_data(
          ^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'job'
2025-09-02 15:37:35,306 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:37:35,480 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:37:35,481 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:37:35,530 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:37:35,531 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.job.room.local_participant.publish_data(
          ^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'job'
2025-09-02 15:37:55,021 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Sorry, I made a mistake. Since the product type is not explicitly provided, I should have asked for it instead of assuming. Let me try again. You mentioned the brand (Apple) and color (silver) of your lost item, but I also need to know the product type. Since you said you lost your watch, I'm going to try'
2025-09-02 15:37:55,022 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Sorry, I made a mistake. Since the product type is not explicitly provided, I should have asked for it instead of assuming. Let me try again. You mentioned the brand (Apple) and color (silver) of your lost item, but I also need to know the product type. Since you said you lost your watch, I'm going to try'
2025-09-02 15:37:55,662 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Group type is watch.'
2025-09-02 15:37:55,663 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Group type is watch.'
2025-09-02 15:37:56,492 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:37:56,656 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:37:56,656 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:37:56,701 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:37:56,702 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.job.room.local_participant.publish_data(
          ^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'job'
2025-09-02 15:37:57,042 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:37:57,174 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:37:57,175 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:37:57,214 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:37:57,215 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.job.room.local_participant.publish_data(
          ^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'job'
2025-09-02 15:38:00,218 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Product type is watch.'
2025-09-02 15:38:00,221 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Product type is watch.'
2025-09-02 15:38:00,448 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:38:00,628 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:38:00,628 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:38:00,678 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:38:00,678 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.job.room.local_participant.publish_data(
          ^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'job'
2025-09-02 15:38:08,881 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm sorry, but I'm having trouble accessing the tool. Can you please try again or provide more details about your lost watch?'
2025-09-02 15:38:08,881 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm sorry, but I'm having trouble accessing the tool. Can you please try again or provide more details about your lost watch?'
2025-09-02 15:41:04,520 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 15:41:15,278 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 15:41:15,281 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 15:41:15,289 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:41:15,290 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:41:15,290 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:41:15,290 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:41:15,291 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:41:15,291 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:41:15,291 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:41:15,292 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:41:15,300 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:41:15,301 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:41:15,301 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:41:15,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:41:15,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:41:15,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:41:15,302 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:41:15,303 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:41:15,303 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 15:41:15,418 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 15:43:46,874 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 15:43:46,876 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 15:43:47,389 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 15:43:47,411 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 15:43:47,520 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:43:47,521 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:43:47,859 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 15:43:47,861 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 15:43:49,490 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 15:43:49,493 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 15:43:54,207 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello! How can I assist you today? Is there something I can'
2025-09-02 15:43:54,207 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello! How can I assist you today? Is there something I can'
2025-09-02 15:43:56,102 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I just lost my watch.'
2025-09-02 15:43:56,105 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I just lost my watch.'
2025-09-02 15:44:06,017 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. That can be really frustrating. Can you please tell me more about your watch, like its brand, color, or type? This'
2025-09-02 15:44:06,018 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. That can be really frustrating. Can you please tell me more about your watch, like its brand, color, or type? This'
2025-09-02 15:44:06,705 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yeah. Sure.'
2025-09-02 15:44:06,707 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yeah. Sure.'
2025-09-02 15:44:07,951 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'To'
2025-09-02 15:44:07,952 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:To'
2025-09-02 15:44:10,254 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The brand name is Apple and the color is silver.'
2025-09-02 15:44:10,257 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The brand name is Apple and the color is silver.'
2025-09-02 15:44:10,510 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:44:10,666 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:44:10,667 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:44:10,707 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:44:10,707 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.room.local_participant.publish_data(
          ^^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'room'
2025-09-02 15:44:11,068 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:44:11,215 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:44:11,215 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:44:11,253 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:44:11,254 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.room.local_participant.publish_data(
          ^^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'room'
2025-09-02 15:44:16,362 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry, but I need to know the product type to help you with that. You've'
2025-09-02 15:44:16,365 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry, but I need to know the product type to help you with that. You've'
2025-09-02 15:44:16,928 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. The product'
2025-09-02 15:44:16,930 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. The product'
2025-09-02 15:44:17,285 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:44:17,432 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:44:17,432 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:44:17,469 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:44:17,469 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.room.local_participant.publish_data(
          ^^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'room'
2025-09-02 15:44:19,459 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'the product type is watch.'
2025-09-02 15:44:19,463 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:the product type is watch.'
2025-09-02 15:44:19,675 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] Searching database...
2025-09-02 15:44:19,846 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:44:19,847 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:44:19,884 - __main__ - INFO - [job_thread_runner] - --- [DB Tool] Sending image data directly to frontend.
2025-09-02 15:44:19,885 - livekit.agents - ERROR - [job_thread_runner] - exception occurred while executing tool
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1148, in find_lost_item
    await context.room.local_participant.publish_data(
          ^^^^^^^^^^^^
AttributeError: 'RunContext' object has no attribute 'room'
2025-09-02 15:44:26,959 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm sorry, but I'm having trouble finding your lost item. Can you please try again or provide more information?'
2025-09-02 15:44:26,962 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm sorry, but I'm having trouble finding your lost item. Can you please try again or provide more information?'
2025-09-02 15:45:00,445 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-09-02 15:50:50,782 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 15:51:01,217 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 15:51:01,220 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 15:51:01,226 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:01,227 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:01,227 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:01,228 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:01,228 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:01,228 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:01,229 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:01,229 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:01,239 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:01,239 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:01,239 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:01,240 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:01,240 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:01,240 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:01,241 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:01,241 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:01,242 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 15:51:01,355 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 15:51:33,586 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 15:51:33,589 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 15:51:34,090 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 15:51:34,111 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 15:51:34,149 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 15:51:34,150 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 15:51:34,658 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 15:51:34,661 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 15:51:51,151 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello.'
2025-09-02 15:51:51,152 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello.'
2025-09-02 15:51:54,236 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello. How can I assist you today?'
2025-09-02 15:51:54,236 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello. How can I assist you today?'
2025-09-02 15:51:58,080 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I just lost my watch.'
2025-09-02 15:51:58,082 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I just lost my watch.'
2025-09-02 15:52:11,594 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. Can you please provide me with some more details about it? What type of watch is it (e.g. smartwatch, analog), what's the brand, and what color is it? This will help'
2025-09-02 15:52:11,595 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. Can you please provide me with some more details about it? What type of watch is it (e.g. smartwatch, analog), what's the brand, and what color is it? This will help'
2025-09-02 15:52:11,901 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay.'
2025-09-02 15:52:11,901 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay.'
2025-09-02 15:52:13,885 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'To help you find your lost watch, I need'
2025-09-02 15:52:13,886 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:To help you find your lost watch, I need'
2025-09-02 15:52:18,796 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'So the okay. So the brand name is Apple,'
2025-09-02 15:52:18,796 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:So the okay. So the brand name is Apple,'
2025-09-02 15:52:18,839 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'and the color of the watch is silver.'
2025-09-02 15:52:18,840 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:and the color of the watch is silver.'
2025-09-02 15:52:19,130 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 15:52:19,313 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 15:52:19,314 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 15:52:19,362 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}]}'
2025-09-02 15:52:29,285 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I found 2 matching items for you. Here they are. One is an Apple Gen 6 silver watch and the other is an Apple Watch Series X which is black in color.'
2025-09-02 15:52:29,286 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I found 2 matching items for you. Here they are. One is an Apple Gen 6 silver watch and the other is an Apple Watch Series X which is black in color.'
2025-09-02 15:52:32,121 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. Thank you.'
2025-09-02 15:52:32,121 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. Thank you.'
2025-09-02 15:52:42,615 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'You're welcome. I hope you're able to recover your lost Apple watch. If you need any more help or have any other questions, feel free to ask.'
2025-09-02 15:52:42,616 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:You're welcome. I hope you're able to recover your lost Apple watch. If you need any more help or have any other questions, feel free to ask.'
2025-09-02 16:06:02,376 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:06:02,378 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:06:06,843 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:06:06,845 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:06:10,595 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello. Is there something else I can help you with?'
2025-09-02 16:06:10,596 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello. Is there something else I can help you with?'
2025-09-02 16:06:19,718 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:06:19,719 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:06:30,379 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again. How can I assist you today? Do you have any other questions or concerns, or perhaps you'd like to chat about something in particular? I'm here to listen and help if I can.'
2025-09-02 16:06:30,383 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again. How can I assist you today? Do you have any other questions or concerns, or perhaps you'd like to chat about something in particular? I'm here to listen and help if I can.'
2025-09-02 16:06:32,633 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. I lost my watch.'
2025-09-02 16:06:32,634 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. I lost my watch.'
2025-09-02 16:06:42,036 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Sorry to hear that you lost your watch again. Can you please tell me more about the watch, like its brand, model, and color? This will help me try to find it for you.'
2025-09-02 16:06:42,036 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Sorry to hear that you lost your watch again. Can you please tell me more about the watch, like its brand, model, and color? This will help me try to find it for you.'
2025-09-02 16:06:45,449 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. The brand is Apple and the color'
2025-09-02 16:06:45,451 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. The brand is Apple and the color'
2025-09-02 16:06:45,532 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'silver.'
2025-09-02 16:06:45,533 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:silver.'
2025-09-02 16:06:45,865 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 16:06:46,002 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 16:06:46,002 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 16:06:46,034 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}]}'
2025-09-02 16:06:55,376 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I found 2 matching items for you. Here they are. One is an Apple Gen 6 silver watch and the other is an Apple Watch Series X which is black in color.'
2025-09-02 16:06:55,377 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I found 2 matching items for you. Here they are. One is an Apple Gen 6 silver watch and the other is an Apple Watch Series X which is black in color.'
2025-09-02 16:07:18,986 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello to to message.'
2025-09-02 16:07:18,986 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello to to message.'
2025-09-02 16:07:20,800 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yes.'
2025-09-02 16:07:20,802 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yes.'
2025-09-02 16:07:21,112 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems'
2025-09-02 16:07:21,113 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It seems'
2025-09-02 16:07:26,886 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:07:26,889 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:07:30,371 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems like you were about to say something, but it got cut off. Could you please complete your thought or message? I'm here to listen and help if I can.'
2025-09-02 16:07:30,373 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It seems like you were about to say something, but it got cut off. Could you please complete your thought or message? I'm here to listen and help if I can.'
2025-09-02 16:08:03,429 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 16:08:03,434 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 16:08:08,447 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 16:08:08,451 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 16:08:08,458 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:08:08,458 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:08:08,459 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:08:08,459 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:08:08,460 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:08:08,460 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:08:08,461 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:08:08,461 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:08:08,469 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:08:08,470 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:08:08,470 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:08:08,470 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:08:08,471 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:08:08,471 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:08:08,471 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:08:08,471 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:08:08,472 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 16:08:08,576 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 16:08:13,143 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:08:13,145 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:08:31,124 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:08:31,130 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:09:27,261 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 16:09:27,265 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 16:09:48,658 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 16:09:48,662 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 16:09:48,671 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:48,672 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:48,673 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:48,673 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:48,674 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:48,674 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:48,675 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:48,676 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:48,684 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:48,684 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:48,685 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:48,685 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:48,685 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:48,686 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:48,686 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:48,686 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:48,687 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 16:09:48,791 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 16:09:52,971 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:09:52,973 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:09:53,384 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 16:09:53,405 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 16:09:53,457 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:09:53,458 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:09:53,860 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 16:09:53,863 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 16:09:55,325 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:09:55,326 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:10:01,248 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello. It's nice to meet you. Is there something I can help you with or would you like to chat?'
2025-09-02 16:10:01,249 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello. It's nice to meet you. Is there something I can help you with or would you like to chat?'
2025-09-02 16:10:08,663 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I just lost my watch.'
2025-09-02 16:10:08,664 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I just lost my watch.'
2025-09-02 16:10:16,809 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. That can be really frustrating. Can you tell me a bit more'
2025-09-02 16:10:16,810 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. That can be really frustrating. Can you tell me a bit more'
2025-09-02 16:10:22,445 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. So'
2025-09-02 16:10:22,447 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. So'
2025-09-02 16:10:28,912 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'uh, my the brand, uh, is Apple. And the color is silver.'
2025-09-02 16:10:28,914 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:uh, my the brand, uh, is Apple. And the color is silver.'
2025-09-02 16:10:29,069 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Do you can you find it?'
2025-09-02 16:10:29,070 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Do you can you find it?'
2025-09-02 16:10:29,317 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 16:10:29,460 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 16:10:29,460 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 16:10:29,500 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: 'list' object has no attribute 'image_url'
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1185, in _find_matching_items_sync
    "image_url": results.image_url
                 ^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'image_url'
2025-09-02 16:10:29,502 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I encountered an unexpected error while searching for the item."}'
2025-09-02 16:10:35,760 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm sorry, but I encountered an unexpected error while searching for your Apple watch. If you have'
2025-09-02 16:10:35,763 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm sorry, but I encountered an unexpected error while searching for your Apple watch. If you have'
2025-09-02 16:10:40,050 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Image'
2025-09-02 16:10:40,051 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Image'
2025-09-02 16:10:57,642 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'd be happy to try and help you find your lost Apple watch. Unfortunately, the previous search didn't yield any results due to an error. Can you please provide more details or clarify what you mean by "image"? Are you looking for a way to describe your watch or something else? I'm here to help!'
2025-09-02 16:10:57,644 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'd be happy to try and help you find your lost Apple watch. Unfortunately, the previous search didn't yield any results due to an error. Can you please provide more details or clarify what you mean by "image"? Are you looking for a way to describe your watch or something else? I'm here to help!'
2025-09-02 16:11:07,848 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:11:07,851 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:11:10,907 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:11:10,909 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:11:24,378 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again. I'm still here to help you with your lost Apple watch. If you're ready to proceed, I can try searching for it again. Please let me know if there's anything else you'd like to add or if you have any other questions.'
2025-09-02 16:11:24,379 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again. I'm still here to help you with your lost Apple watch. If you're ready to proceed, I can try searching for it again. Please let me know if there's anything else you'd like to add or if you have any other questions.'
2025-09-02 16:11:27,903 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:11:27,906 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:11:30,500 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:11:30,501 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:11:39,659 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again. I'm here and ready to help. Is there something specific you'd like to talk about or ask regarding your lost Apple watch? I'm listening.'
2025-09-02 16:11:39,660 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again. I'm here and ready to help. Is there something specific you'd like to talk about or ask regarding your lost Apple watch? I'm listening.'
2025-09-02 16:11:45,740 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. Okay. Just, uh, just'
2025-09-02 16:11:45,740 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. Okay. Just, uh, just'
2025-09-02 16:11:45,777 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'uh, okay. So I'll, uh, I'll just lost my phone too.'
2025-09-02 16:11:45,778 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:uh, okay. So I'll, uh, I'll just lost my phone too.'
2025-09-02 16:12:03,414 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It sounds like you're having a bit of a tough day with losing your watch and now your phone. That can be really stressful. If you'd like, I can try to help you search for your phone as well. To do that, I'll need to know a bit more information about it, like the brand, color, and type of phone. Would you be'
2025-09-02 16:12:03,418 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It sounds like you're having a bit of a tough day with losing your watch and now your phone. That can be really stressful. If you'd like, I can try to help you search for your phone as well. To do that, I'll need to know a bit more information about it, like the brand, color, and type of phone. Would you be'
2025-09-02 16:12:06,130 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay.'
2025-09-02 16:12:06,130 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay.'
2025-09-02 16:12:06,304 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'So okay. Okay. So the product type is'
2025-09-02 16:12:06,305 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:So okay. Okay. So the product type is'
2025-09-02 16:12:09,130 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'for mobile and, uh,'
2025-09-02 16:12:09,131 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:for mobile and, uh,'
2025-09-02 16:12:11,895 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'color the brand name is Xiaomi.'
2025-09-02 16:12:11,900 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:color the brand name is Xiaomi.'
2025-09-02 16:12:12,135 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='mobile', brand='Xiaomi', color='None'
2025-09-02 16:12:12,268 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 16:12:12,269 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%mobile%', '%Xiaomi%', '%mobile%', '%Xiaomi%')
2025-09-02 16:12:12,309 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: 'list' object has no attribute 'image_url'
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1185, in _find_matching_items_sync
    "image_url": results.image_url
                 ^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'image_url'
2025-09-02 16:12:12,323 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I encountered an unexpected error while searching for the item."}'
2025-09-02 16:12:23,179 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm sorry, but I encountered an unexpected error while searching for your Xiaomi mobile phone. If you could provide more details, such as the color of your phone, I'd be happy to try again.'
2025-09-02 16:12:23,180 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm sorry, but I encountered an unexpected error while searching for your Xiaomi mobile phone. If you could provide more details, such as the color of your phone, I'd be happy to try again.'
2025-09-02 16:12:53,715 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:12:53,766 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:12:58,940 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:12:58,940 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:13:03,139 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again. I'm still here to help. You were trying to find'
2025-09-02 16:13:03,140 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again. I'm still here to help. You were trying to find'
2025-09-02 16:13:05,443 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yeah. So you find you find you find my phone?'
2025-09-02 16:13:05,444 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yeah. So you find you find you find my phone?'
2025-09-02 16:13:14,430 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I apologize again for the earlier error. To try and find your phone, I'll need to know the color of your Xiaomi phone. Can you please tell me'
2025-09-02 16:13:14,431 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I apologize again for the earlier error. To try and find your phone, I'll need to know the color of your Xiaomi phone. Can you please tell me'
2025-09-02 16:13:17,980 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Black color.'
2025-09-02 16:13:17,981 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Black color.'
2025-09-02 16:13:18,199 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='mobile', brand='Xiaomi', color='black'
2025-09-02 16:13:18,331 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 16:13:18,332 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%mobile%', '%Xiaomi%', '%black%', '%mobile%', '%Xiaomi%', '%black%')
2025-09-02 16:13:18,372 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: 'list' object has no attribute 'image_url'
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1185, in _find_matching_items_sync
    "image_url": results.image_url
                 ^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'image_url'
2025-09-02 16:13:18,387 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I encountered an unexpected error while searching for the item."}'
2025-09-02 16:13:28,328 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm sorry, but I encountered an unexpected error while searching for your Xiaomi mobile phone. If you'd like, we could try something else or talk about something different.'
2025-09-02 16:13:28,329 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm sorry, but I encountered an unexpected error while searching for your Xiaomi mobile phone. If you'd like, we could try something else or talk about something different.'
2025-09-02 16:13:40,840 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:13:40,844 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:13:45,649 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:13:45,650 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:13:48,538 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again. I'm still here to help.'
2025-09-02 16:13:48,539 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again. I'm still here to help.'
2025-09-02 16:13:49,691 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. Who who are you?'
2025-09-02 16:13:49,693 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. Who who are you?'
2025-09-02 16:13:57,209 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm Darshini, a friendly and helpful voice assistant. I'm here to chat with you, answer your questions, and help with any'
2025-09-02 16:13:57,209 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm Darshini, a friendly and helpful voice assistant. I'm here to chat with you, answer your questions, and help with any'
2025-09-02 16:14:07,419 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Myself,'
2025-09-02 16:14:07,422 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Myself,'
2025-09-02 16:14:31,053 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'First'
2025-09-02 16:14:31,054 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:First'
2025-09-02 16:14:32,498 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'with'
2025-09-02 16:14:32,499 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:with'
2025-09-02 16:14:32,531 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It sounds'
2025-09-02 16:14:32,532 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It sounds'
2025-09-02 16:14:41,033 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems like you're trying to introduce yourself, but it got cut off. Please feel free to start again and tell me a bit about yourself. I'm all ears!'
2025-09-02 16:14:41,036 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It seems like you're trying to introduce yourself, but it got cut off. Please feel free to start again and tell me a bit about yourself. I'm all ears!'
2025-09-02 16:14:52,069 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:14:52,071 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:14:56,731 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:14:56,731 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:15:01,988 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again! Is there something I can help you with or would you like to chat?'
2025-09-02 16:15:01,989 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again! Is there something I can help you with or would you like to chat?'
2025-09-02 16:16:43,737 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 16:16:43,741 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 16:16:53,897 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 16:16:53,901 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 16:16:53,909 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:16:53,909 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:16:53,910 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:16:53,910 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:16:53,911 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:16:53,911 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:16:53,912 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:16:53,912 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:16:53,919 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:16:53,920 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:16:53,920 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:16:53,920 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:16:53,921 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:16:53,921 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:16:53,921 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:16:53,922 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:16:53,922 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 16:16:54,031 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 16:16:59,777 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:16:59,781 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:17:00,571 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 16:17:00,593 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 16:17:00,665 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:17:00,666 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:17:01,052 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 16:17:01,054 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 16:17:02,968 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:17:02,969 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:17:05,876 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello my self Darshini'
2025-09-02 16:17:05,879 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello my self Darshini'
2025-09-02 16:17:13,328 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. So I lost my watch.'
2025-09-02 16:17:13,331 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. So I lost my watch.'
2025-09-02 16:17:21,739 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. Can you please tell me more about it, like the brand, color, or type of watch it is? That way,'
2025-09-02 16:17:21,740 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. Can you please tell me more about it, like the brand, color, or type of watch it is? That way,'
2025-09-02 16:17:25,900 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. The brand the brand is purple and the color is silver.'
2025-09-02 16:17:25,901 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. The brand the brand is purple and the color is silver.'
2025-09-02 16:17:28,492 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I think there might be some'
2025-09-02 16:17:28,494 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I think there might be some'
2025-09-02 16:17:32,429 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Oh, no. No. No. No. No. No. No. No. No. No. No. Sorry. So, yes, there is some confusion. The brand is'
2025-09-02 16:17:32,430 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Oh, no. No. No. No. No. No. No. No. No. No. No. Sorry. So, yes, there is some confusion. The brand is'
2025-09-02 16:17:34,280 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'and the color is silver.'
2025-09-02 16:17:34,280 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:and the color is silver.'
2025-09-02 16:17:37,290 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'So, the brand is... (waiting for you to'
2025-09-02 16:17:37,291 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:So, the brand is... (waiting for you to'
2025-09-02 16:17:39,369 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Apple brand is Apple. Apple.'
2025-09-02 16:17:39,369 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Apple brand is Apple. Apple.'
2025-09-02 16:17:39,575 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 16:17:39,736 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 16:17:39,736 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 16:17:39,775 - __main__ - INFO - [asyncio_0] - [{'ID': 20, 'brand': 'apple', 'model': 'Gen 6', 'color': 'silver', 'product_type': 'Watch', 'image_url': 'https://m.media-amazon.com/images/I/51t59248jvL.jpg'}, {'ID': 2, 'brand': 'Apple', 'model': 'Watch Series X', 'color': 'Black', 'product_type': 'Watch', 'image_url': 'https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ'}]
2025-09-02 16:17:39,776 - __main__ - ERROR - [asyncio_0] - An error occurred during database query: 'list' object has no attribute 'image_url'
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1186, in _find_matching_items_sync
    "image_url": results.image_url
                 ^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'image_url'
2025-09-02 16:17:39,779 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I encountered an unexpected error while searching for the item."}'
2025-09-02 16:17:48,318 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I apologize, but I was unable to find your lost Apple watch. If you have any more details or need help with anything else, feel free to ask!'
2025-09-02 16:17:48,319 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I apologize, but I was unable to find your lost Apple watch. If you have any more details or need help with anything else, feel free to ask!'
2025-09-02 16:18:04,341 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'What happened?'
2025-09-02 16:18:04,342 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:What happened?'
2025-09-02 16:18:21,238 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'It seems that the tool I used to search for your lost Apple watch didn't provide a successful result. Sometimes, this can happen due to various reasons such as incomplete information or technical issues. If you'd like to try again or need assistance with something else, I'm here to help!'
2025-09-02 16:18:21,239 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:It seems that the tool I used to search for your lost Apple watch didn't provide a successful result. Sometimes, this can happen due to various reasons such as incomplete information or technical issues. If you'd like to try again or need assistance with something else, I'm here to help!'
2025-09-02 16:23:24,640 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 16:23:41,456 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 16:23:41,460 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 16:23:41,466 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:41,466 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:41,467 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:41,467 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:41,469 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:41,469 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:41,470 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:41,470 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:41,477 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:41,477 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:41,478 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:41,478 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:41,478 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:41,479 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:41,479 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:41,479 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:41,480 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 16:23:41,609 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 16:23:44,808 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:23:44,815 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:23:45,294 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 16:23:45,316 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 16:23:45,384 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:23:45,386 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:23:45,784 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 16:23:45,787 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 16:23:48,202 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello.'
2025-09-02 16:23:48,202 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello.'
2025-09-02 16:23:53,954 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello, it's nice to meet you. Is there something I can help you with or would you like to chat?'
2025-09-02 16:23:53,958 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello, it's nice to meet you. Is there something I can help you with or would you like to chat?'
2025-09-02 16:24:02,241 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Introduce yourself.'
2025-09-02 16:24:02,241 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Introduce yourself.'
2025-09-02 16:24:03,431 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9641fa1849df, body=None)
2025-09-02 16:24:03,770 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9641fa1849df, body=None)
2025-09-02 16:24:03,772 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9641fa1849df, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:24:07,911 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello, my name is Darshini, and I'm a friendly and helpful voice assistant. I'm here to assist you with any questions or topics you'd like to discuss. I can also help you find lost or found items using a special tool, if you have some details about the item. How can I help you today?'
2025-09-02 16:24:07,911 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello, my name is Darshini, and I'm a friendly and helpful voice assistant. I'm here to assist you with any questions or topics you'd like to discuss. I can also help you find lost or found items using a special tool, if you have some details about the item. How can I help you today?'
2025-09-02 16:24:27,144 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. So'
2025-09-02 16:24:27,146 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. So'
2025-09-02 16:24:29,468 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 16:24:29,469 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 16:24:30,290 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=89dbf80db356, body=None)
2025-09-02 16:24:30,580 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=89dbf80db356, body=None)
2025-09-02 16:24:30,582 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=89dbf80db356, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:24:30,680 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. Can you please tell me a bit more about it? What type of watch is it (e.g. smartwatch, analog, digital), what brand is it, and what color is it? This will help me try to find it for you.'
2025-09-02 16:24:30,681 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. Can you please tell me a bit more about it? What type of watch is it (e.g. smartwatch, analog, digital), what brand is it, and what color is it? This will help me try to find it for you.'
2025-09-02 16:24:40,161 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. The brand is Apple, and the color is silver.'
2025-09-02 16:24:40,162 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. The brand is Apple, and the color is silver.'
2025-09-02 16:24:41,019 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=cc8e184ae248, body=None)
2025-09-02 16:24:41,302 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=cc8e184ae248, body=None)
2025-09-02 16:24:41,310 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=cc8e184ae248, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:24:41,410 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'With the brand being Apple and the color being silver, that's a good start. Can you please tell me what type of Apple watch it is (e.g. Series 1, Series 5, etc.)? That would be really helpful in trying to locate it.'
2025-09-02 16:24:41,411 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:With the brand being Apple and the color being silver, that's a good start. Can you please tell me what type of Apple watch it is (e.g. Series 1, Series 5, etc.)? That would be really helpful in trying to locate it.'
2025-09-02 16:25:07,680 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. Can you find in database?'
2025-09-02 16:25:07,681 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. Can you find in database?'
2025-09-02 16:25:07,911 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='Apple Watch Series 5', brand='Apple', color='silver'
2025-09-02 16:25:08,084 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 16:25:08,085 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%Apple Watch Series 5%', '%Apple%', '%silver%', '%Apple Watch Series 5%', '%Apple%', '%silver%')
2025-09-02 16:25:08,133 - __main__ - INFO - [asyncio_0] - [{'ID': 20, 'brand': 'apple', 'model': 'Gen 6', 'color': 'silver', 'product_type': 'Watch', 'image_url': 'https://m.media-amazon.com/images/I/51t59248jvL.jpg'}]
2025-09-02 16:25:08,134 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 1 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}], "images": ["https://m.media-amazon.com/images/I/51t59248jvL.jpg"]}'
2025-09-02 16:25:09,028 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f0fe03343ef7, body=None)
2025-09-02 16:25:09,330 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f0fe03343ef7, body=None)
2025-09-02 16:25:09,338 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f0fe03343ef7, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:25:09,440 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I found 1 matching item for you. Here it is: 
ID: 20
Brand: Apple
Model: Gen 6
Color: Silver
Product Type: Watch
Image URL: https://m.media-amazon.com/images/I/51t59248jvL.jpg'
2025-09-02 16:25:09,440 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I found 1 matching item for you. Here it is: 
ID: 20
Brand: Apple
Model: Gen 6
Color: Silver
Product Type: Watch
Image URL: https://m.media-amazon.com/images/I/51t59248jvL.jpg'
2025-09-02 16:26:18,237 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:26:18,240 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:26:19,146 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=96805ba58789, body=None)
2025-09-02 16:26:19,970 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello,'
2025-09-02 16:26:19,971 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello,'
2025-09-02 16:28:33,671 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:37:47,610 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:43:43,600 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:46:18,609 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:47:11,298 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:47:50,009 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 16:47:50,014 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 16:47:57,954 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 16:47:57,957 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 16:47:57,964 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:47:57,965 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:47:57,965 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:47:57,966 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:47:57,966 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:47:57,966 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:47:57,967 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:47:57,967 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:47:57,974 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:47:57,975 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:47:57,975 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:47:57,976 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:47:57,976 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:47:57,976 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:47:57,976 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:47:57,977 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:47:57,977 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 16:47:58,074 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 16:48:03,991 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:48:03,993 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:48:57,597 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 16:48:57,601 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 16:49:06,783 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 16:49:06,787 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 16:49:06,795 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:49:06,795 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:49:06,795 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:49:06,796 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:49:06,796 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:49:06,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:49:06,797 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:49:06,798 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:49:06,805 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:49:06,805 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:49:06,806 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:49:06,806 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:49:06,806 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:49:06,807 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:49:06,807 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:49:06,807 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:49:06,808 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 16:49:06,935 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 16:49:10,906 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:49:10,914 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:49:46,578 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:49:46,580 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:50:06,759 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:50:06,761 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:51:03,880 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 16:51:03,885 - __main__ - WARNING - [MainThread] - Port 8000 in use by PID 0 (System Idle Process). Terminating.
2025-09-02 16:51:16,235 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 16:51:16,239 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 16:51:16,245 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:16,245 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:16,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:16,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:16,246 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:16,247 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:16,247 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:16,248 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:16,255 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:16,255 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:16,255 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:16,256 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:16,256 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:16,256 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:16,257 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:16,257 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:16,258 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 16:51:16,353 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 16:51:21,602 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:51:21,605 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:51:22,126 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 16:51:22,146 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 16:51:22,197 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:51:22,198 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:51:22,618 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 16:51:22,621 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 16:51:25,000 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:51:25,001 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:51:26,235 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c1a5d32e38c5, body=None)
2025-09-02 16:51:26,520 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c1a5d32e38c5, body=None)
2025-09-02 16:51:26,526 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=c1a5d32e38c5, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:51:26,632 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello, I'm Darshini, your friendly voice assistant. It's nice to meet you. How can I assist you today?'
2025-09-02 16:51:26,633 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello, I'm Darshini, your friendly voice assistant. It's nice to meet you. How can I assist you today?'
2025-09-02 16:51:41,513 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 16:51:41,516 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 16:51:42,398 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=62e2312cccb9, body=None)
2025-09-02 16:51:42,681 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=62e2312cccb9, body=None)
2025-09-02 16:51:42,684 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=62e2312cccb9, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:51:42,781 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. To help you find it, I'll need some more information. Can you please tell me the brand and color of your watch? Additionally, is it a specific type of watch, such as a smartwatch or a luxury watch?'
2025-09-02 16:51:42,782 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. To help you find it, I'll need some more information. Can you please tell me the brand and color of your watch? Additionally, is it a specific type of watch, such as a smartwatch or a luxury watch?'
2025-09-02 16:51:49,572 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The brand is purple, and the color is'
2025-09-02 16:51:49,573 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The brand is purple, and the color is'
2025-09-02 16:51:50,316 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'silver.'
2025-09-02 16:51:50,319 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:silver.'
2025-09-02 16:51:51,202 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=dca72b03c514, body=None)
2025-09-02 16:51:51,489 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=dca72b03c514, body=None)
2025-09-02 16:51:51,498 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=dca72b03c514, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:51:51,601 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I think there might be some confusion. You mentioned the brand is "purple", but purple is typically a color, not a brand. Could you please tell me the actual brand of your watch, such as Apple, Fossil, or Rolex? That way, I can try to help you find it. You've already told me the color is silver.'
2025-09-02 16:51:51,602 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I think there might be some confusion. You mentioned the brand is "purple", but purple is typically a color, not a brand. Could you please tell me the actual brand of your watch, such as Apple, Fossil, or Rolex? That way, I can try to help you find it. You've already told me the color is silver.'
2025-09-02 16:51:54,319 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The brand is Apple.'
2025-09-02 16:51:54,321 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The brand is Apple.'
2025-09-02 16:51:54,536 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 16:51:54,679 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 16:51:54,679 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 16:51:54,775 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}], "images": ["https://m.media-amazon.com/images/I/51t59248jvL.jpg", "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"]}'
2025-09-02 16:51:56,161 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'And the color is silver.'
2025-09-02 16:51:56,162 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:And the color is silver.'
2025-09-02 16:51:57,193 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=645a45d3b47f, body=None)
2025-09-02 16:51:57,483 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=645a45d3b47f, body=None)
2025-09-02 16:51:57,487 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=645a45d3b47f, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:51:57,581 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I've already searched for your Apple watch with a silver color. Here is the result: 

I found 2 matching items for you. Here they are: 
ID: 20, brand: apple, model: Gen 6, color: silver, product_type: Watch 
ID: 2, brand: Apple, model: Watch Series X, color: Black, product_type: Watch 

Please note that one of the results has a black color, which does not match your description. You may want to double-check the results to see if either of these items is your lost watch.'
2025-09-02 16:51:57,582 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I've already searched for your Apple watch with a silver color. Here is the result: 

I found 2 matching items for you. Here they are: 
ID: 20, brand: apple, model: Gen 6, color: silver, product_type: Watch 
ID: 2, brand: Apple, model: Watch Series X, color: Black, product_type: Watch 

Please note that one of the results has a black color, which does not match your description. You may want to double-check the results to see if either of these items is your lost watch.'
2025-09-02 16:52:10,945 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Twenty'
2025-09-02 16:52:10,946 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Twenty'
2025-09-02 16:52:11,815 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=15ddc1a0fad5, body=None)
2025-09-02 16:52:12,096 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=15ddc1a0fad5, body=None)
2025-09-02 16:52:12,105 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=15ddc1a0fad5, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:52:12,202 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Based on the search results, the item with ID 20 matches your description: 

ID: 20, brand: apple, model: Gen 6, color: silver, product_type: Watch 

This could potentially be your lost Apple watch. If you'd like to confirm or gather more information, please let me know how I can further assist you.'
2025-09-02 16:52:12,204 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Based on the search results, the item with ID 20 matches your description: 

ID: 20, brand: apple, model: Gen 6, color: silver, product_type: Watch 

This could potentially be your lost Apple watch. If you'd like to confirm or gather more information, please let me know how I can further assist you.'
2025-09-02 16:52:15,812 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'No. No. Show me the photo.'
2025-09-02 16:52:15,812 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:No. No. Show me the photo.'
2025-09-02 16:52:16,747 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9ae340f4f0a3, body=None)
2025-09-02 16:52:17,038 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9ae340f4f0a3, body=None)
2025-09-02 16:52:17,040 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=9ae340f4f0a3, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:52:17,126 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm a large language model, I don't have the capability to directly display images. However, I can provide you with the image URL that was returned in the search results. 

The image URL for the item with ID 20 is: https://m.media-amazon.com/images/I/51t59248jvL.jpg

You can copy and paste this URL into a web browser to view the image. This might help you confirm if the watch in the image is indeed your lost Apple watch.'
2025-09-02 16:52:17,130 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm a large language model, I don't have the capability to directly display images. However, I can provide you with the image URL that was returned in the search results. 

The image URL for the item with ID 20 is: https://m.media-amazon.com/images/I/51t59248jvL.jpg

You can copy and paste this URL into a web browser to view the image. This might help you confirm if the watch in the image is indeed your lost Apple watch.'
2025-09-02 16:52:18,780 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Show me the image.'
2025-09-02 16:52:18,782 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Show me the image.'
2025-09-02 16:52:19,657 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f3a5b5fca253, body=None)
2025-09-02 16:52:19,945 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f3a5b5fca253, body=None)
2025-09-02 16:52:19,953 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f3a5b5fca253, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:52:20,054 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm a large language model, I don't have the capability to directly display images. I can only provide text-based information and URLs. If you want to view the image, you'll need to copy and paste the URL I provided earlier into a web browser: https://m.media-amazon.com/images/I/51t59248jvL.jpg'
2025-09-02 16:52:20,056 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm a large language model, I don't have the capability to directly display images. I can only provide text-based information and URLs. If you want to view the image, you'll need to copy and paste the URL I provided earlier into a web browser: https://m.media-amazon.com/images/I/51t59248jvL.jpg'
2025-09-02 16:52:23,341 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Image URL today.'
2025-09-02 16:52:23,343 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Image URL today.'
2025-09-02 16:52:24,241 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f0166dd51606, body=None)
2025-09-02 16:52:24,529 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f0166dd51606, body=None)
2025-09-02 16:52:24,531 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=f0166dd51606, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:52:24,631 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'https://m.media-amazon.com/images/I/51t59248jvL.jpg'
2025-09-02 16:52:24,632 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:https://m.media-amazon.com/images/I/51t59248jvL.jpg'
2025-09-02 16:54:12,423 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:54:12,424 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:54:25,599 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:54:25,601 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:54:29,182 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:54:29,183 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:54:30,116 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=bc4f911fd536, body=None)
2025-09-02 16:54:30,393 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=bc4f911fd536, body=None)
2025-09-02 16:54:30,395 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=bc4f911fd536, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:54:30,491 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again! I'm Darshini, your friendly voice assistant. Is there anything else I can help you with or would you like to continue looking for your lost watch?'
2025-09-02 16:54:30,492 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again! I'm Darshini, your friendly voice assistant. Is there anything else I can help you with or would you like to continue looking for your lost watch?'
2025-09-02 16:54:34,806 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hi. I lost my watch.'
2025-09-02 16:54:34,807 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hi. I lost my watch.'
2025-09-02 16:54:35,717 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=178c0dc6a4bb, body=None)
2025-09-02 16:54:36,005 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=178c0dc6a4bb, body=None)
2025-09-02 16:54:36,007 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=178c0dc6a4bb, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:54:36,093 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm so sorry to hear that you lost your watch. To help you find it, I'll need some more information. Can you please tell me the brand, color, and type of watch you lost?'
2025-09-02 16:54:36,094 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm so sorry to hear that you lost your watch. To help you find it, I'll need some more information. Can you please tell me the brand, color, and type of watch you lost?'
2025-09-02 16:54:43,152 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Uh, the color is silver and the brand is Apple.'
2025-09-02 16:54:43,153 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Uh, the color is silver and the brand is Apple.'
2025-09-02 16:54:43,442 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 16:54:43,587 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 16:54:43,588 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 16:54:43,634 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}], "images": ["https://m.media-amazon.com/images/I/51t59248jvL.jpg", "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"]}'
2025-09-02 16:54:43,682 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99748, Requested 1738. Please try again in 21m23.663s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452qsxrex78raxb3pqrqn49, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99748, Requested 1738. Please try again in 21m23.663s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 16:54:45,741 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99746, Requested 1738. Please try again in 21m21.604s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452qvy3eq8szxw5wz1f4b19, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99746, Requested 1738. Please try again in 21m21.604s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 16:54:47,778 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99743, Requested 1738. Please try again in 21m19.57s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452qxxnex785xc9858ar0jx, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99743, Requested 1738. Please try again in 21m19.57s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 16:54:49,823 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99741, Requested 1738. Please try again in 21m17.522s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452qzxmex7a4s8z7wapdfx0, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99741, Requested 1738. Please try again in 21m17.522s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 16:54:49,825 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99741, Requested 1738. Please try again in 21m17.522s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452qzxmex7a4s8z7wapdfx0, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99741, Requested 1738. Please try again in 21m17.522s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 84, in _inference_task
    async for chunk in llm_node:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 465, in llm_node
    async for chunk in stream:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-09-02 16:55:48,406 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:55:48,409 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:56:45,434 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 16:56:55,736 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 16:56:55,740 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 16:56:55,748 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:56:55,748 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:56:55,749 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:56:55,749 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:56:55,750 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:56:55,750 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:56:55,751 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:56:55,751 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:56:55,758 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:56:55,758 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:56:55,759 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:56:55,759 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:56:55,759 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:56:55,760 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:56:55,760 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:56:55,760 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:56:55,761 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 16:56:55,870 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 16:57:00,914 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:57:00,922 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 16:57:01,507 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 16:57:01,524 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 16:57:01,616 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 16:57:01,617 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 16:57:01,927 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 16:57:01,931 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 16:57:04,494 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 16:57:04,496 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 16:57:05,547 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=18f284f4d773, body=None)
2025-09-02 16:57:05,850 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=18f284f4d773, body=None)
2025-09-02 16:57:05,853 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=18f284f4d773, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 16:57:05,939 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello, I'm Darshini, your friendly voice assistant. It's nice to meet you. How can I assist you today?'
2025-09-02 16:57:05,941 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello, I'm Darshini, your friendly voice assistant. It's nice to meet you. How can I assist you today?'
2025-09-02 16:57:10,363 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 16:57:10,364 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 16:57:10,411 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99985, Requested 220. Please try again in 2m56.833999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452w973esj8zcmk173sfq26, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99985, Requested 220. Please try again in 2m56.833999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 16:57:12,436 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99983, Requested 220. Please try again in 2m54.808999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452wb6besm9ht3nspp68jmh, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99983, Requested 220. Please try again in 2m54.808999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 16:57:14,484 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99980, Requested 220. Please try again in 2m52.762s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452wd6aezdrjz979a7vyt60, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99980, Requested 220. Please try again in 2m52.762s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 16:57:16,509 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99978, Requested 220. Please try again in 2m50.737s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452wf5kesnvm03ysgrqh35g, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99978, Requested 220. Please try again in 2m50.737s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 16:57:16,511 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99978, Requested 220. Please try again in 2m50.737s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k452wf5kesnvm03ysgrqh35g, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 99978, Requested 220. Please try again in 2m50.737s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 84, in _inference_task
    async for chunk in llm_node:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 465, in llm_node
    async for chunk in stream:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-09-02 16:59:34,837 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 17:00:19,301 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 17:00:19,305 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 17:00:19,313 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:19,314 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:19,314 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:19,314 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:19,315 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:19,315 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:19,315 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:19,316 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:19,323 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:19,323 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:19,323 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:19,324 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:19,324 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:19,324 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:19,325 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:19,325 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:19,326 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 17:00:19,453 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 17:00:24,272 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 17:00:24,277 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 17:00:25,755 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 17:00:25,780 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 17:00:25,859 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:00:25,860 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:00:26,184 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 17:00:26,188 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 17:00:27,858 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 17:00:27,860 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 17:00:29,113 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6070cf22f2ad, body=None)
2025-09-02 17:00:29,410 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6070cf22f2ad, body=None)
2025-09-02 17:00:29,412 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6070cf22f2ad, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:00:29,504 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello my name is Darshini, I'm here to help. What would you like to talk about?'
2025-09-02 17:00:29,505 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello my name is Darshini, I'm here to help. What would you like to talk about?'
2025-09-02 17:00:33,318 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 17:00:33,321 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 17:00:34,113 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6be287a6e4ac, body=None)
2025-09-02 17:00:34,397 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6be287a6e4ac, body=None)
2025-09-02 17:00:34,399 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=6be287a6e4ac, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:00:34,484 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Sorry to hear that you lost your watch. Can you tell me a little more about it? What brand is it, or was it any particular color? Knowing more details will help me try to assist you.'
2025-09-02 17:00:34,485 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Sorry to hear that you lost your watch. Can you tell me a little more about it? What brand is it, or was it any particular color? Knowing more details will help me try to assist you.'
2025-09-02 17:00:42,475 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The brand is Apple, and the color is silver.'
2025-09-02 17:00:42,475 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The brand is Apple, and the color is silver.'
2025-09-02 17:00:43,332 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4bae1cd8aa27, body=None)
2025-09-02 17:00:43,624 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4bae1cd8aa27, body=None)
2025-09-02 17:00:43,631 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4bae1cd8aa27, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:00:43,724 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'That sounds specific enough. What kind of Apple watch did you have, was it one of the older models or is it a more recent Series? And do you remember when you last had it?'
2025-09-02 17:00:43,725 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:That sounds specific enough. What kind of Apple watch did you have, was it one of the older models or is it a more recent Series? And do you remember when you last had it?'
2025-09-02 17:01:03,883 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'It's a recent model. You can find any kind of Apple watch you find.'
2025-09-02 17:01:03,884 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:It's a recent model. You can find any kind of Apple watch you find.'
2025-09-02 17:01:04,121 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 17:01:04,289 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 17:01:04,289 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 17:01:04,346 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}], "images": ["https://m.media-amazon.com/images/I/51t59248jvL.jpg", "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"]}'
2025-09-02 17:01:04,692 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=75e4a2535b59, body=None)
2025-09-02 17:01:04,984 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=75e4a2535b59, body=None)
2025-09-02 17:01:04,988 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=75e4a2535b59, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:01:05,083 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Let me try to use our database to help you find your lost Apple watch. Please wait for the results.

'
2025-09-02 17:01:05,084 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Let me try to use our database to help you find your lost Apple watch. Please wait for the results.

'
2025-09-02 17:01:05,961 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=cf39f346e937, body=None)
2025-09-02 17:01:06,263 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=cf39f346e937, body=None)
2025-09-02 17:01:06,265 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=cf39f346e937, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:01:06,364 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I found 2 matching items for you. Here they are.

ID: 20
Brand: apple
Model: Gen 6
Color: silver
Product Type: Watch
Image URL: https://m.media-amazon.com/images/I/51t59248jvL.jpg

ID: 2
Brand: Apple
Model: Watch Series X
Color: Black
Product Type: Watch
Image URL: https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ'
2025-09-02 17:01:06,365 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I found 2 matching items for you. Here they are.

ID: 20
Brand: apple
Model: Gen 6
Color: silver
Product Type: Watch
Image URL: https://m.media-amazon.com/images/I/51t59248jvL.jpg

ID: 2
Brand: Apple
Model: Watch Series X
Color: Black
Product Type: Watch
Image URL: https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ'
2025-09-02 17:01:13,336 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I'll get that.'
2025-09-02 17:01:13,336 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I'll get that.'
2025-09-02 17:01:14,332 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=a01d7fd0f152, body=None)
2025-09-02 17:01:14,625 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=a01d7fd0f152, body=None)
2025-09-02 17:01:14,627 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=a01d7fd0f152, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:01:14,724 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I'm glad I could help you find your watch. If you have any other questions or need further assistance, feel free to ask. Otherwise, have a great day!'
2025-09-02 17:01:14,725 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I'm glad I could help you find your watch. If you have any other questions or need further assistance, feel free to ask. Otherwise, have a great day!'
2025-09-02 17:02:04,852 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 17:02:04,853 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 17:02:05,992 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=d522206cdf51, body=None)
2025-09-02 17:02:06,274 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=d522206cdf51, body=None)
2025-09-02 17:02:06,283 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=d522206cdf51, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:02:06,374 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello again! How can I assist you today?'
2025-09-02 17:02:06,375 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello again! How can I assist you today?'
2025-09-02 17:02:07,794 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my phone.'
2025-09-02 17:02:07,795 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my phone.'
2025-09-02 17:02:08,718 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4ea2a6a31465, body=None)
2025-09-02 17:02:09,001 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4ea2a6a31465, body=None)
2025-09-02 17:02:09,008 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=4ea2a6a31465, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:02:09,093 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Sorry to hear that your phone is lost. Can you tell me a bit more about it? Is it an iPhone, Samsung, or something else? And do you remember anything specific about its color or model?'
2025-09-02 17:02:09,094 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Sorry to hear that your phone is lost. Can you tell me a bit more about it? Is it an iPhone, Samsung, or something else? And do you remember anything specific about its color or model?'
2025-09-02 17:02:17,280 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Yeah. The phone brand is the Xiaomi and the prototype is mobile.'
2025-09-02 17:02:17,284 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Yeah. The phone brand is the Xiaomi and the prototype is mobile.'
2025-09-02 17:02:18,638 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=14bea4ae21f9, body=None)
2025-09-02 17:02:18,928 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=14bea4ae21f9, body=None)
2025-09-02 17:02:18,936 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=14bea4ae21f9, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:02:19,034 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Unfortunately, it seems like you provided just one detail, and the tool requires at least two of the following: product_type, brand, or color. Can you please tell me more about your phone, such as its color or any other distinctive features? That way, I might be able to help you find it.'
2025-09-02 17:02:19,035 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Unfortunately, it seems like you provided just one detail, and the tool requires at least two of the following: product_type, brand, or color. Can you please tell me more about your phone, such as its color or any other distinctive features? That way, I might be able to help you find it.'
2025-09-02 17:02:24,713 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Okay. So the color is black.'
2025-09-02 17:02:24,714 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Okay. So the color is black.'
2025-09-02 17:02:25,670 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=35c0858ee50d, body=None)
2025-09-02 17:02:25,953 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=35c0858ee50d, body=None)
2025-09-02 17:02:25,955 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=35c0858ee50d, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:02:26,054 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Now we have two details. To help you find your phone, I can try searching the database again. Can you remember what model or product series of Xiaomi phone you had, or is it specifically a Redmi or Poco model?

Additionally, do you recall approximately when you last had your phone? This will help narrow down the search.'
2025-09-02 17:02:26,055 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Now we have two details. To help you find your phone, I can try searching the database again. Can you remember what model or product series of Xiaomi phone you had, or is it specifically a Redmi or Poco model?

Additionally, do you recall approximately when you last had your phone? This will help narrow down the search.'
2025-09-02 17:02:27,346 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'And the brand is Xiaomi.'
2025-09-02 17:02:27,346 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:And the brand is Xiaomi.'
2025-09-02 17:02:27,393 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5615, Requested 1291. Please try again in 9.051s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k4535yrnf0hrmqtp1ykj6veq, body={'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5615, Requested 1291. Please try again in 9.051s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 17:02:29,444 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5410, Requested 1291. Please try again in 7.007999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k45360rff4zvaxjayezz2rrk, body={'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5410, Requested 1291. Please try again in 7.007999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 17:02:31,491 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5205, Requested 1291. Please try again in 4.954s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k45362rpf0jvx4eypebpy732, body={'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5205, Requested 1291. Please try again in 4.954s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 17:02:33,533 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5001, Requested 1291. Please try again in 2.912999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k45364rff50bxs9e8e7wvd41, body={'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5001, Requested 1291. Please try again in 2.912999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 17:02:33,535 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5001, Requested 1291. Please try again in 2.912999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k45364rff50bxs9e8e7wvd41, body={'message': 'Rate limit reached for model `llama-3.1-8b-instant` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per minute (TPM): Limit 6000, Used 5001, Requested 1291. Please try again in 2.912999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 84, in _inference_task
    async for chunk in llm_node:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 465, in llm_node
    async for chunk in stream:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-09-02 17:07:31,424 - livekit.agents - INFO - [MainThread] - draining worker
2025-09-02 17:07:53,145 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 17:07:53,148 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 17:11:35,618 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 17:12:00,600 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 17:26:21,774 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 17:26:40,140 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 17:26:40,144 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 17:26:40,151 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:40,152 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:40,152 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:40,153 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:40,153 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:40,153 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:40,154 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:40,154 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:40,161 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:40,162 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:40,163 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:40,163 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:40,164 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:40,164 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:40,164 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:40,164 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:40,165 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 17:26:40,298 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 17:26:46,401 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 17:26:46,406 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 17:26:46,929 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 17:26:46,950 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 17:26:46,981 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 17:26:46,982 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 17:26:47,426 - __main__ - INFO - [job_thread_runner] - --- [EnglishAssistant] __init__ CALLED --- Agent initialized.
2025-09-02 17:26:47,430 - __main__ - INFO - [job_thread_runner] - [AgentEntry] AgentSession.start() completed.
2025-09-02 17:26:51,870 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'Hello?'
2025-09-02 17:26:51,871 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:Hello?'
2025-09-02 17:26:52,901 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=7baf5ce29af1, body=None)
2025-09-02 17:26:53,191 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=7baf5ce29af1, body=None)
2025-09-02 17:26:53,201 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=7baf5ce29af1, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:26:53,296 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Hello my self Darshini'
2025-09-02 17:26:53,297 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Hello my self Darshini'
2025-09-02 17:26:59,127 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I lost my watch.'
2025-09-02 17:26:59,129 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I lost my watch.'
2025-09-02 17:26:59,892 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=453c5ee51f24, body=None)
2025-09-02 17:27:00,174 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=453c5ee51f24, body=None)
2025-09-02 17:27:00,176 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=453c5ee51f24, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:27:00,266 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'Sorry to hear that you lost your watch. To help you find it, can you please tell me the brand and color of your watch?'
2025-09-02 17:27:00,267 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:Sorry to hear that you lost your watch. To help you find it, can you please tell me the brand and color of your watch?'
2025-09-02 17:27:06,538 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'The brand is Apple, and the color, it's silver.'
2025-09-02 17:27:06,538 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:The brand is Apple, and the color, it's silver.'
2025-09-02 17:27:06,724 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Called] LLM requested search with args: type='watch', brand='Apple', color='silver'
2025-09-02 17:27:06,867 - __main__ - INFO - [asyncio_0] - --- [DB Query] EXECUTING SQL: 
                    SELECT "ID", brand, model, color, product_type, image_url
                    FROM scrapingdata."Darshini"
                    WHERE ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) >= 2
                    ORDER BY ((CASE WHEN "product_type" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "brand" ILIKE %s THEN 1 ELSE 0 END) + (CASE WHEN "color" ILIKE %s THEN 1 ELSE 0 END)) DESC, "ID"
                    LIMIT 5;
                
2025-09-02 17:27:06,867 - __main__ - INFO - [asyncio_0] - --- [DB Query] WITH PARAMS: ('%watch%', '%Apple%', '%silver%', '%watch%', '%Apple%', '%silver%')
2025-09-02 17:27:06,915 - __main__ - INFO - [job_thread_runner] - --- [DB Tool Result] Result sent back to LLM: '{"summary": "I found 2 matching items for you. Here they are.", "items": [{"ID": 20, "brand": "apple", "model": "Gen 6", "color": "silver", "product_type": "Watch", "image_url": "https://m.media-amazon.com/images/I/51t59248jvL.jpg"}, {"ID": 2, "brand": "Apple", "model": "Watch Series X", "color": "Black", "product_type": "Watch", "image_url": "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"}], "images": ["https://m.media-amazon.com/images/I/51t59248jvL.jpg", "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/MXL53_VW_34FR+watch-case-46-aluminum-silver-nc-s10_VW_34FR+watch-face-46-aluminum-silver-s10_VW_34FR?wid=750&hei=712&trim=1%2C0&fmt=p-jpg&qlt=95&.v=ZkdhWTVUeVlhdFNxUVVUY0VEaDlQdFg1Yy9oMlkxaSt3Q1l3clpabm9VZ3ZBUXVDSWtueGFFWmRtanJVdndvVzk2dVpqb1NYUlI2c2xkRFVxMlVQc1RxTk9aQTlFdjBSZllkTTc1TlNEczgyaFZnVnZtNWV4Rko5NFhmb3MvRm9wT2pDK0p1eUlXQ1QyQ0Jaa0xCVFZrajZ0R3ljdlFPV0V5NHlwMVhnR2lESHgzTU9lZFplQm5lbHZsTUtHZkpFWU1URmJlSGZ1bEdBanc4RitvK3BUUlFVMEJ2bnk4TDV2UWtuV05TbzFPRQ"]}'
2025-09-02 17:27:07,747 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in recv_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=3b563063fa47, body=None)
2025-09-02 17:27:08,025 - livekit.plugins.elevenlabs - ERROR - [job_thread_runner] - Error in _process_segments
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=3b563063fa47, body=None)
2025-09-02 17:27:08,034 - livekit.agents - WARNING - [job_thread_runner] - failed to synthesize speech, retrying in 0.1s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 370, in _run
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 363, in _process_segments
    await self._run_ws(word_stream, request_id)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 507, in _run_ws
    await asyncio.gather(*tasks)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 492, in recv_task
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: quota_exceeded (status_code=500, request_id=3b563063fa47, body=None)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\tts\tts.py", line 305, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\elevenlabs\tts.py", line 381, in _run
    raise APIConnectionError() from e
livekit.agents._exceptions.APIConnectionError: Connection error.
2025-09-02 17:27:08,128 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - assistant] Text: 'I found 2 matching items for you. Here they are. 

1. Apple Gen 6 silver watch 
2. Apple Watch Series X (Note: The color is Black, not silver)'
2025-09-02 17:27:08,130 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'agent_msg:I found 2 matching items for you. Here they are. 

1. Apple Gen 6 silver watch 
2. Apple Watch Series X (Note: The color is Black, not silver)'
2025-09-02 17:28:32,822 - __main__ - INFO - [job_thread_runner] - [CONVO_HISTORY - user] Text: 'I want image.'
2025-09-02 17:28:32,823 - __main__ - INFO - [job_thread_runner] - --- [Data Publishing] Sending to frontend: 'user_msg:I want image.'
2025-09-02 17:28:32,870 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100410, Requested 676. Please try again in 15m39.05s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k454nqhefngvft8vmt4esnnc, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100410, Requested 676. Please try again in 15m39.05s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 17:28:34,890 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100408, Requested 676. Please try again in 15m37.03s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k454nsgjfnj986131w3bntmw, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100408, Requested 676. Please try again in 15m37.03s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 17:28:36,941 - livekit.agents - WARNING - [job_thread_runner] - failed to generate LLM completion, retrying in 2.0s
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100406, Requested 676. Please try again in 15m34.98s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k454nvgmfnkrrpbzm4mwtam4, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100406, Requested 676. Please try again in 15m34.98s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 17:28:38,982 - livekit.agents - ERROR - [job_thread_runner] - AgentSession is closing due to unrecoverable error
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100403, Requested 676. Please try again in 15m32.937999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k454nxgefnmbae2fmq502caq, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100403, Requested 676. Please try again in 15m32.937999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})
2025-09-02 17:28:38,983 - livekit.agents - ERROR - [job_thread_runner] - Error in _inference_task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 138, in _main_task
    return await self._run()
           ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\openai\llm.py", line 601, in _run
    raise APIStatusError(
livekit.agents._exceptions.APIStatusError: Error code: 429 - {'error': {'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100403, Requested 676. Please try again in 15m32.937999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'}} (status_code=429, request_id=req_01k454nxgefnmbae2fmq502caq, body={'message': 'Rate limit reached for model `llama-3.3-70b-versatile` in organization `org_01jse1h25wf8ctfrk2fv6qsva7` service tier `on_demand` on tokens per day (TPD): Limit 100000, Used 100403, Requested 676. Please try again in 15m32.937999999s. Need more tokens? Upgrade to Dev Tier today at https://console.groq.com/settings/billing', 'type': 'tokens', 'code': 'rate_limit_exceeded'})

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\utils\log.py", line 16, in async_fn_logs
    return await fn(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\generation.py", line 84, in _inference_task
    async for chunk in llm_node:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\voice\agent.py", line 465, in llm_node
    async for chunk in stream:
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 232, in __anext__
    raise exc  # noqa: B904
    ^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\agents\llm\llm.py", line 145, in _main_task
    raise APIConnectionError(
livekit.agents._exceptions.APIConnectionError: failed to generate LLM completion after 4 attempts
2025-09-02 17:29:10,496 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
2025-09-02 19:16:38,782 - __main__ - INFO - [MainThread] - --- __main__: Starting FastAPI server (Token Server mode) ---
2025-09-02 19:16:50,598 - __main__ - INFO - [MainThread] - --- __main__: Running Agent Worker mode ---
2025-09-02 19:16:50,602 - livekit.agents - INFO - [MainThread] - starting worker
2025-09-02 19:16:50,610 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:16:50,611 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:16:50,611 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:16:50,611 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:16:50,612 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:16:50,612 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:16:50,613 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:16:50,613 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:16:50,619 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:16:50,620 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:16:50,620 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:16:50,620 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:16:50,621 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:16:50,622 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:16:50,622 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:16:50,623 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:16:50,624 - livekit.agents - INFO - [MainThread] - see tracing information at http://localhost:8081/debug
2025-09-02 19:16:50,721 - livekit.agents - INFO - [MainThread] - registered worker
2025-09-02 19:17:15,057 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 19:17:15,065 - englog - INFO - [MainThread] - [TokenSvc] /token endpoint hit.
2025-09-02 19:17:15,597 - livekit.agents - INFO - [MainThread] - received job request
2025-09-02 19:17:15,611 - __main__ - INFO - [job_thread_runner] - --- [AgentEntry] AGENT ENTRYPOINT --- Room: voice-assistant-room-db
2025-09-02 19:17:15,700 - livekit.agents - INFO - [MainThread] - initializing job runner
2025-09-02 19:17:15,701 - livekit.agents - INFO - [MainThread] - job runner initialized
2025-09-02 19:17:16,042 - livekit.agents - ERROR - [job_thread_runner] - unhandled exception while running the job task
Traceback (most recent call last):
  File "D:\Projects\darshini voice ai\backend\englog.py", line 1204, in entrypoint
    vad_plugin = silero.VAD.load()
                 ^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\silero\vad.py", line 123, in load
    session = onnx_model.new_inference_session(force_cpu)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\livekit\plugins\silero\onnx_model.py", line 28, in new_inference_session
    session = onnxruntime.InferenceSession(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\onnxruntime\capi\onnxruntime_inference_collection.py", line 472, in __init__
    self._create_inference_session(providers, provider_options, disabled_optimizers)
  File "D:\Projects\darshini voice ai\venv\Lib\site-packages\onnxruntime\capi\onnxruntime_inference_collection.py", line 561, in _create_inference_session
    sess.initialize_session(providers, provider_options, disabled_optimizers)
onnxruntime.capi.onnxruntime_pybind11_state.RuntimeException: [ONNXRuntimeError] : 6 : RUNTIME_EXCEPTION : Exception during initialization: bad allocation
2025-09-02 19:24:15,560 - livekit - WARNING - [Dummy-1] - livekit::rtc_engine:446:livekit::rtc_engine - received session close: "signal client closed: \"stream closed\"" UnknownReason Resume
